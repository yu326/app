function FoltopChart(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.part_grouplist;this.requestData;this.showid="bigchart";this.beforeRender=function(){c.part4.beforeRefresh()};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();createShowPart(c.element.modelID,4,c,function(f){c.part4=f;var e="";if(c.charttype!=undefined){e=c.charttype}else{e="column"}c.part4.setFlash(e,c.showid);c.part4.render(d)})};this.requestCallBack=function(e){if(e!=null){c.requestData=e;if(c.postDataJson.contrast!=null){var d=[];var f={};f.totalcount=e.length;f.categoryname="";f.categoryvalue="";f.datalist=[];$.each(e,function(h,g){var j={};j.label=g.categoryname;j.value=g.totalcount;f.datalist.push(j)});d.push(f);c.part4.refresh(d,"label","value")}else{c.part4.refresh(e,"users_screen_name",getValueNameFromOrderby(c.postDataJson.output.orderby))}}else{if(c.postDataJson.output.outputtype==1){if(c.postDataJson.contrast!=null){c.part4.refresh(null,"label","value")}else{c.part4.refresh(e,"users_screen_name",getValueNameFromOrderby(c.postDataJson.output.orderby))}}}};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.refreshdata=function(e){if(c.postDataJson.contrast!=null){var d=[];var f={};f.totalcount=e.length;f.categoryname="";f.categoryvalue="";f.datalist=[];$.each(e,function(h,g){var j={};j.label=g.categoryname;j.value=g.totalcount;f.datalist.push(j)});d.push(f);c.part4.refresh(d,"label","value")}else{c.part4.refresh(e,"users_screen_name",c.postDataJson.output.orderby)}}};function FoltopConfig(a,c){var d=this;this.targetID=a;this.element=c;this.partFormConfig;this.partAuthConfig;this.partAnalysis;this.partSaveFormBtn;this.partOutputPin;this.partInputPin;this.linkageSearch;this.listpart;this.partAddElement;this.partDataconfig;this.partEditWidgetButton;this.renderEditForm=function(e){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.partDataconfig=createConfigPart(this.element.modelID,"dataconfig",this);this.partDataconfig.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render(e==true);if(e&&d.element.instanceType!=3){this.partEditWidgetButton=createConfigPart(this.element.modelID,"editwidgetbutton",this);this.partEditWidgetButton.render()}};this.renderEditAuth=function(){$(this.targetID).empty();this.partAuthConfig=createConfigPart(this.element.modelID,"authconfig",this);this.partAuthConfig.render()};this.renderForm=function(){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render();this.partAnalysis=createConfigPart(this.element.modelID,"analysis",this);this.partAnalysis.render()};this.renderLinkage=function(e){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.linkageSearch=createConfigPart(this.element.modelID,"linkagesearch",this);this.linkageSearch.render();this.listpart=createConfigPart(this.element.modelID,"listpart",this);this.listpart.setHead(["用户名","粉丝数","关注数","文章数"],true);this.listpart.setField(["users_screen_name","users_followers_count","users_friends_count","users_statuses_count"]);this.listpart.render(this.linkageSearch.contentTargetID);this.partOutputPin=createConfigPart(this.element.modelID,"outputpin",this);this.partOutputPin.render();this.partInputPin=createConfigPart(this.element.modelID,"inputpin",this);this.partInputPin.render();this.partDataconfig=createConfigPart(this.element.modelID,"dataconfig",this);this.partDataconfig.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render(e==true)};var b;this.initOutputFields=function(){b={};b.users_id={text:"用户名",type:"value_text_object"};b.users_screen_name={text:"作者昵称",type:"string"};b.users_name={text:"显示名称",type:"string"};b.users_gender={text:"作者性别",type:"string"};b.users_verified={text:"是否认证",type:"int"};b.users_allow_all_act_msg={text:"允许私信",type:"int"};b.users_allow_all_comment={text:"允许评论",type:"int"};b.users_country_code={text:"所属国家",type:"value_text_object"};b.users_province_code={text:"所属省份",type:"value_text_object"};b.users_city_code={text:"所属城市",type:"value_text_object"};b.users_district_code={text:"所属区县",type:"value_text_object"};b.users_sourceid={text:"数据来源",type:"int"};b.users_verified_type={text:"认证类型",type:"int"};b.users_verified_reason={text:"认证原因",type:"string"};b.users_description={text:"用户简介",type:"string"};b.users_url={text:"博客地址",type:"string"};b.users_domain={text:"个性域名",type:"string"};b.users_friends_id={text:"关注",type:"value_text_object"}};this.getOutputFields=function(){if(b==undefined||b==null){d.initOutputFields()}var f=[];if(b){var e=d.element.dataJson.select.value;for(var g=0;g<e.length;g++){if(b[e[g]]!=undefined){f.push({text:b[e[g]].text,value:e[g],type:b[e[g]].type})}}}var h={text:"@用户",value:"account",type:"value_text_object"};f.push(h);return f};this.getSelectFields=function(){if(b==undefined||b==null){d.initOutputFields()}return b};this.getOutputFieldLabel=function(f){var e=d.getSelectFields();if(e){return e[f].text}};this.parseValue=function(g,f){var e={};if(b[g].type=="value_text_object"){e.text="";e.value=f}else{e.text=f;e.value=f}return e};this.getOutputPinData=function(g,e){var f=[];$(e).each(function(h,j){if(g=="account"){var k={};k.text=j.users_screen_name?j.users_screen_name:"";k.value=j.id?j.id:"";f.push(k)}else{if(b[g]&&j[g]!=undefined){if(isArray(j[g])){$(j[g]).each(function(l,i){var m=d.parseValue(g,i);f.push(m)})}else{var k=d.parseValue(g,j[g]);f.push(k)}}}});if(g!="account"&&b[g].type=="value_text_object"){f=getFieldText(g,f)}return f};this.getFormatParams=function(){if(this.partFormConfig.getParams()){var e=this.partFormConfig.getParams();d.element.setFormConfigData(e)}else{return false}};this.getAllInputPin=function(){var e=new Array();for(var f in d.element.dataJson.filter){if(d.element.dataJson.filter[f].allowcontrol!=undefined&&parseInt(d.element.dataJson.filter[f].allowcontrol,10)==-1&&d.element.dataJson.filter[f].datatype!="range"&&d.element.dataJson.filter[f].datatype!="gaprange"){e.push({text:d.element.dataJson.filter[f].label,value:f,type:d.element.dataJson.filter[f].datatype})}}return e};this.getModelShowType=function(){return getShowType()};this.setModelShowType=function(i,f,e,h,g){if(g!=null){$("#modelshow_list").attr("scatterXY",JSON.stringify(g))}$(i).each(function(j,k){$("input[name=modelshow_showtype][value="+k+"]").attr("checked",true)})}};function FoltopRichListShow(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.configrange;this.rangestart;this.rangeend;this.rangegap;this.requestData;this.resizable=true;this.showid="userinfo";this.beforeRender=function(){c.part4.beforeRefresh()};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();createShowPartByName(config.controller+"user/parts/foltop_rich_list.js","FoltopRichListPart",c,function(e){c.part4=e;c.part4.render(d)})};this.requestCallBack=function(f){c.requestData=f;var e="";var d="";if(c.postDataJson.contrast!=null){if(c.part4!=undefined&&c.part4.pie3drandomid!=undefined&&c.part4.pie3drandomid=="pie3dpart"){f=formatPieDataCom(c.postDataJson,c.requestData)}e="label";d="value"}else{e="users_screen_name";d=getValueNameFromOrderby(c.postDataJson.output.orderby)}c.part4.refresh(f,e,d);refreshOnsitePosition()};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})}};function FoltopShow(a,b){var c=this;BaseShow.call(this);this.element=b;this.part1;this.part3;this.part4;this.requestData;this.resizable=false;this.beforeRender=function(){c.part4.beforeRefresh();if(c.postDataJson.contrast!=null){c.part_grouplist.beforeRefresh()}};this.setpart=function(e,d){c.aspectratio=-1;c.width=e;c.defaultSize=function(){$(c.targetID).css("width",c.width).attr("aspectratio",c.aspectratio);setShowHeigh(c);changeWidthHeigh()}};this.errorCallBack=function(d){if(c.part4!=undefined){c.part4.errorCallBack(d)}if(c.part_grouplist!=undefined){c.part_grouplist.errorCallBack("")}};this.part3show=function(d){c.part3.render(function(){if(c.postDataJson.contrast!=null){createShowPartByName(config.controller+"public/part_jspie3d.js","JSPartPie3D",c,function(e){c.part4=e;c.part4show(d)})}else{createShowPart(c.element.modelID,4,c,function(e){c.part4=e;c.part4show(d)})}})};this.part4show=function(d){c.part4.render(function(){if(c.postDataJson.contrast!=null){if(!c.part_grouplist){createShowPartByName(config.controller+"user/parts/foltop_part_grouplist.js","FoltopPartGroupList",c,function(e){c.part_grouplist=e;c.part_grouplist.render(d)})}else{c.part_grouplist.render(d)}}else{if(d!=undefined){d()}}})};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.contrast!=null){createShowPartByName(config.controller+"public/part_jspie3d.js","JSPartPie3D",c,function(e){c.part4=e;c.part4show(d)})}else{createShowPart(c.element.modelID,4,c,function(e){c.part4=e;c.part4show(d)})}};this.requestCallBack=function(e){if(e!=null){c.requestData=e;if(c.postDataJson.contrast!=null){var d=[];var f={};f.totalcount=e.length;f.categoryname="";f.datalist=[];$.each(e,function(h,g){var j={};j.label=g.categoryname;j.value=g.totalcount;f.datalist.push(j)});d.push(f);c.part4.refresh(d,"label","value");c.part_grouplist.refresh(e)}else{c.part4.refresh(e,"users_screen_name",getValueNameFromOrderby(c.postDataJson.output.orderby))}}else{if(c.postDataJson.output.outputtype==1){if(c.postDataJson.contrast!=null){c.part4.refresh(null,"label","value");c.part_grouplist.refresh(null)}else{c.part4.refresh(e,"users_screen_name",getValueNameFromOrderby(c.postDataJson.output.orderby))}}}};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack)};this.refreshdata=function(e){if(c.postDataJson.contrast!=null){var d=[];var f={};f.totalcount=e.length;f.categoryname="";f.datalist=[];$.each(e,function(h,g){var j={};j.label=g.categoryname;j.value=g.totalcount;f.datalist.push(j)});d.push(f);c.part4.refresh(d,"label","value");c.part_grouplist.refresh(e)}else{c.part4.refresh(e,"users_screen_name",getValueNameFromOrderby(c.postDataJson.output.orderby))}}};function FoltopSingleListShow(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.configrange;this.rangestart;this.rangeend;this.rangegap;this.requestData;this.showid="singlelist";this.beforeRender=function(){c.part4.beforeRefresh()};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.contrast!=null){createShowPartByName(config.controller+"user/parts/foltop_part_grouplist.js","FoltopPartGroupList",c,function(e){c.part4=e;c.part4.render(d)})}else{createShowPartByName(config.controller+"user/parts/foltop_part_list.js","FoltopListPart",c,function(e){c.part4=e;c.part4.render(d)})}};this.requestCallBack=function(f){c.requestData=f;var e="";var d="";if(c.postDataJson.contrast!=null){if(c.part4!=undefined&&c.part4.pie3drandomid!=undefined&&c.part4.pie3drandomid=="pie3dpart"){f=formatPieDataCom(c.postDataJson,c.requestData)}e="label";d="value"}else{e="users_screen_name";d=getValueNameFromOrderby(c.postDataJson.output.orderby)}c.part4.refresh(f,e,d);refreshOnsitePosition()};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})}};function FoltopUserFollowersShow(b,d){var f=this;BaseShow.call(this);this.element=d;this.part4;this.configrange;this.rangestart;this.rangeend;this.rangegap;this.requestData;this.postDataJson;this.maxDepth=5;this.extendCount=5;this.everyRequestDepth=1;this.maxEveryCount=50;this.scopeTypeLimit=["number"];this.extendStatusArr=[];var a=[];f.allowDownload=false;this.createOnsiteFilter=function(){f.setDockFields([])};this.createModelshowSwitch=function(){};this.onEdit=function(){if(f.part4.onEdit){f.part4.onEdit()}f.hideSnapshotElementPosition()};this.onCancelEdit=function(){if(f.part4!=undefined&&f.part4.onCancelEdit){f.part4.onCancelEdit()}f.setSnapshotElementPosition();if(f.shade){f.shadow()}};function c(){var h;while(h=a.shift()){var g=f.part4.appendData(h);if(!g){break}}f.getData()}this.beforeRender=function(){f.part4.beforeRefresh()};this.render=function(g){if($(f.targetID).attr("style")==undefined||$(f.targetID).attr("style")==""||$(f.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(f.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(f)}$(f.targetID).children(":not(h1)").remove();createShowPartByName(config.controller+"public/part_sigma.js","SigmaPart",f,function(h){f.part4=h;f.part4.render(g)})};function e(g){if(g.depth<=f.maxDepth||(g.depth-g.parent.depth)>=f.everyRequestDepth||g.depth==0){if(f.extendStatusArr[g.depth]!=undefined){if(typeof(g.requestlimit)=="undefined"&&typeof(g.requestcount)=="undefined"){g.requestlimit=0;g.requestcount=f.maxEveryCount}f.extendStatusArr[g.depth].nodes.push(g);f.extendStatusArr[g.depth].remain++;return true}else{return false}}else{return false}}this.getData=function(){for(var h=0;h<f.extendStatusArr.length;h++){if(f.extendStatusArr[h].remain>0&&f.extendStatusArr[h].nodes.length>0){while(1){var g=f.extendStatusArr[h].nodes.shift();if(g==undefined){break}if(g.requestlimit==0){a.push(g)}else{a.unshift(g)}$.ajax({url:config.followsData,data:{userid:g.userid,requestlimit:g.requestlimit,requestcount:g.requestcount,parentdepth:g.depth,depth:f.everyRequestDepth},type:"get",dataType:"json",success:function(n){f.extendStatusArr[h].remain--;if(f.extendStatusArr[h].remain==0){f.part4.setProcessBar(100*(h+1)/f.extendStatusArr.length)}if(n&&n.error==undefined){for(var l=0;l<a.length;l++){if(a[l].userid==n.userid){if(typeof(a[l].children)!="object"){$.extend(a[l],n)}else{a[l].children=a[l].children.concat(n.children)}if(parseInt(n.depth,10)==0){f.requestData[0].datalist[f.scope].showdata=a[l]}break}}}if(f.extendStatusArr[h].remain==0){c()}var i=0;for(var m=h;m<f.extendStatusArr.length;m++){i+=f.extendStatusArr[m].remain}if(i==0){f.part4.setProcessBar(100)}},error:function(){f.errorCallBack("数据请求异常!")}})}break}}};this.requestCallBack=function(h){f.requestData=h;var k=f.getShowData(h);if(k==null){f.errorCallBack("查询的数据不存在.")}else{f.extendStatusArr=[];var j={};j.keyProperty="userid";j.labelProperty="username";j.deciderProperty="fanscount";j.nearDeciderProperty="fanscount";j.activeProperty="bridgeuser";j.everyGetCount=f.maxEveryCount;j.looptankOnsite=true;j.addExtendNodesFun=e;j.tooltipFormatter=function(n){var m="无";if(n.attr.gender=="m"){m="   男"}else{if(n.attr.gender=="f"){m="   女"}}var l="";if(parseInt(n.attr.verified,10)==1){l="认证用户"}var o="";if(parseInt(n.attr.bridgeuser,10)==1){o='(<span style="color:#4be556;"><b>桥接用户</b></span>)'}var i="<span><b>"+n.attr.username+"</b></span>"+o+"<br/>";i+="性别："+m+" "+l+"<br/>";i+="粉丝数："+n.attr.fanscount+"<br/>";i+="关注数："+n.attr.fricount+"<br/>";i+="文章数："+n.attr.stacount+"";return i};j.decideExtendFun=function(l,i){var m=parseInt(l.fanscount,10);if(m==0){return false}return m>=parseInt(i.fanscount,10)/f.extendCount};for(var g=0;g<=f.maxDepth;g++){f.extendStatusArr.push({remain:0,nodes:[]})}a=[];if(typeof(k.showdata)!="object"){e({userid:k.users_id,depth:0});f.part4.init(j);f.part4.setProcessBar(0);f.getData()}else{f.part4.init(j);f.part4.appendWholeData(k.showdata)}}};this.renewRequest=function(){f.element.firstRequest(f.postDataJson,f.requestCallBack,true,function(g){f.part4.errorCallBack(g)})}};function ShowBoxplot(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.requestData;this.partTimeTab;this.name="chart";this.showid="bigchart";this.resizable=true;this.islabeltimeformat=false;this.rangestart;this.rangeend;this.rangegap;this.beforeRender=function(){c.part4.beforeRefresh()};this.partTimeTabShow=function(d){c.partTimeTab.render(function(){createShowPartByName(config.controller+"public/part_jsboxplot.js","JSBoxplot",c,function(e){c.part4=e;c.part4.render(d)})})};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.facet.range&&c.postDataJson.facet.range.length>0&&c.postDataJson.facet.range[0].name=="created_at"){createShowPartByName(config.controller+"public/part_timetab.js","TimeTab",c,function(e){c.partTimeTab=e;c.partTimeTabShow(d)})}else{createShowPartByName(config.controller+"public/part_jsboxplot.js","JSBoxplot",c,function(e){c.part4=e;c.part4.render(d)})}};this.onResize=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResize!=undefined){c.part4.onResize()}}};this.onResizing=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResizing!=undefined){c.part4.onResizing()}}};this.requestCallBack=function(f){c.requestData=f;var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}if(c.part4!=undefined&&c.part4.pie3drandomid!=undefined&&c.part4.pie3drandomid=="pie3dpart"){f=formatPieDataCom(c.postDataJson,c.requestData);e="label";d="value"}c.part4.refresh(f,e,d)};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.beforeRender=function(){c.part4.beforeRefresh()};this.refreshdata=function(f){var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}c.part4.refresh(f,e,d)}};function ShowChord(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.requestData;this.partTimeTab;this.name="chart";this.showid="bigchart";this.resizable=true;this.islabeltimeformat=false;this.rangestart;this.rangeend;this.rangegap;this.beforeRender=function(){c.part4.beforeRefresh()};this.partTimeTabShow=function(d){c.partTimeTab.render(function(){createShowPartByName(config.controller+"public/part_jschord.js","JSChord",c,function(e){c.part4=e;c.part4.render(d)})})};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.facet.range&&c.postDataJson.facet.range.length>0&&c.postDataJson.facet.range[0].name=="created_at"){createShowPartByName(config.controller+"public/part_timetab.js","TimeTab",c,function(e){c.partTimeTab=e;c.partTimeTabShow(d)})}else{createShowPartByName(config.controller+"public/part_jschord.js","JSChord",c,function(e){c.part4=e;c.part4.render(d)})}};this.onResize=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResize!=undefined){c.part4.onResize()}}};this.onResizing=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResizing!=undefined){c.part4.onResizing()}}};this.requestCallBack=function(f){c.requestData=f;var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}if(c.part4!=undefined&&c.part4.pie3drandomid!=undefined&&c.part4.pie3drandomid=="pie3dpart"){f=formatPieDataCom(c.postDataJson,c.requestData);e="label";d="value"}c.part4.refresh(f,e,d)};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.beforeRender=function(){c.part4.beforeRefresh()};this.refreshdata=function(f){var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}c.part4.refresh(f,e,d)}};function FoltopCircularPie(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.requestData;this.showid="bigchart";this.beforeRender=function(){c.part4.beforeRefresh()};this.configColumnInfo={screen_name:{filtername:"screen_name",formatter:function(d){return d.screen_name},link:function(e){var d="";if(e.userid!=undefined&&e.userid!=null){d=weiboUserurl(e.userid,e.sourceid)}return d},title:function(d){return d.description},isshow:true},verify:{filtername:"verify",formatter:function(d){return getVerifiedImg(d.verify,d.verified_type)},title:function(d){return d.verified_reason},isshow:true},verified_reason:{filtername:"verified_reason",formatter:function(){},isshow:true},verified_reason_highlight:{filtername:"verified_reason_highlight",formatter:null,isshow:true},description:{filtername:"description",formatter:function(){},isshow:true},description_highlight:{filtername:"description_highlight",formatter:null,isshow:true},source_hostname:{filtername:"source_hostname",formatter:null,isshow:true},column:{filtername:"column",formatter:null,isshow:true},column1:{filtername:"column1",formatter:null,isshow:true},post_title:{filtername:"post_title",formatter:null,isshow:true},productType:{filtername:"productType",formatter:null,isshow:true},impress:{filtername:"impress",formatter:null,isshow:true},proClassify:{filtername:"proClassify",formatter:null,isshow:true},promotionInfos:{filtername:"promotionInfos",formatter:null,isshow:true},productFullName:{filtername:"productFullName",formatter:null,isshow:true},productColor:{filtername:"productColor",formatter:null,isshow:true},productSize:{filtername:"productSize",formatter:null,isshow:true},productDesc:{filtername:"productDesc",formatter:null,isshow:true},productComb:{filtername:"productComb",formatter:null,isshow:true},detailParam:{filtername:"detailParam",formatter:null,isshow:true},compName:{filtername:"compName",formatter:null,isshow:true},compAddress:{filtername:"compAddress",formatter:null,isshow:true},phoneNum:{filtername:"phoneNum",formatter:null,isshow:true},compURL:{filtername:"compURL",formatter:null,isshow:true},serviceProm:{filtername:"serviceProm",formatter:null,isshow:true},logisticsInfo:{filtername:"logisticsInfo",formatter:null,isshow:true},payMethod:{filtername:"payMethod",formatter:null,isshow:true},apdComment:{filtername:"apdComment",formatter:null,isshow:true},serviceComment:{filtername:"serviceComment",formatter:null,isshow:true},commentTags:{filtername:"commentTags",formatter:null,isshow:true},floor:{filtername:"floor",formatter:null,isshow:true},read_count:{filtername:"read_count",formatter:function(d){if(d.read_count!=undefined){return d.read_count}else{return""}},isshow:true},paragraphid:{filtername:"paragraphid",formatter:function(d){if(d.paragraphid!=undefined){return d.paragraphid}else{return""}},isshow:true},recommended:{filtername:"recommended",formatter:null,isshow:true},text:{filtername:"text",formatter:function(e){var g="";if(e.text==undefined){return g}if(c.postDataJson.facet.field.length>0){var d=c.postDataJson.facet.field[0].name;var f=getFilterValue(d,c.postDataJson.filtervalue);if((d=="account"||d=="url"||d=="topic"||d=="combinWord")&&!c.postDataJson.facet.field[0].isfeature){g=c.highlight(e.text[0],d,f[0].fieldvalue.value)}else{if(d=="country"||d=="country_code"||d=="province"||d=="province_code"||d=="city"||d=="city_code"||d=="district"||d=="district_code"){if(f.length==0){if(d=="city"||d=="district"){f=getFilterValue("province",c.postDataJson.filtervalue)}else{if(d=="city_code"||d=="district_code"){f=getFilterValue("province_code",c.postDataJson.filtervalue)}}}if(f[0]!=undefined){g=c.highlight(e.text[0],d,f[0].fieldvalue.value.text)}else{g=e.text[0]}}else{g=e.text[0]}}}else{g=e.text[0]}return g},link:function(d){if(d.page_url!=undefined){var e=d.page_url;return e}else{if(d.mid!=undefined&&d.mid!=null&&d.mid!="null"&&d.content_type!=2){return weiboMid2url(d.mid,d.userid,d.sourceid)}else{return""}}},isshow:true},thumbnail_pic:{filtername:"thumbnail_pic",formatter:null,isshow:true},bmiddle_pic:{filtername:"bmiddle_pic",formatter:null,isshow:true},created_at:{filtername:"created_at",formatter:function(d){if(d.created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.created_at)}else{return false}},isshow:true},source:{filtername:"source",formatter:function(d){if(d.source!=undefined&&d.source!=null&&d.source!=""){return d.source}else{return false}},isshow:true},reposts_count:{filtername:"reposts_count",formatter:function(d){if(d.reposts_count!=undefined&&d.reposts_count!=null){return d.reposts_count}else{return""}},isshow:true},comments_count:{filtername:"comments_count",formatter:function(d){if(d.comments_count!=undefined&&d.comments_count!=null){return d.comments_count}else{return""}},isshow:true},direct_comments_count:{filtername:"direct_comments_count",formatter:function(d){if(d.direct_comments_count!=undefined&&d.direct_comments_count!=null){return d.direct_comments_count}else{return""}},isshow:true},praises_count:{filtername:"praises_count",formatter:function(d){if(d.praises_count!=undefined&&d.praises_count!=null){return d.praises_count}else{return""}},isshow:true},followers_count:{filtername:"followers_count",formatter:function(d){if(d.followers_count!=undefined&&d.followers_count!=null){return d.followers_count}else{return""}},isshow:true},content_type:{filtername:"content_type",formatter:function(d){if(d.content_type!=undefined){return d.content_type}else{return false}},isshow:true},retweeted_screen_name:{filtername:"retweeted_screen_name",formatter:function(d){if(d.retweeted_screen_name!=undefined){return d.retweeted_screen_name}else{return""}},link:function(d){if(d.retweeted_userid!=undefined&&d.retweeted_userid!=null){return weiboUserurl(d.retweeted_userid,d.sourceid)}else{return""}},title:function(d){return d.retweeted_description},isshow:true},retweeted_verify:{filtername:"retweeted_verify",formatter:function(d){return getVerifiedImg(d.retweeted_verify,d.retweeted_verified_type)},title:function(d){if(d.retweeted_verified_reason!=undefined&&d.retweeted_verified_reason!=""&&d.retweeted_verified_reason!=null){return d.retweeted_verified_reason}else{return false}},isshow:true},retweeted_verified_reason:{filtername:"retweeted_verified_reason",formatter:function(d){},isshow:true},retweeted_text:{filtername:"retweeted_text",formatter:function(d){if(d.retweeted_text!=undefined){return d.retweeted_text[0]}},link:function(d){if(d.retweeted_page_url!=undefined){var e=d.retweeted_page_url;return e}else{if(d.retweeted_mid!=undefined&&d.retweeted_mid!=null&&d.retweeted_mid!="null"){return weiboMid2url(d.retweeted_mid,d.retweeted_userid,d.sourceid)}else{return""}}},isshow:true},retweeted_created_at:{filtername:"retweeted_created_at",formatter:function(d){if(d.retweeted_created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.retweeted_created_at)}else{return false}},isshow:true},retweeted_source:{filtername:"retweeted_source",formatter:function(d){if(d.retweeted_source!=undefined){return d.retweeted_source}else{return false}},isshow:true},retweeted_reposts_count:{filtername:"retweeted_reposts_count",formatter:function(d){if(d.retweeted_reposts_count){return d.retweeted_reposts_count}else{return""}},isshow:true},retweeted_comments_count:{filtername:"retweeted_comments_count",formatter:function(d){if(d.retweeted_comments_count!=undefined){return d.retweeted_comments_count}else{return""}},isshow:true},retweeted_direct_comments_count:{filtername:"retweeted_direct_comments_count",formatter:function(d){if(d.retweeted_direct_comments_count!=undefined){return d.retweeted_direct_comments_count}else{return""}},isshow:true},retweeted_praises_count:{filtername:"retweeted_praises_count",formatter:function(d){if(d.retweeted_praises_count!=undefined){return d.retweeted_praises_count}else{return""}},isshow:true},retweeted_followers_count:{filtername:"retweeted_followers_count",formatter:function(d){if(d.retweeted_followers_count!=undefined){return d.retweeted_followers_count}else{return""}},isshow:true},retweeted_read_count:{filtername:"retweeted_read_count",formatter:function(d){if(d.retweeted_read_count!=undefined){return d.retweeted_read_count}else{return""}},isshow:true},retweeted_thumbnail_pic:{filtername:"retweeted_thumbnail_pic",formatter:null,isshow:true},retweeted_bmiddle_pic:{filtername:"retweeted_bmiddle_pic",formatter:null,isshow:true},quote_screen_name:{filtername:"quote_screen_name",formatter:function(d){if(d.quote_screen_name!=undefined){return d.quote_screen_name}else{return""}},link:function(d){if(d.quote_userid!=undefined&&d.quote_userid!=null){return weiboUserurl(d.quote_userid,d.sourceid)}else{return""}},title:function(d){return d.quote_description},isshow:true},quote_verify:{filtername:"quote_verify",formatter:function(d){return getVerifiedImg(d.quote_verify,d.quote_verified_type)},title:function(d){if(d.quote_verified_reason!=undefined&&d.quote_verified_reason!=""&&d.quote_verified_reason!=null){return d.quote_verified_reason}else{return false}},isshow:true},quote_verified_reason:{filtername:"quote_verified_reason",formatter:function(d){},isshow:true},quote_text:{filtername:"quote_text",formatter:function(d){if(d.quote_text!=undefined){return d.quote_text[0]}},link:function(d){if(d.quote_page_url!=undefined){var e=d.quote_page_url;return e}else{if(d.quote_mid!=undefined&&d.quote_mid!=null&&d.quote_mid!="null"){return weiboMid2url(d.quote_mid,d.quote_userid,d.sourceid)}else{return""}}},isshow:true},quote_created_at:{filtername:"quote_created_at",formatter:function(d){if(d.quote_created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.quote_created_at)}else{return false}},isshow:true},quote_source:{filtername:"quote_source",formatter:function(d){if(d.quote_source!=undefined){return d.quote_source}else{return false}},isshow:true},quote_reposts_count:{filtername:"quote_reposts_count",formatter:function(d){if(d.quote_reposts_count){return d.quote_reposts_count}else{return""}},isshow:true},quote_comments_count:{filtername:"quote_comments_count",formatter:function(d){if(d.quote_comments_count!=undefined){return d.quote_comments_count}else{return""}},isshow:true},quote_direct_comments_count:{filtername:"quote_direct_comments_count",formatter:function(d){if(d.quote_direct_comments_count!=undefined){return d.quote_direct_comments_count}else{return""}},isshow:true},quote_praises_count:{filtername:"quote_praises_count",formatter:function(d){if(d.quote_praises_count!=undefined){return d.quote_praises_count}else{return""}},isshow:true},quote_followers_count:{filtername:"quote_followers_count",formatter:function(d){if(d.quote_followers_count!=undefined){return d.quote_followers_count}else{return""}},isshow:true},quote_read_count:{filtername:"quote_read_count",formatter:function(d){if(d.quote_read_count!=undefined){return d.quote_read_count}else{return""}},isshow:true},quote_thumbnail_pic:{filtername:"quote_thumbnail_pic",formatter:null,isshow:true},quote_bmiddle_pic:{filtername:"quote_bmiddle_pic",formatter:null,isshow:true},quote_floor:{filtername:"quote_floor",formatter:null,isshow:true},quote_page_url:{filtername:"quote_page_url",formatter:null,isshow:true},series:[{radius:["50%","70%"],itemStyle:{normal:{show:false},labelLine:{show:false}},emphasis:{label:{show:true,osition:"center",textStyle:{fontSize:"30",fontWeight:"bold"}}}}]};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();createShowPartByName(config.controller+"public/part_jscircularpie3d.js","JSCircularPartPie3D",c,function(e){c.part4=e;c.part4.render(d)})};this.onResize=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResize!=undefined){c.part4.onResize()}}};this.onResizing=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResizing!=undefined){c.part4.onResizing()}}};this.formatPieData=function(d){if(d!=null){c.requestData=d;return formatPieDataCom(c.postDataJson,d)}};this.requestCallBack=function(e){var d=c.formatPieData(e);c.part4.refresh(d,"label","value")};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.refreshdata=function(e){var d=c.formatPieData(e);c.part4.refresh(d,"label","value")}};function DescriptionShow(a,b){var c=this;RootShow.call(this);this.aspectratio=-1;this.setID=function(e,d){c.id=e;c.targetID=d};this.render=function(d){};this.onResize=function(){var d=$(c.targetID).data("showobj");if(d!=undefined&&d!=null){modifyShowHeight(d)}}};function ShowFunnel(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.requestData;this.partTimeTab;this.name="chart";this.showid="bigchart";this.resizable=true;this.islabeltimeformat=false;this.rangestart;this.rangeend;this.rangegap;this.beforeRender=function(){c.part4.beforeRefresh()};this.partTimeTabShow=function(d){c.partTimeTab.render(function(){createShowPartByName(config.controller+"public/part_jsfunnel.js","JSFunnel",c,function(e){c.part4=e;c.part4.render(d)})})};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.facet.range&&c.postDataJson.facet.range.length>0&&c.postDataJson.facet.range[0].name=="created_at"){createShowPartByName(config.controller+"public/part_timetab.js","TimeTab",c,function(e){c.partTimeTab=e;c.partTimeTabShow(d)})}else{createShowPartByName(config.controller+"public/part_jsfunnel.js","JSFunnel",c,function(e){c.part4=e;c.part4.render(d)})}};this.onResize=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResize!=undefined){c.part4.onResize()}}};this.onResizing=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResizing!=undefined){c.part4.onResizing()}}};this.requestCallBack=function(f){c.requestData=f;var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}if(c.part4!=undefined&&c.part4.pie3drandomid!=undefined&&c.part4.pie3drandomid=="pie3dpart"){f=formatPieDataCom(c.postDataJson,c.requestData);e="label";d="value"}c.part4.refresh(f,e,d)};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.beforeRender=function(){c.part4.beforeRefresh()};this.refreshdata=function(f){var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}c.part4.refresh(f,e,d)}};function ShowGauge(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.requestData;this.partTimeTab;this.name="chart";this.showid="bigchart";this.resizable=true;this.islabeltimeformat=false;this.rangestart;this.rangeend;this.rangegap;this.beforeRender=function(){c.part4.beforeRefresh()};this.partTimeTabShow=function(d){c.partTimeTab.render(function(){createShowPartByName(config.controller+"public/part_jsgauge.js","JSGauge",c,function(e){c.part4=e;c.part4.render(d)})})};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.facet.range&&c.postDataJson.facet.range.length>0&&c.postDataJson.facet.range[0].name=="created_at"){createShowPartByName(config.controller+"public/part_timetab.js","TimeTab",c,function(e){c.partTimeTab=e;c.partTimeTabShow(d)})}else{createShowPartByName(config.controller+"public/part_jsgauge.js","JSGauge",c,function(e){c.part4=e;c.part4.render(d)})}};this.onResize=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResize!=undefined){c.part4.onResize()}}};this.onResizing=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResizing!=undefined){c.part4.onResizing()}}};this.requestCallBack=function(f){c.requestData=f;var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}if(c.part4!=undefined&&c.part4.pie3drandomid!=undefined&&c.part4.pie3drandomid=="pie3dpart"){f=formatPieDataCom(c.postDataJson,c.requestData);e="label";d="value"}if(c.element.modelID==1){e="users_screen_name"}c.part4.refresh(f,e,d)};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.beforeRender=function(){c.part4.beforeRefresh()};this.refreshdata=function(f){var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}c.part4.refresh(f,e,d)}};function GroupShow(a,b){var c=this;RootShow.call(this);this.setID=function(e,d){c.id=e;c.targetID=d};this.render=function(d){}};function FoltopPie(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.requestData;this.showid="bigchart";this.beforeRender=function(){c.part4.beforeRefresh()};this.configColumnInfo={screen_name:{filtername:"screen_name",formatter:function(d){return d.screen_name},link:function(e){var d="";if(e.userid!=undefined&&e.userid!=null){d=weiboUserurl(e.userid,e.sourceid)}return d},title:function(d){return d.description},isshow:true},verify:{filtername:"verify",formatter:function(d){return getVerifiedImg(d.verify,d.verified_type)},title:function(d){return d.verified_reason},isshow:true},verified_reason:{filtername:"verified_reason",formatter:function(){},isshow:true},verified_reason_highlight:{filtername:"verified_reason_highlight",formatter:null,isshow:true},description:{filtername:"description",formatter:function(){},isshow:true},description_highlight:{filtername:"description_highlight",formatter:null,isshow:true},source_hostname:{filtername:"source_hostname",formatter:null,isshow:true},column:{filtername:"column",formatter:null,isshow:true},column1:{filtername:"column1",formatter:null,isshow:true},post_title:{filtername:"post_title",formatter:null,isshow:true},productType:{filtername:"productType",formatter:null,isshow:true},impress:{filtername:"impress",formatter:null,isshow:true},proClassify:{filtername:"proClassify",formatter:null,isshow:true},promotionInfos:{filtername:"promotionInfos",formatter:null,isshow:true},productFullName:{filtername:"productFullName",formatter:null,isshow:true},productColor:{filtername:"productColor",formatter:null,isshow:true},productSize:{filtername:"productSize",formatter:null,isshow:true},productDesc:{filtername:"productDesc",formatter:null,isshow:true},productComb:{filtername:"productComb",formatter:null,isshow:true},detailParam:{filtername:"detailParam",formatter:null,isshow:true},compName:{filtername:"compName",formatter:null,isshow:true},compAddress:{filtername:"compAddress",formatter:null,isshow:true},phoneNum:{filtername:"phoneNum",formatter:null,isshow:true},compURL:{filtername:"compURL",formatter:null,isshow:true},serviceProm:{filtername:"serviceProm",formatter:null,isshow:true},logisticsInfo:{filtername:"logisticsInfo",formatter:null,isshow:true},payMethod:{filtername:"payMethod",formatter:null,isshow:true},apdComment:{filtername:"apdComment",formatter:null,isshow:true},serviceComment:{filtername:"serviceComment",formatter:null,isshow:true},commentTags:{filtername:"commentTags",formatter:null,isshow:true},floor:{filtername:"floor",formatter:null,isshow:true},read_count:{filtername:"read_count",formatter:function(d){if(d.read_count!=undefined){return d.read_count}else{return""}},isshow:true},paragraphid:{filtername:"paragraphid",formatter:function(d){if(d.paragraphid!=undefined){return d.paragraphid}else{return""}},isshow:true},recommended:{filtername:"recommended",formatter:null,isshow:true},text:{filtername:"text",formatter:function(e){var g="";if(e.text==undefined){return g}if(c.postDataJson.facet.field.length>0){var d=c.postDataJson.facet.field[0].name;var f=getFilterValue(d,c.postDataJson.filtervalue);if((d=="account"||d=="url"||d=="topic"||d=="combinWord")&&!c.postDataJson.facet.field[0].isfeature){g=c.highlight(e.text[0],d,f[0].fieldvalue.value)}else{if(d=="country"||d=="country_code"||d=="province"||d=="province_code"||d=="city"||d=="city_code"||d=="district"||d=="district_code"){if(f.length==0){if(d=="city"||d=="district"){f=getFilterValue("province",c.postDataJson.filtervalue)}else{if(d=="city_code"||d=="district_code"){f=getFilterValue("province_code",c.postDataJson.filtervalue)}}}if(f[0]!=undefined){g=c.highlight(e.text[0],d,f[0].fieldvalue.value.text)}else{g=e.text[0]}}else{g=e.text[0]}}}else{g=e.text[0]}return g},link:function(d){if(d.page_url!=undefined){var e=d.page_url;return e}else{if(d.mid!=undefined&&d.mid!=null&&d.mid!="null"&&d.content_type!=2){return weiboMid2url(d.mid,d.userid,d.sourceid)}else{return""}}},isshow:true},thumbnail_pic:{filtername:"thumbnail_pic",formatter:null,isshow:true},bmiddle_pic:{filtername:"bmiddle_pic",formatter:null,isshow:true},created_at:{filtername:"created_at",formatter:function(d){if(d.created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.created_at)}else{return false}},isshow:true},source:{filtername:"source",formatter:function(d){if(d.source!=undefined&&d.source!=null&&d.source!=""){return d.source}else{return false}},isshow:true},reposts_count:{filtername:"reposts_count",formatter:function(d){if(d.reposts_count!=undefined&&d.reposts_count!=null){return d.reposts_count}else{return""}},isshow:true},comments_count:{filtername:"comments_count",formatter:function(d){if(d.comments_count!=undefined&&d.comments_count!=null){return d.comments_count}else{return""}},isshow:true},direct_comments_count:{filtername:"direct_comments_count",formatter:function(d){if(d.direct_comments_count!=undefined&&d.direct_comments_count!=null){return d.direct_comments_count}else{return""}},isshow:true},praises_count:{filtername:"praises_count",formatter:function(d){if(d.praises_count!=undefined&&d.praises_count!=null){return d.praises_count}else{return""}},isshow:true},followers_count:{filtername:"followers_count",formatter:function(d){if(d.followers_count!=undefined&&d.followers_count!=null){return d.followers_count}else{return""}},isshow:true},content_type:{filtername:"content_type",formatter:function(d){if(d.content_type!=undefined){return d.content_type}else{return false}},isshow:true},retweeted_screen_name:{filtername:"retweeted_screen_name",formatter:function(d){if(d.retweeted_screen_name!=undefined){return d.retweeted_screen_name}else{return""}},link:function(d){if(d.retweeted_userid!=undefined&&d.retweeted_userid!=null){return weiboUserurl(d.retweeted_userid,d.sourceid)}else{return""}},title:function(d){return d.retweeted_description},isshow:true},retweeted_verify:{filtername:"retweeted_verify",formatter:function(d){return getVerifiedImg(d.retweeted_verify,d.retweeted_verified_type)},title:function(d){if(d.retweeted_verified_reason!=undefined&&d.retweeted_verified_reason!=""&&d.retweeted_verified_reason!=null){return d.retweeted_verified_reason}else{return false}},isshow:true},retweeted_verified_reason:{filtername:"retweeted_verified_reason",formatter:function(d){},isshow:true},retweeted_text:{filtername:"retweeted_text",formatter:function(d){if(d.retweeted_text!=undefined){return d.retweeted_text[0]}},link:function(d){if(d.retweeted_page_url!=undefined){var e=d.retweeted_page_url;return e}else{if(d.retweeted_mid!=undefined&&d.retweeted_mid!=null&&d.retweeted_mid!="null"){return weiboMid2url(d.retweeted_mid,d.retweeted_userid,d.sourceid)}else{return""}}},isshow:true},retweeted_created_at:{filtername:"retweeted_created_at",formatter:function(d){if(d.retweeted_created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.retweeted_created_at)}else{return false}},isshow:true},retweeted_source:{filtername:"retweeted_source",formatter:function(d){if(d.retweeted_source!=undefined){return d.retweeted_source}else{return false}},isshow:true},retweeted_reposts_count:{filtername:"retweeted_reposts_count",formatter:function(d){if(d.retweeted_reposts_count){return d.retweeted_reposts_count}else{return""}},isshow:true},retweeted_comments_count:{filtername:"retweeted_comments_count",formatter:function(d){if(d.retweeted_comments_count!=undefined){return d.retweeted_comments_count}else{return""}},isshow:true},retweeted_direct_comments_count:{filtername:"retweeted_direct_comments_count",formatter:function(d){if(d.retweeted_direct_comments_count!=undefined){return d.retweeted_direct_comments_count}else{return""}},isshow:true},retweeted_praises_count:{filtername:"retweeted_praises_count",formatter:function(d){if(d.retweeted_praises_count!=undefined){return d.retweeted_praises_count}else{return""}},isshow:true},retweeted_followers_count:{filtername:"retweeted_followers_count",formatter:function(d){if(d.retweeted_followers_count!=undefined){return d.retweeted_followers_count}else{return""}},isshow:true},retweeted_read_count:{filtername:"retweeted_read_count",formatter:function(d){if(d.retweeted_read_count!=undefined){return d.retweeted_read_count}else{return""}},isshow:true},retweeted_thumbnail_pic:{filtername:"retweeted_thumbnail_pic",formatter:null,isshow:true},retweeted_bmiddle_pic:{filtername:"retweeted_bmiddle_pic",formatter:null,isshow:true},quote_screen_name:{filtername:"quote_screen_name",formatter:function(d){if(d.quote_screen_name!=undefined){return d.quote_screen_name}else{return""}},link:function(d){if(d.quote_userid!=undefined&&d.quote_userid!=null){return weiboUserurl(d.quote_userid,d.sourceid)}else{return""}},title:function(d){return d.quote_description},isshow:true},quote_verify:{filtername:"quote_verify",formatter:function(d){return getVerifiedImg(d.quote_verify,d.quote_verified_type)},title:function(d){if(d.quote_verified_reason!=undefined&&d.quote_verified_reason!=""&&d.quote_verified_reason!=null){return d.quote_verified_reason}else{return false}},isshow:true},quote_verified_reason:{filtername:"quote_verified_reason",formatter:function(d){},isshow:true},quote_text:{filtername:"quote_text",formatter:function(d){if(d.quote_text!=undefined){return d.quote_text[0]}},link:function(d){if(d.quote_page_url!=undefined){var e=d.quote_page_url;return e}else{if(d.quote_mid!=undefined&&d.quote_mid!=null&&d.quote_mid!="null"){return weiboMid2url(d.quote_mid,d.quote_userid,d.sourceid)}else{return""}}},isshow:true},quote_created_at:{filtername:"quote_created_at",formatter:function(d){if(d.quote_created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.quote_created_at)}else{return false}},isshow:true},quote_source:{filtername:"quote_source",formatter:function(d){if(d.quote_source!=undefined){return d.quote_source}else{return false}},isshow:true},quote_reposts_count:{filtername:"quote_reposts_count",formatter:function(d){if(d.quote_reposts_count){return d.quote_reposts_count}else{return""}},isshow:true},quote_comments_count:{filtername:"quote_comments_count",formatter:function(d){if(d.quote_comments_count!=undefined){return d.quote_comments_count}else{return""}},isshow:true},quote_direct_comments_count:{filtername:"quote_direct_comments_count",formatter:function(d){if(d.quote_direct_comments_count!=undefined){return d.quote_direct_comments_count}else{return""}},isshow:true},quote_praises_count:{filtername:"quote_praises_count",formatter:function(d){if(d.quote_praises_count!=undefined){return d.quote_praises_count}else{return""}},isshow:true},quote_followers_count:{filtername:"quote_followers_count",formatter:function(d){if(d.quote_followers_count!=undefined){return d.quote_followers_count}else{return""}},isshow:true},quote_read_count:{filtername:"quote_read_count",formatter:function(d){if(d.quote_read_count!=undefined){return d.quote_read_count}else{return""}},isshow:true},quote_thumbnail_pic:{filtername:"quote_thumbnail_pic",formatter:null,isshow:true},quote_bmiddle_pic:{filtername:"quote_bmiddle_pic",formatter:null,isshow:true},quote_floor:{filtername:"quote_floor",formatter:null,isshow:true},quote_page_url:{filtername:"quote_page_url",formatter:null,isshow:true}};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();createShowPartByName(config.controller+"public/part_jspie3d.js","JSPartPie3D",c,function(e){c.part4=e;c.part4.render(d)})};this.onResize=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResize!=undefined){c.part4.onResize()}}};this.onResizing=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResizing!=undefined){c.part4.onResizing()}}};this.formatPieData=function(d){if(d!=null){c.requestData=d;return formatPieDataCom(c.postDataJson,d)}};this.requestCallBack=function(e){var d=c.formatPieData(e);c.part4.refresh(d,"label","value")};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.refreshdata=function(e){var d=c.formatPieData(e);c.part4.refresh(d,"label","value")}};function ShowRadar(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.requestData;this.partTimeTab;this.name="chart";this.showid="bigchart";this.resizable=true;this.islabeltimeformat=false;this.rangestart;this.rangeend;this.rangegap;this.beforeRender=function(){c.part4.beforeRefresh()};this.partTimeTabShow=function(d){c.partTimeTab.render(function(){createShowPartByName(config.controller+"public/part_jsradar.js","JSRadar",c,function(e){c.part4=e;c.part4.render(d)})})};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.facet.range&&c.postDataJson.facet.range.length>0&&c.postDataJson.facet.range[0].name=="created_at"){createShowPartByName(config.controller+"public/part_timetab.js","TimeTab",c,function(e){c.partTimeTab=e;c.partTimeTabShow(d)})}else{createShowPartByName(config.controller+"public/part_jsradar.js","JSRadar",c,function(e){c.part4=e;c.part4.render(d)})}};this.onResize=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResize!=undefined){c.part4.onResize()}}};this.onResizing=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResizing!=undefined){c.part4.onResizing()}}};this.requestCallBack=function(f){c.requestData=f;var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}if(c.part4!=undefined&&c.part4.pie3drandomid!=undefined&&c.part4.pie3drandomid=="pie3dpart"){f=formatPieDataCom(c.postDataJson,c.requestData);e="label";d="value"}c.part4.refresh(f,e,d)};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.beforeRender=function(){c.part4.beforeRefresh()};this.refreshdata=function(f){var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}c.part4.refresh(f,e,d)}};function ShowScatter(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.requestData;this.partTimeTab;this.name="chart";this.showid="bigchart";this.resizable=true;this.islabeltimeformat=false;this.rangestart;this.rangeend;this.rangegap;this.beforeRender=function(){c.part4.beforeRefresh()};this.partTimeTabShow=function(d){c.partTimeTab.render(function(){createShowPartByName(config.controller+"public/part_jsscatter.js","JSScatter",c,function(e){c.part4=e;c.part4.render(d)})})};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.facet.range&&c.postDataJson.facet.range.length>0&&c.postDataJson.facet.range[0].name=="created_at"){createShowPartByName(config.controller+"public/part_timetab.js","TimeTab",c,function(e){c.partTimeTab=e;c.partTimeTabShow(d)})}else{createShowPartByName(config.controller+"public/part_jsscatter.js","JSScatter",c,function(e){c.part4=e;c.part4.render(d)})}};this.onResize=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResize!=undefined){c.part4.onResize()}}};this.onResizing=function(){if(c.part4!=undefined&&c.part4!=null){if(c.part4.onResizing!=undefined){c.part4.onResizing()}}};this.requestCallBack=function(f){c.requestData=f;var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}if(c.part4!=undefined&&c.part4.pie3drandomid!=undefined&&c.part4.pie3drandomid=="pie3dpart"){f=formatPieDataCom(c.postDataJson,c.requestData);e="label";d="value"}if(c.element.modelID==1){e="users_screen_name"}c.part4.refresh(f,e,d)};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.beforeRender=function(){c.part4.beforeRefresh()};this.refreshdata=function(f){var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}c.part4.refresh(f,e,d)}};function TopicChart(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.requestData;this.partTimeTab;this.name="chart";this.showid="bigchart";this.resizable=true;this.islabeltimeformat=false;this.rangestart;this.rangeend;this.rangegap;this.beforeRender=function(){c.part4.beforeRefresh()};this.partTimeTabShow=function(d){c.partTimeTab.render(function(){createShowPartByName(config.controller+"public/part_jsmsline.js","JSMsLine4",c,function(e){c.part4=e;c.part4show(d)})})};this.part4show=function(g){if(c.postDataJson.facet.range.length>0){var f=getRangeValue(c.postDataJson.facet);c.rangestart=f.start;c.rangeend=f.end;c.rangegap=f.gap;var e="areaspline";if(c.element.linetype){e=c.element.linetype}c.part4.setFlash(e,c.showid);c.part4.render(g)}else{if(c.postDataJson.facet.field.length>0&&(c.postDataJson.facet.field[0].name=="combinWord"||c.postDataJson.facet.field[0].name=="topic")){c.part4.setFlash("topic",c.showid)}else{var d=getShowid(c.showid);if(d=="spline"){if(c.element.linetype){d=c.element.linetype}}c.part4.setFlash(d==""?"keyword":d,c.showid)}c.part4.render(g)}};this.render=function(d){$(c.targetID).children(":not(h1)").remove();if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}if(c.postDataJson.facet.range.length>0){if(c.element.instanceType==3){createShowPartByName(config.controller+"public/part_jscolumn3d.js","JSFoltopPart4",c,function(f){c.part4=f;var e="";if(c.charttype!=undefined){e=c.charttype}else{e="column"}c.part4.setFlash(e,c.showid);c.part4.render(d)})}else{if(c.postDataJson.facet.range[0].name=="created_at"){createShowPartByName(config.controller+"public/part_timetab.js","TimeTab",c,function(e){c.partTimeTab=e;c.partTimeTabShow(d)})}else{createShowPartByName(config.controller+"public/part_jsmsline.js","JSMsLine4",c,function(e){c.part4=e;c.part4show(d)})}}}else{if(c.showid.indexOf("msline")>-1){createShowPartByName(config.controller+"public/part_jsmsline.js","JSMsLine4",c,function(e){c.part4=e;c.part4show(d)})}else{createShowPartByName(config.controller+"public/part_jscloud.js","TopicPart4",c,function(e){c.part4=e;c.part4show(d)})}}};this.requestCallBack=function(f){c.requestData=f;var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}if(c.part4!=undefined&&c.part4.pie3drandomid!=undefined&&c.part4.pie3drandomid=="pie3dpart"){f=formatPieDataCom(c.postDataJson,c.requestData);e="label";d="value"}c.part4.refresh(f,e,d)};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.beforeRender=function(){c.part4.beforeRefresh()};this.refreshdata=function(f){var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}c.part4.refresh(f,e,d)}};function TopicColumn3D(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.part_grouplist;this.requestData;this.showid="bigmulticolumn3d";this.islabeltimeformat=false;this.beforeRender=function(){c.part4.beforeRefresh()};this.render=function(f){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();var d,e;if(c.postDataJson!=undefined&&c.postDataJson.contrast!=null){d=config.controller+"public/part_jspie3d.js";e="JSPartPie3D"}else{d=config.controller+"public/part_jscolumn3d.js";e="JSFoltopPart4"}createShowPartByName(d,e,c,function(h){c.part4=h;if(c.postDataJson.contrast==null){var g="";if(c.charttype!=undefined){g=c.charttype}else{g="column"}c.part4.setFlash(g,c.showid)}c.part4.render(f)})};this.requestCallBack=function(f){c.requestData=deepClone(f);var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}if(c.part4!=undefined&&c.part4.pie3drandomid!=undefined&&c.part4.pie3drandomid=="pie3dpart"){f=formatPieDataCom(c.postDataJson,c.requestData);e="label";d="value"}c.part4.refresh(f,e,d)};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.refreshdata=function(g){if(c.postDataJson.contrast!=null){var f=[];var h={};h.totalcount=g.length;h.categoryname="";h.datalist=[];$.each(g,function(k,j){var l={};l.label=j.categoryname;l.value=j.totalcount;h.datalist.push(l)});f.push(h);c.part4.refresh(f,"label","value")}else{var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}c.part4.refresh(g,e,d)}}};function TopicConfig(a,b){var c=this;this.targetID=a;this.element=b;this.partFormConfig;this.partAuthConfig;this.partAnalysis;this.partOutput;this.partSaveFormBtn;this.partOutputPin;this.partInputPin;this.linkageSearch;this.listpart;this.partAddElement;this.partChartmodel;this.partDataconfig;this.partEditWidgetButton;this.renderEditForm=function(e){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.partDistinct=createConfigPart(this.element.modelID,"distinct",this);this.partDistinct.render();this.partOutput=createConfigPart(this.element.modelID,"output",this);this.partOutput.render();var d=this.partDistinct.getDistinctFacetField();this.onDistinctChange(d);this.partDataconfig=createConfigPart(this.element.modelID,"dataconfig",this);this.partDataconfig.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render(e==true);if(e&&c.element.instanceType!=3){this.partEditWidgetButton=createConfigPart(this.element.modelID,"editwidgetbutton",this);this.partEditWidgetButton.isLinkage=false;this.partEditWidgetButton.render()}};this.renderEditAuth=function(){$(this.targetID).empty();this.partAuthConfig=createConfigPart(this.element.modelID,"authconfig",this);this.partAuthConfig.render()};this.renderForm=function(){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.partOutput=createConfigPart(this.element.modelID,"output",this);this.partOutput.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render();this.partAnalysis=createConfigPart(this.element.modelID,"analysis",this);this.partAnalysis.render()};this.outputChange=function(d){if(d!=undefined&&d!=""){this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.changeShowType(d)}};this.renderLinkage=function(e){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.partDistinct=createConfigPart(this.element.modelID,"distinct",this);this.partDistinct.render();this.partOutput=createConfigPart(this.element.modelID,"output",this);this.partOutput.render();var d=["has_pictrue","reposts_count","comments_count","direct_comments_count","praises_count","register_time","created_at","followers_count","total_reposts_count","direct_reposts_count","total_reach_count"];this.linkageSearch=createConfigPart(this.element.modelID,"linkagesearch",this);this.linkageSearch.render();this.listpart=createConfigPart(this.element.modelID,"listpart",this);this.listpart.setHead(["统计结果","文章数","转发数","评论数","讨论数"],true);this.listpart.setField(["alias","frq","reposts_count","comments_count","discuss_count"]);this.listpart.render(this.linkageSearch.contentTargetID);this.partOutputPin=createConfigPart(this.element.modelID,"outputpin",this);this.partOutputPin.render();this.partInputPin=createConfigPart(this.element.modelID,"inputpin",this);this.partInputPin.render();this.partDataconfig=createConfigPart(this.element.modelID,"dataconfig",this);this.partDataconfig.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render(e==true)};this.getOutputFields=function(){var d=[];var e=c.element.dataJson;if(e.facet.field!=undefined&&e.facet.field.length>0&&e.facet.field[0].facetcalculate!=undefined&&e.facet.field[0].facetcalculate.length>0){$.each(e.facet.field[0].facetcalculate,function(g,f){if(f.calctype==undefined){f.calctype="field"}var h=""+getEleFilterItem(e,f.code,"label")+"("+calcval2text(f.calctype)+")";d.push({text:h,value:f.calctype+":"+f.code,type:getEleFilterItem(e,f.code,"datatype")})})}if(d.length==0){d=[{text:"统计字段",value:"text",type:"string"}]}return d};this.getOutputFieldLabel=function(){var e=$("#fieldstofacet input[name=topic_config_facet]:checked").val();var d;if(e==undefined||e==""){if(c.element.dataJson.facet.field!=undefined&&c.element.dataJson.facet.field.length>0){d=c.element.dataJson.facet.field[0].name}else{d=""}}else{d=e}return getDisplayName(d,c.element.dataJson.filter)};this.getOutputPinData=function(g,d){var e=[];var f=c.element.dataJson.facet.field.length>0&&c.element.dataJson.facet.field[0].isfeature;$(d).each(function(j,k){var l={};if(f){l.value=k.text;var h=k.text.split(",");if(h.length>1){l.text="("+h[0]+")"+h[1]}else{l.text=k.alias==undefined?k.text:k.alias}}else{l.text=k.alias==undefined?k.text:k.alias;l.value=k.text}e.push(l)});return e};this.getFormatParams=function(){if(this.partFormConfig.getParams()){var d=this.partFormConfig.getParams();c.element.setFormConfigData(d)}else{return false}};this.getAllInputPin=function(){var d=new Array();for(var f in c.element.dataJson.filter){if(c.element.dataJson.filter[f].allowcontrol!=undefined&&parseInt(c.element.dataJson.filter[f].allowcontrol,10)==-1&&c.element.dataJson.filter[f].datatype!="range"&&c.element.dataJson.filter[f].datatype!="gaprange"&&!config.excludeInputPins.inArray(f)){var e=c.element.dataJson.filter[f].label;switch(f){case"weibourl":e="文章唯一标识";break;case"oristatusurl":e="源文章唯一标识";break;default:break}d.push({text:e,value:f,type:c.element.dataJson.filter[f].datatype})}}d.push({text:"输出过滤-包含",value:"include",type:"string"});d.push({text:"输出过滤-去除",value:"exclude",type:"string"});return d};this.getModelShowType=function(){return getShowType()};this.setModelShowType=function(i,f,e,h,g,j,d){if(j){$("#modelshow_list").attr("maptype",j)}if(d){$("#modelshow_list").attr("linetype",d)}$(i).each(function(k,l){$("input[name=modelshow_showtype][value="+l+"]").attr("checked",true)})};this.onDistinctChange=function(d){if(c.partOutput!=undefined&&c.partOutput.onDistinctChange!=undefined){c.partOutput.onDistinctChange(d)}}};function TopicHeatMap(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.requestData;this.name="chart";this.showid="bigchart";this.resizable=true;this.islabeltimeformat=false;this.beforeRender=function(){c.part4.beforeRefresh()};this.render=function(e){$(c.targetID).children(":not(h1)").remove();if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}var d=c.postDataJson.facet.field;if(d.length>0){switch(d[0].name){case"province":case"ancestor_province":case"province_code":case"users_province_code":case"city":case"ancestor_city":case"city_code":case"users_city_code":case"district":case"ancestor_district":case"district_code":case"users_district_code":case"ancestor_country":case"country":case"country_code":case"users_country_code":createShowPartByName(config.controller+"public/part_jsmap.js","JSMap",c,function(f){c.part4=f;c.part4.render(e)});break;default:break}}else{if(c.postDataJson.modelid==6){createShowPartByName(config.controller+"public/part_jsmap.js","JSMap",c,function(f){c.part4=f;c.part4.render(e)})}}};this.requestCallBack=function(f){c.requestData=f;var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}c.part4.refresh(f,e,d);refreshOnsitePosition()};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.beforeRender=function(){c.part4.beforeRefresh()};this.refreshdata=function(f){var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}c.part4.refresh(f,e,d)}};function TopicMap(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.requestData;this.name="chart";this.showid="bigchart";this.resizable=true;this.islabeltimeformat=false;this.beforeRender=function(){c.part4.beforeRefresh()};this.render=function(e){$(c.targetID).children(":not(h1)").remove();if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}var d=c.postDataJson.facet.field;if(d.length>0){switch(d[0].name){case"province":case"ancestor_province":case"province_code":case"users_province_code":case"city":case"ancestor_city":case"city_code":case"users_city_code":case"district":case"ancestor_district":case"district_code":case"users_district_code":case"ancestor_country":case"country":case"country_code":case"users_country_code":createShowPartByName(config.controller+"public/part_jsmap.js","JSMap",c,function(f){c.part4=f;c.part4.render(e)});break;default:break}}else{if(c.postDataJson.modelid==6){createShowPartByName(config.controller+"public/part_jsmap.js","JSMap",c,function(f){c.part4=f;c.part4.render(e)})}}};this.requestCallBack=function(f){c.requestData=f;var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}c.part4.refresh(f,e,d);refreshOnsitePosition()};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.beforeRender=function(){c.part4.beforeRefresh()};this.refreshdata=function(f){var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}c.part4.refresh(f,e,d)}};function TopKeywordShow(a,b){var c=this;BaseShow.call(this);this.element=b;this.part1;this.part3;this.partTimeTab;this.part4;this.configrange;this.rangestart;this.rangeend;this.rangegap;this.requestData;this.resizable=true;this.name="TopKeywordShow";this.islabeltimeformat=false;this.setpart=function(e,d){if(c.element.dataJson.facet.field.length>0&&c.element.dataJson.facet.field[0].name=="url"){c.aspectratio=-1;c.width=e;c.defaultSize=function(){$(c.targetID).css("width",c.width).attr("aspectratio",c.aspectratio);setShowHeigh(c);changeWidthHeigh()}}else{c.defaultSize=null;this.width=e;this.aspectratio=d}};this.partTimeTabShow=function(d){c.partTimeTab.render(function(){createShowPartByName(config.controller+"public/part_jsmsline.js","JSMsLine4",c,function(e){c.part4=e;c.part4.render(d)})})};this.render=function(e){$(c.targetID).children(":not(h1)").remove();if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}if(c.postDataJson.facet.range.length>0){var d=getRangeValue(c.postDataJson.facet);c.rangestart=d.start;c.rangeend=d.end;c.rangegap=d.gap;if(c.element.instanceType==3){createShowPartByName(config.controller+"public/part_jscolumn3d.js","JSFoltopPart4",c,function(g){c.part4=g;var f="";if(c.charttype!=undefined){f=c.charttype}else{f="column"}c.part4.setFlash(f,c.showid);c.part4.render(e)})}else{if(c.postDataJson.facet.range[0].name=="created_at"){createShowPartByName(config.controller+"public/part_timetab.js","TimeTab",c,function(f){c.partTimeTab=f;c.partTimeTabShow(e)})}else{createShowPartByName(config.controller+"public/part_jsmsline.js","JSMsLine4",c,function(f){c.part4=f;c.part4.render(e)})}}}else{if(c.postDataJson.facet.field.length>0&&c.postDataJson.facet.field[0].name=="url"){createShowPartByName(config.controller+"topic/parts/topic_part_list.js","FrqPartList",c,function(f){c.part4=f;c.part4.render(e)})}else{if(c.postDataJson.facet.field.length>0&&c.postDataJson.facet.field[0].name=="reply_comment"){createShowPartByName(config.controller+"topic/parts/comment_part_list.js","CommentPartList",c,function(f){c.part4=f;c.part4.render(e)})}else{if(c.postDataJson.classifyquery!=null){createShowPartByName(config.controller+"public/part_jscolumn3d.js","JSFoltopPart4",c,function(g){c.part4=g;var f="";if(c.charttype!=undefined){f=c.charttype}else{f="column"}c.part4.setFlash(f,c.showid);c.part4.render(e)})}else{createShowPart(c.element.modelID,4,c,function(f){c.part4=f;if(c.postDataJson.facet.field.length>0&&(c.postDataJson.facet.field[0].name=="combinWord"||c.postDataJson.facet.field[0].name=="topic")){c.part4.setFlash("topic",c.showid)}else{c.part4.setFlash("keyword",c.showid)}c.part4.render(e)})}}}}};this.requestCallBack=function(f){if(f!=null&&f!=undefined){c.requestData=f;var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}if(c.part4!=undefined&&c.part4.pie3drandomid!=undefined&&c.part4.pie3drandomid=="pie3dpart"){f=formatPieDataCom(c.postDataJson,c.requestData);e="label";d="value"}c.part4.refresh(f,e,d)}};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.beforeRender=function(){c.part4.beforeRefresh()};this.refreshdata=function(g){if(c.postDataJson.contrast!=null){var f=[];var h={};h.totalcount=g.length;h.categoryname="";h.datalist=[];$.each(g,function(k,j){var l={};l.label=j.categoryname;l.value=j.totalcount;h.datalist.push(l)});f.push(h);c.part4.refresh(f,"label","value");c.part_grouplist.refresh(g)}else{var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}c.part4.refresh(g,e,d)}}};function TopkeywordSingleListShow(a,b){var c=this;BaseShow.call(this);this.element=b;this.part1;this.part3;this.part4;this.configrange;this.rangestart;this.rangeend;this.rangegap;this.showid="singlelist";this.requestData;this.beforeRender=function(){c.part4.beforeRefresh()};this.render=function(e){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.classifyquery!=null){if(c.postDataJson.classifyquery.xcombined){createShowPartByName(config.controller+"public/part_combinedlist.js","CombinedList",c,function(f){c.part4=f;c.part4.render(e)})}else{createShowPartByName(config.controller+"topic/parts/topic_part_grouplist.js","TopicPartGroupList",c,function(f){c.part4=f;c.part4.render(e)})}}else{var d=0;if(c.element.firstrequestData!=undefined&&c.element.firstrequestData.length>1){d=1;if(c.element.firstrequestData[0].xcombined){d=2}}if(d>0){if(d==2){createShowPartByName(config.controller+"public/part_combinedlist.js","CombinedList",c,function(f){c.part4=f;c.part4.render(e)})}else{createShowPartByName(config.controller+"topic/parts/topic_part_grouplist.js","TopicPartGroupList",c,function(f){c.part4=f;c.part4.render(e)})}}else{createShowPartByName(config.controller+"topic/parts/topic_part_list.js","FrqPartList",c,function(f){c.part4=f;c.part4.setList("list",c.showid);c.part4.render(e)})}}};this.requestCallBack=function(f){c.requestData=f;var d=getValueName(c.postDataJson);var e=getLabelName(c.postDataJson);if(e=="range"){c.islabeltimeformat=true}if(c.part4!=undefined&&c.part4.pie3drandomid!=undefined&&c.part4.pie3drandomid=="pie3dpart"){f=formatPieDataCom(c.postDataJson,c.requestData);e="label";d="value"}c.part4.refresh(f,e,d);refreshOnsitePosition()};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})}};function UserConfig(a,b){var c=this;this.targetID=a;this.element=b;this.partFormConfig;this.partAuthConfig;this.partAnalysis;this.partOutput;this.partSaveFormBtn;this.partOutputPin;this.partInputPin;this.linkageSearch;this.listpart;this.partAddElement;this.partChartmodel;this.partDataconfig;this.partEditWidgetButton;this.renderEditForm=function(d){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.partOutput=createConfigPart(this.element.modelID,"output",this);this.partOutput.render();this.partDataconfig=createConfigPart(this.element.modelID,"dataconfig",this);this.partDataconfig.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render(d==true);if(d&&c.element.instanceType!=3){this.partEditWidgetButton=createConfigPart(this.element.modelID,"editwidgetbutton",this);this.partEditWidgetButton.render()}};this.renderEditAuth=function(){$(this.targetID).empty();this.partAuthConfig=createConfigPart(this.element.modelID,"authconfig",this);this.partAuthConfig.render()};this.renderForm=function(){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.partOutput=createConfigPart(this.element.modelID,"output",this);this.partOutput.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render();this.partAnalysis=createConfigPart(this.element.modelID,"analysis",this);this.partAnalysis.render()};this.outputChange=function(d){if(d!=undefined&&d!=""){this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.changeShowType(d)}};this.renderLinkage=function(e){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.partOutput=createConfigPart(this.element.modelID,"output",this);this.partOutput.render();var d=["users_followers_count","users_friends_count","users_statuses_count","users_created_at"];this.linkageSearch=createConfigPart(this.element.modelID,"linkagesearch",this);this.linkageSearch.render();this.listpart=createConfigPart(this.element.modelID,"listpart",this);this.listpart.setHead(["统计结果","用户名","粉丝数","关注数","文章数"],true);this.listpart.setField(["alias","frq","users_followers_count","users_friends_count","users_statuses_count"]);this.listpart.render(this.linkageSearch.contentTargetID);this.partOutputPin=createConfigPart(this.element.modelID,"outputpin",this);this.partOutputPin.render();this.partInputPin=createConfigPart(this.element.modelID,"inputpin",this);this.partInputPin.render();this.partDataconfig=createConfigPart(this.element.modelID,"dataconfig",this);this.partDataconfig.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render(e==true)};this.getOutputFields=function(){var d=[{text:"统计字段",value:"text",type:"string"}];return d};this.getOutputFieldLabel=function(d){var e=$("#fieldstofacet input[name=user_config_facet]:checked").val();var d;if(e==undefined||e==""){if(c.element.dataJson.facet.field!=undefined&&c.element.dataJson.facet.field.length>0){d=c.element.dataJson.facet.field[0].name}else{d=""}}else{d=e}return getDisplayName(d,c.element.dataJson.filter)};this.getOutputPinData=function(g,d){var e=[];var f=c.element.dataJson.facet.field.length>0&&c.element.dataJson.facet.field[0].isfeature;$(d).each(function(j,k){var l={};if(f){l.value=k.text;var h=k.text.split(",");if(h.length>1){l.text="("+h[0]+")"+h[1]}else{l.text=k.alias==undefined?k.text:k.alias}}else{l.text=k.alias==undefined?k.text:k.alias;l.value=k.text}e.push(l)});return e};this.getFormatParams=function(){if(this.partFormConfig.getParams()){var d=this.partFormConfig.getParams();c.element.setFormConfigData(d)}else{return false}};this.getAllInputPin=function(){var d=new Array();for(var e in c.element.dataJson.filter){if(c.element.dataJson.filter[e].allowcontrol!=undefined&&parseInt(c.element.dataJson.filter[e].allowcontrol,10)==-1&&c.element.dataJson.filter[e].datatype!="range"&&c.element.dataJson.filter[e].datatype!="gaprange"){d.push({text:c.element.dataJson.filter[e].label,value:e,type:c.element.dataJson.filter[e].datatype})}}d.push({text:"输出过滤-包含",value:"include",type:"string"});d.push({text:"输出过滤-去除",value:"exclude",type:"string"});return d};this.getModelShowType=function(){return getShowType()};this.setModelShowType=function(i,f,e,h,g,j,d){if(j){$("#modelshow_list").attr("maptype",j)}if(d){$("#modelshow_list").attr("linetype",d)}$(i).each(function(k,l){$("input[name=modelshow_showtype][value="+l+"]").attr("checked",true)})};this.onDistinctChange=function(d){if(c.partOutput!=undefined&&c.partOutput.onDistinctChange!=undefined){c.partOutput.onDistinctChange(d)}}};function VirtualdataConfig(a,b){var c=this;this.targetID=a;this.element=b;this.partFormConfig;this.partAuthConfig;this.partAnalysis;this.partOutput;this.partSaveFormBtn;this.partOutputPin;this.partInputPin;this.linkageSearch;this.listpart;this.partAddElement;this.partChartmodel;this.partDataconfig;this.partEditWidgetButton;this.renderEditForm=function(d){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();if(d&&c.element.instanceType!=3){this.partEditWidgetButton=createConfigPart(this.element.modelID,"editwidgetbutton",this);this.partEditWidgetButton.render()}};this.renderEditAuth=function(){$(this.targetID).empty();this.partAuthConfig=createConfigPart(this.element.modelID,"authconfig",this);this.partAuthConfig.render()};this.renderForm=function(){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.partOutput=createConfigPart(this.element.modelID,"output",this);this.partOutput.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render();this.partAnalysis=createConfigPart(this.element.modelID,"analysis",this);this.partAnalysis.render()};this.outputChange=function(d){if(d!=undefined&&d!=""){this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.changeShowType(d)}};this.renderLinkage=function(e){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.partOutput=createConfigPart(this.element.modelID,"output",this);this.partOutput.render();var d=["users_followers_count","users_friends_count","users_statuses_count","users_created_at"];this.linkageSearch=createConfigPart(this.element.modelID,"linkagesearch",this);this.linkageSearch.render();this.listpart=createConfigPart(this.element.modelID,"listpart",this);this.listpart.setHead(["统计结果","用户名","粉丝数","关注数","文章数"],true);this.listpart.setField(["alias","frq","users_followers_count","users_friends_count","users_statuses_count"]);this.listpart.render(this.linkageSearch.contentTargetID);this.partOutputPin=createConfigPart(this.element.modelID,"outputpin",this);this.partOutputPin.render();this.partInputPin=createConfigPart(this.element.modelID,"inputpin",this);this.partInputPin.render();this.partDataconfig=createConfigPart(this.element.modelID,"dataconfig",this);this.partDataconfig.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render(e==true)};this.getOutputFields=function(){var d=[{text:"统计字段",value:"text",type:"string"}];return d};this.getOutputFieldLabel=function(d){var e=$("#fieldstofacet input[name=user_config_facet]:checked").val();var d;if(e==undefined||e==""){if(c.element.dataJson.facet.field!=undefined&&c.element.dataJson.facet.field.length>0){d=c.element.dataJson.facet.field[0].name}else{d=""}}else{d=e}return getDisplayName(d,c.element.dataJson.filter)};this.getOutputPinData=function(g,d){var e=[];var f=c.element.dataJson.facet.field.length>0&&c.element.dataJson.facet.field[0].isfeature;$(d).each(function(j,k){var l={};if(f){l.value=k.text;var h=k.text.split(",");if(h.length>1){l.text="("+h[0]+")"+h[1]}else{l.text=k.alias==undefined?k.text:k.alias}}else{l.text=k.alias==undefined?k.text:k.alias;l.value=k.text}e.push(l)});return e};this.getFormatParams=function(){if(this.partFormConfig.getParams()){var d=this.partFormConfig.getParams();c.element.setFormConfigData(d)}else{return false}};this.getAllInputPin=function(){var d=new Array();for(var e in c.element.dataJson.filter){if(c.element.dataJson.filter[e].allowcontrol!=undefined&&parseInt(c.element.dataJson.filter[e].allowcontrol,10)==-1&&c.element.dataJson.filter[e].datatype!="range"&&c.element.dataJson.filter[e].datatype!="gaprange"){d.push({text:c.element.dataJson.filter[e].label,value:e,type:c.element.dataJson.filter[e].datatype})}}d.push({text:"输出过滤-包含",value:"include",type:"string"});d.push({text:"输出过滤-去除",value:"exclude",type:"string"});return d};this.getModelShowType=function(){return getShowType()};this.setModelShowType=function(d){$(d).each(function(e,f){$("input[name=modelshow_showtype][value="+f+"]").attr("checked",true)})};this.onDistinctChange=function(d){if(c.partOutput!=undefined&&c.partOutput.onDistinctChange!=undefined){c.partOutput.onDistinctChange(d)}}};function WeiboChart(a,b){var c=this;BaseShow.call(this);this.element=b;this.part4;this.part_grouplist;this.requestData;this.showid;this.beforeRender=function(){c.part4.beforeRefresh()};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.output.outputtype==1){if(c.postDataJson.contrast!=null){createShowPartByName(config.controller+"public/part_jspie3d.js","JSPartPie3D",c,function(e){c.part4=e;c.part4.render(d)})}else{createShowPart(c.element.modelID,4,c,function(e){c.part4=e;c.part4.render(d)})}}};this.setpart=function(e,d){c.width=e;if(c.element.dataJson.contrast==null){c.aspectratio=-1}else{c.aspectratio=d}};this.requestCallBack=function(e){if(e!=null){c.requestData=e;if(c.postDataJson.output.outputtype==1){if(c.postDataJson.contrast!=null){var d=[];var f={};f.totalcount=e.length;f.categoryname="";f.datalist=[];$.each(e,function(h,g){var j={};j.label=g.categoryname;j.value=g.totalcount;f.datalist.push(j)});d.push(f);c.part4.refresh(d,"label","value")}else{c.part4.refresh(e)}}}else{if(c.postDataJson.output.outputtype==1){if(c.postDataJson.contrast!=null){c.part4.refresh(null,"label","value")}else{c.part4.refresh(e)}}}};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.refreshdata=function(d){}};function WeiboConfig(a,c){var d=this;this.targetID=a;this.element=c;this.partFormConfig;this.partAuthConfig;this.partAnalysis;this.partOutput;this.partSaveFormBtn;this.partOutputPin;this.partInputPin;this.linkageSearch;this.listpart;this.partAddElement;this.partDataconfig;this.partEditWidgetButton;this.renderEditForm=function(e){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.partDistinct=createConfigPart(this.element.modelID,"distinct",this);this.partDistinct.render();this.partOutput=createConfigPart(this.element.modelID,"output",this);this.partOutput.render();this.partDataconfig=createConfigPart(this.element.modelID,"dataconfig",this);this.partDataconfig.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render(e==true);if(e&&d.element.instanceType!=3){this.partEditWidgetButton=createConfigPart(this.element.modelID,"editwidgetbutton",this);this.partEditWidgetButton.render()}};this.renderEditAuth=function(){$(this.targetID).empty();this.partAuthConfig=createConfigPart(this.element.modelID,"authconfig",this);this.partAuthConfig.render()};this.renderForm=function(){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.partOutput=createConfigPart(this.element.modelID,"output",this);this.partOutput.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render();this.partAnalysis=createConfigPart(this.element.modelID,"analysis",this);this.partAnalysis.render()};this.outputChange=function(){this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.changeShowType()};this.renderLinkage=function(e){$(this.targetID).empty();this.partFormConfig=createConfigPart(this.element.modelID,"formconfig",this);this.partFormConfig.render();this.partDistinct=createConfigPart(this.element.modelID,"distinct",this);this.partDistinct.render();this.partOutput=createConfigPart(this.element.modelID,"output",this);this.partOutput.render();this.linkageSearch=createConfigPart(this.element.modelID,"linkagesearch",this);this.linkageSearch.render();this.listpart=createConfigPart(this.element.modelID,"listpart",this);this.listpart.setHead(["作者","内容","日期"],true);this.listpart.setField(["screen_name","text",{name:"created_at",formatter:function(f){return formatTime("yyyy-MM-dd hh:mm:ss",parseInt(f,10))}}]);this.listpart.setCheckedField({textfield:"text",valuefield:"id"});this.listpart.render(this.linkageSearch.contentTargetID);this.partOutputPin=createConfigPart(this.element.modelID,"outputpin",this);this.partOutputPin.render();this.partInputPin=createConfigPart(this.element.modelID,"inputpin",this);this.partInputPin.render();this.partDataconfig=createConfigPart(this.element.modelID,"dataconfig",this);this.partDataconfig.render();this.partShowmodel=createConfigPart(this.element.modelID,"modelshow",this);this.partShowmodel.render(e==true)};this.getFormatParams=function(){var e=this.partFormConfig.getParams();if(e){d.element.setFormConfigData(e)}else{return false}};this.getAllInputPin=function(){var e=new Array();for(var g in d.element.dataJson.filter){if(d.element.dataJson.filter[g].allowcontrol!=undefined&&parseInt(d.element.dataJson.filter[g].allowcontrol,10)==-1&&d.element.dataJson.filter[g].datatype!="range"&&d.element.dataJson.filter[g].datatype!="gaprange"&&!config.excludeInputPins.inArray(g)){var f=d.element.dataJson.filter[g].label;switch(g){case"weibourl":f="文章唯一标识";break;case"oristatusurl":f="源文章唯一标识";break;default:break}var h={text:f,value:g,type:d.element.dataJson.filter[g].datatype};e.push(h)}}return e};var b;this.initOutputFields=function(){b={};b.guid={text:"文章唯一标识",type:"string"};b.text={text:"微博内容",type:"string"};b.ancestor_text={text:"上层转发微博内容",type:"string"};b.verified_reason={text:"认证原因",type:"string"};b.description={text:"简介",type:"string"};b.originalText={text:"原文内容",type:"string"};b.combinWord={text:"短语",type:"string",pound:true};b.ancestor_combinWord={text:"上层转发短语",type:"string",pound:true};b.emoCombin={text:"情感关键词组合",type:"string",pound:true};b.ancestor_emoCombin={text:"上层转发情感短语",type:"string",pound:true};b.account={text:"@用户",type:"value_text_object"};b.ancestor_account={text:"上层转发@用户",type:"value_text_object"};b.emoAccount={text:"@用户情感",type:"value_text_object",pound:true};b.ancestor_emoAccount={text:"上层转发@用户情感",type:"value_text_object",pound:true};b.originalText={text:"原文内容",type:"string"};b.similar={text:"摘要内容",type:"string"};b.ancestor_similar={text:"上层转发摘要内容",type:"string"};b.source={text:"应用来源",type:"string"};b.userid={text:"用户名",type:"value_text_object"};b.retweeted_guid={text:"源文章唯一标识",type:"string"};b.screen_name={text:"作者昵称",type:"string"};b.content_type={text:"微博类型",type:"int"};b.country_code={text:"用户国家",type:"value_text_object"};b.province_code={text:"用户省份",type:"value_text_object"};b.city_code={text:"用户城市",type:"value_text_object"};b.district_code={text:"用户区县",type:"value_text_object"};b.country={text:"提及国家",type:"value_text_object"};b.ancestor_country={text:"上层转发提及国家",type:"value_text_object"};b.province={text:"提及省份",type:"value_text_object"};b.ancestor_province={text:"上层转发提及省份",type:"value_text_object"};b.city={text:"提及城市",type:"value_text_object"};b.ancestor_city={text:"上层转发提及城市",type:"value_text_object"};b.district={text:"提及区县",type:"value_text_object"};b.ancestor_district={text:"上层转发提及区县",type:"value_text_object"};b.emoCountry={text:"地区情感",type:"value_text_object",pound:true};b.ancestor_emoCountry={text:"上层转发地区情感",type:"value_text_object",pound:true};b.emoProvince={text:"地区情感",type:"value_text_object",pound:true};b.ancestor_emoProvince={text:"上层转发地区情感",type:"value_text_object",pound:true};b.emoCity={text:"地区情感",type:"value_text_object",pound:true};b.ancestor_emoCity={text:"上层转发地区情感",type:"value_text_object",pound:true};b.emoDistrict={text:"地区情感",type:"value_text_object",pound:true};b.ancestor_emoDistrict={text:"上层转发地区情感",type:"value_text_object",pound:true};b.business={text:"行业",type:"value_text_object"};b.ancestor_business={text:"上层转发行业",type:"value_text_object"};b.emoBusiness={text:"行业情感",type:"value_text_object",pound:true};b.ancestor_emoBusiness={text:"上层转发行业情感",type:"value_text_object",pound:true};b.NRN={text:"人名",type:"string"};b.ancestor_NRN={text:"上层转发人名",type:"string"};b.emoNRN={text:"人名情感",type:"string",pound:true};b.ancestor_emoNRN={text:"上层转发人名情感",type:"string",pound:true};b.sourceid={text:"数据源",type:"int"};b.verified_type={text:"认证类型",type:"int"};b.url={text:"URL",type:"string"};b.ancestor_url={text:"URL",type:"string"};b.wb_topic={text:"微博话题",type:"string"};b.ancestor_wb_topic={text:"上层转发微博话题",type:"string"};b.wb_topic_keyword={text:"微博话题关键词",type:"string"};b.ancestor_wb_topic_keyword={text:"上层转发微博话题关键词",type:"string"};b.wb_topic_combinWord={text:"微博话题关键词组合",type:"string",pound:true};b.ancestor_wb_topic_combinWord={text:"上层转发微博话题短语",type:"string",pound:true};b.emoTopic={text:"微博话题情感",type:"string",pound:true};b.ancestor_emoTopic={text:"上层转发微博话题情感",type:"string",pound:true};b.emoTopicKeyword={text:"微博话题关键词情感",type:"string",pound:true};b.ancestor_emoTopicKeyword={text:"上层转发微博话题关键词情感",type:"string",pound:true};b.emoTopicCombinWord={text:"微博话题关键词组合情感",type:"string",pound:true};b.ancestor_emoTopicCombinWord={text:"上层转发微博话题短语情感",type:"string",pound:true};b.organization={text:"机构",type:"string"};b.ancestor_organization={text:"上层转发机构",type:"string"};b.emoOrganization={text:"机构情感",type:"string",pound:true};b.ancestor_emoOrganization={text:"上层转发机构情感",type:"string",pound:true};b.emotion={text:"情感关键词",type:"string",pound:true};b.ancestor_emotion={text:"上层转发情感关键词",type:"string",pound:true};b.verify={text:"是否认证",type:"int"};b.sex={text:"作者性别",type:"string"};b.repost_trend_cursor={text:"传播层级",type:"int"};b.father_guid={text:"上层文章唯一标识",type:"string"};b.host_domain={text:"主机域名",type:"string"};b.ancestor_host_domain={text:"上层转发主机域名",type:"string"};b.original_url={text:"页面地址",type:"string"};b.column={text:"子级栏目",type:"string"};b.column1={text:"父级栏目",type:"string"};b.post_title={text:"帖子标题",type:"string"};b.post_title={text:"帖子标题",type:"string"};b.docguid={text:"文章标识",type:"string"};b.mid={text:"文章MID",type:"string"};b.retweeted_mid={text:"原创文章MID",type:"string"}};this.getSelectFields=function(){if(b==undefined||b==null){d.initOutputFields()}return b};this.getOutputFieldLabel=function(f){var e=d.getSelectFields();if(e){return e[f].text}};this.parseValue=function(h,g){var f={};var e=g;if(b[h].pound){e=g.replace(/\#\#/g,",").replace(/\#/g,"")}if(b[h].type=="value_text_object"){f.text="";f.value=e}else{f.text=e;f.value=e}return f};this.getOutputPinData=function(g,e){var f=[];$(e).each(function(h,j){if(b[g]&&j[g]!=undefined){if(isArray(j[g])){$(j[g]).each(function(l,i){var m=d.parseValue(g,i);f.push(m)})}else{if(g=="guid"&&j.userid&&j.mid&&j.sourceid!=undefined){var k=WeiboUtility.weibomid2url(j.sourceid,j.userid,j.mid);if(k!=""){f.push({text:k,value:k})}}else{if(g=="retweeted_guid"&&j.retweeted_userid&&j.sourceid&&j.retweeted_mid){var k=WeiboUtility.weibomid2url(j.sourceid,j.retweeted_userid,j.retweeted_mid);if(k!=""){f.push({text:k,value:k})}}else{var k=d.parseValue(g,j[g]);f.push(k)}}}}});if(b[g].type=="value_text_object"){f=getFieldText(g,f)}return f};this.getOutputFields=function(){if(b==undefined||b==null){d.initOutputFields()}var f=[];var e=d.element.dataJson.select.value;for(var g=0;g<e.length;g++){if(b[e[g]]!=undefined){f.push({text:b[e[g]].text,value:e[g],type:b[e[g]].type})}}return f};this.getModelShowType=function(){return getShowType()};this.setModelShowType=function(i,f,e,h,g){if(f!=undefined&&f.length>0){$("#modelshow_list").attr("displayContent",JSON.stringify(f));$("#modelshow_list").attr("repostpagesize",e);$("#modelshow_list").attr("commentpagesize",h)}if(g!=null){$("#modelshow_list").attr("scatterXY",JSON.stringify(g))}$(i).each(function(j,k){$("input[name=modelshow_showtype][value="+k+"]").attr("checked",true)})}};function WeiboPictureListShow(a,b){var c=this;BaseShow.call(this);this.element=b;this.part1;this.part3;this.part4;this.configrange;this.rangestart;this.rangeend;this.rangegap;this.showid="singlelist";this.PUNCTUATION=" ·~！@#￥%……&*（）——+=-【】｛｝、|；：‘“’”，《。》、？`~!@#$%^&*()|;:'\"\\,<.>/?[]{}";this.URLPUNCTUATION=" ·~！@#￥%……（）—+【】｛｝、|；：‘“’”，《。》、？`~!@＠#$＄%％^＾＆＊＿－＋＝／｀￣()|;'\"＂｜\\＼,<>＜＞[]［］{}";this.SENTENCEPUNCTUATION="。，！？；,!?";this.beforeRender=function(){c.part4.beforeRefresh()};this.configColumnInfo={screen_name:{filtername:"screen_name",formatter:function(d){return d.screen_name},link:function(e){var d="";if(e.userid!=undefined&&e.userid!=null){d=weiboUserurl(e.userid,e.sourceid)}return d},title:function(d){return d.description},isshow:true},verify:{filtername:"verify",formatter:function(d){return getVerifiedImg(d.verify,d.verified_type)},title:function(d){return d.verified_reason},isshow:true},verified_reason:{filtername:"verified_reason",formatter:function(){},isshow:true},verified_reason_highlight:{filtername:"verified_reason_highlight",formatter:null,isshow:true},description:{filtername:"description",formatter:function(){},isshow:true},description_highlight:{filtername:"description_highlight",formatter:null,isshow:true},source_hostname:{filtername:"source_hostname",formatter:null,isshow:true},column:{filtername:"column",formatter:null,isshow:true},column1:{filtername:"column1",formatter:null,isshow:true},post_title:{filtername:"post_title",formatter:null,isshow:true},productType:{filtername:"productType",formatter:null,isshow:true},impress:{filtername:"impress",formatter:null,isshow:true},commentTags:{filtername:"commentTags",formatter:null,isshow:true},proClassify:{filtername:"proClassify",formatter:null,isshow:true},promotionInfos:{filtername:"promotionInfos",formatter:null,isshow:true},productFullName:{filtername:"productFullName",formatter:null,isshow:true},productColor:{filtername:"productColor",formatter:null,isshow:true},productSize:{filtername:"productSize",formatter:null,isshow:true},productDesc:{filtername:"productDesc",formatter:null,isshow:true},productComb:{filtername:"productComb",formatter:null,isshow:true},detailParam:{filtername:"detailParam",formatter:null,isshow:true},compName:{filtername:"compName",formatter:null,isshow:true},compAddress:{filtername:"compAddress",formatter:null,isshow:true},phoneNum:{filtername:"phoneNum",formatter:null,isshow:true},compURL:{filtername:"compURL",formatter:null,isshow:true},serviceProm:{filtername:"serviceProm",formatter:null,isshow:true},logisticsInfo:{filtername:"logisticsInfo",formatter:null,isshow:true},payMethod:{filtername:"payMethod",formatter:null,isshow:true},apdComment:{filtername:"apdComment",formatter:null,isshow:true},serviceComment:{filtername:"serviceComment",formatter:null,isshow:true},floor:{filtername:"floor",formatter:null,isshow:true},read_count:{filtername:"read_count",formatter:function(d){if(d.read_count!=undefined){return d.read_count}else{return""}},isshow:true},paragraphid:{filtername:"paragraphid",formatter:function(d){if(d.paragraphid!=undefined){return d.paragraphid}else{return""}},isshow:true},crawl_reposts_count:{filtername:"crawl_reposts_count",formatter:null,isshow:true},crawl_comments_count:{filtername:"crawl_comments_count",formatter:null,isshow:true},comments:{filtername:"comments",formatter:null,isshow:function(){if(c.element.displayContent.inArray("comment")){return true}else{return false}}},reposts:{filtername:"reposts",formatter:null,isshow:function(){if(c.element.displayContent.inArray("repost")){return true}else{return false}}},recommended:{filtername:"recommended",formatter:null,isshow:true},text:{filtername:"text",formatter:function(e){var g="";if(e.text==undefined){return g}if(c.postDataJson.facet.field.length>0){var d=c.postDataJson.facet.field[0].name;var f=getFilterValue(d,c.postDataJson.filtervalue);if((d=="account"||d=="url"||d=="topic"||d=="combinWord")&&!c.postDataJson.facet.field[0].isfeature){g=c.highlight(e.text[0],d,f[0].fieldvalue.value)}else{if(d=="country"||d=="country_code"||d=="province"||d=="province_code"||d=="city"||d=="city_code"||d=="district"||d=="district_code"){if(f.length==0){if(d=="city"||d=="district"){f=getFilterValue("province",c.postDataJson.filtervalue)}else{if(d=="city_code"||d=="district_code"){f=getFilterValue("province_code",c.postDataJson.filtervalue)}}}if(f[0]!=undefined){g=c.highlight(e.text[0],d,f[0].fieldvalue.value.text)}else{g=e.text[0]}}else{g=e.text[0]}}}else{g=e.text[0]}return g},link:function(d){if(d.page_url!=undefined){var e=d.page_url;return e}else{if(d.mid!=undefined&&d.mid!=null&&d.mid!="null"&&d.content_type!=2){return weiboMid2url(d.mid,d.userid,d.sourceid)}else{return""}}},isshow:true},article_taginfo:{filtername:"article_taginfo",formatter:null,isshow:true},tag_info:{filtername:"tag_info",formatter:null,isshow:true},thumbnail_pic:{filtername:"thumbnail_pic",formatter:null,isshow:true},bmiddle_pic:{filtername:"bmiddle_pic",formatter:null,isshow:true},created_at:{filtername:"created_at",formatter:function(d){if(d.created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.created_at)}else{return false}},isshow:true},source:{filtername:"source",formatter:function(d){if(d.source!=undefined&&d.source!=null&&d.source!=""){return d.source}else{return false}},isshow:true},reposts_count:{filtername:"reposts_count",formatter:function(d){if(d.reposts_count!=undefined&&d.reposts_count!=null){return d.reposts_count}else{return""}},isshow:true},comments_count:{filtername:"comments_count",formatter:function(d){if(d.comments_count!=undefined&&d.comments_count!=null){return d.comments_count}else{return""}},isshow:true},direct_comments_count:{filtername:"direct_comments_count",formatter:function(d){if(d.direct_comments_count!=undefined&&d.direct_comments_count!=null){return d.direct_comments_count}else{return""}},isshow:true},praises_count:{filtername:"praises_count",formatter:function(d){if(d.praises_count!=undefined&&d.praises_count!=null){return d.praises_count}else{return""}},isshow:true},followers_count:{filtername:"followers_count",formatter:function(d){if(d.followers_count!=undefined&&d.followers_count!=null){return d.followers_count}else{return""}},isshow:true},content_type:{filtername:"content_type",formatter:function(d){if(d.content_type!=undefined){return d.content_type}else{return false}},isshow:true},retweeted_screen_name:{filtername:"retweeted_screen_name",formatter:function(d){if(d.retweeted_screen_name!=undefined){return d.retweeted_screen_name}else{return""}},link:function(d){if(d.retweeted_userid!=undefined&&d.retweeted_userid!=null){return weiboUserurl(d.retweeted_userid,d.sourceid)}else{return""}},title:function(d){return d.retweeted_description},isshow:true},retweeted_verify:{filtername:"retweeted_verify",formatter:function(d){return getVerifiedImg(d.retweeted_verify,d.retweeted_verified_type)},title:function(d){if(d.retweeted_verified_reason!=undefined&&d.retweeted_verified_reason!=""&&d.retweeted_verified_reason!=null){return d.retweeted_verified_reason}else{return false}},isshow:true},retweeted_verified_reason:{filtername:"retweeted_verified_reason",formatter:function(d){},isshow:true},retweeted_text:{filtername:"retweeted_text",formatter:function(d){if(d.retweeted_text!=undefined){return d.retweeted_text[0]}},link:function(d){if(d.retweeted_page_url!=undefined){var e=d.retweeted_page_url;return e}else{if(d.retweeted_mid!=undefined&&d.retweeted_mid!=null&&d.retweeted_mid!="null"){return weiboMid2url(d.retweeted_mid,d.retweeted_userid,d.sourceid)}else{return""}}},isshow:true},retweeted_created_at:{filtername:"retweeted_created_at",formatter:function(d){if(d.retweeted_created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.retweeted_created_at)}else{return false}},isshow:true},retweeted_source:{filtername:"retweeted_source",formatter:function(d){if(d.retweeted_source!=undefined){return d.retweeted_source}else{return false}},isshow:true},retweeted_reposts_count:{filtername:"retweeted_reposts_count",formatter:function(d){if(d.retweeted_reposts_count){return d.retweeted_reposts_count}else{return""}},isshow:true},retweeted_comments_count:{filtername:"retweeted_comments_count",formatter:function(d){if(d.retweeted_comments_count!=undefined){return d.retweeted_comments_count}else{return""}},isshow:true},retweeted_direct_comments_count:{filtername:"retweeted_direct_comments_count",formatter:function(d){if(d.retweeted_direct_comments_count!=undefined){return d.retweeted_direct_comments_count}else{return""}},isshow:true},retweeted_praises_count:{filtername:"retweeted_praises_count",formatter:function(d){if(d.retweeted_praises_count!=undefined){return d.retweeted_praises_count}else{return""}},isshow:true},retweeted_followers_count:{filtername:"retweeted_followers_count",formatter:function(d){if(d.retweeted_followers_count!=undefined){return d.retweeted_followers_count}else{return""}},isshow:true},retweeted_read_count:{filtername:"retweeted_read_count",formatter:function(d){if(d.retweeted_read_count!=undefined){return d.retweeted_read_count}else{return""}},isshow:true},retweeted_thumbnail_pic:{filtername:"retweeted_thumbnail_pic",formatter:null,isshow:true},retweeted_bmiddle_pic:{filtername:"retweeted_bmiddle_pic",formatter:null,isshow:true},quote_screen_name:{filtername:"quote_screen_name",formatter:function(d){if(d.quote_screen_name!=undefined){return d.quote_screen_name}else{return""}},link:function(d){if(d.quote_userid!=undefined&&d.quote_userid!=null){return weiboUserurl(d.quote_userid,d.sourceid)}else{return""}},title:function(d){return d.quote_description},isshow:true},quote_verify:{filtername:"quote_verify",formatter:function(d){return getVerifiedImg(d.quote_verify,d.quote_verified_type)},title:function(d){if(d.quote_verified_reason!=undefined&&d.quote_verified_reason!=""&&d.quote_verified_reason!=null){return d.quote_verified_reason}else{return false}},isshow:true},quote_verified_reason:{filtername:"quote_verified_reason",formatter:function(d){},isshow:true},quote_text:{filtername:"quote_text",formatter:function(d){if(d.quote_text!=undefined){return d.quote_text[0]}},link:function(d){if(d.quote_page_url!=undefined){var e=d.quote_page_url;return e}else{if(d.quote_mid!=undefined&&d.quote_mid!=null&&d.quote_mid!="null"){return weiboMid2url(d.quote_mid,d.quote_userid,d.sourceid)}else{return""}}},isshow:true},quote_created_at:{filtername:"quote_created_at",formatter:function(d){if(d.quote_created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.quote_created_at)}else{return false}},isshow:true},quote_source:{filtername:"quote_source",formatter:function(d){if(d.quote_source!=undefined){return d.quote_source}else{return false}},isshow:true},quote_reposts_count:{filtername:"quote_reposts_count",formatter:function(d){if(d.quote_reposts_count){return d.quote_reposts_count}else{return""}},isshow:true},quote_comments_count:{filtername:"quote_comments_count",formatter:function(d){if(d.quote_comments_count!=undefined){return d.quote_comments_count}else{return""}},isshow:true},quote_direct_comments_count:{filtername:"quote_direct_comments_count",formatter:function(d){if(d.quote_direct_comments_count!=undefined){return d.quote_direct_comments_count}else{return""}},isshow:true},quote_praises_count:{filtername:"quote_praises_count",formatter:function(d){if(d.quote_praises_count!=undefined){return d.quote_praises_count}else{return""}},isshow:true},quote_followers_count:{filtername:"quote_followers_count",formatter:function(d){if(d.quote_followers_count!=undefined){return d.quote_followers_count}else{return""}},isshow:true},quote_read_count:{filtername:"quote_read_count",formatter:function(d){if(d.quote_read_count!=undefined){return d.quote_read_count}else{return""}},isshow:true},quote_thumbnail_pic:{filtername:"quote_thumbnail_pic",formatter:null,isshow:true},quote_bmiddle_pic:{filtername:"quote_bmiddle_pic",formatter:null,isshow:true},quote_floor:{filtername:"quote_floor",formatter:null,isshow:true},quote_mid:{filtername:"quote_mid",formatter:null,isshow:true},quote_page_url:{filtername:"quote_page_url",formatter:null,isshow:true},page_url:{filtername:"page_url",formatter:null,isshow:true}};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.contrast!=null&&c.parentDOMID=="modelcondition"){createShowPartByName(config.controller+"weibo/parts/weibo_part_grouplist.js","WeiboPartGroupList",c,function(e){c.part4=e;c.part4.render(d)})}else{createShowPart(c.element.modelID,7,c,function(e){c.part4=e;c.part4.setList("list",c.showid);c.part4.render(d)})}};this.requestCallBack=function(d){c.requestData=d;c.part4.refresh(d);refreshOnsitePosition()};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.highlight=function(s,q,n){var k="";var g=0;if(false){var f=s.indexOf(n);if(f!=-1){g=f;while(c.PUNCTUATION.indexOf(s.charAt(g))==-1){if(s.charAt(g)!="@"){break}}}var t=new RegExp(n,"g");k=s.replace(t,"<em>"+n+"</em>");t=new RegExp("@<em>"+n+"</em>","g");k=s.replace(t,n)}else{for(var h=0;h<s.length;++h){switch(q){case"account":if(s.charAt(h)=="@"){g=h+1;while(c.PUNCTUATION.indexOf(s.charAt(g))==-1){++g}if(s.substr(h+1,g-h-1)==n.text){k+="<em>";k+=s.substr(h,g-h);k+="</em>";h=g}else{k+=s.substr(h,g-h);h=g}}else{k+=s.charAt(h)}break;case"url":if(h+4<s.length&&s.substr(h,4)=="http"){g=h+1;while(g<s.length&&!s.substr(g,1)==" "&&c.URLPUNCTUATION.indexOf(s.substr(g,1))==-1&&escape(s.substr(g,1)).length!=6){g++}if(s.substr(h,g-h).toLowerCase()==n){k+="<em>";k+=s.substr(h,g-h);k+="</em>";h=g}else{k+=s.substr(h,g-h);h=g}}else{k+=s.charAt(h)}break;case"combinWord":var r=n.split(",");g=h;while(g<s.length&&c.SENTENCEPUNCTUATION.indexOf(s.charAt(g))==-1){if(s.charAt(g)!="#"&&s.charAt(g)!="@"){++g}else{break}}var m=s.substr(h,g-h+1);var f=[];for(var o=0;o<r.length;++o){if(m.indexOf(r[o])!=-1){f.push(o)}}if(f.length==r.length){for(var o=0;o<r.length;++o){var t=new RegExp(r[o],"g");m=m.replace(t,"<em>"+r[o]+"</em>")}}k+=m;h=g;break;case"facettopic":var t=new RegExp("##","g");n=n.replace(t,",");t=/#/g;n=n.replace(t,"");var r=n.split(",");if(s.charAt(h)=="#"){g=h+1;while(s.charAt(g)!="#"){++g}if(g-h!=1){var l=s.substr(h,g-h).toLowerCase();var d=true;for(var p=0;p<r.length;++p){if(l.indexOf(r[p])==-1){d=false;break}}if(d){k+="<em>";k+=s.substr(h,g-h+1);k+="</em>";h=g}else{k+=s.substr(h,g-h);h=g}}else{k+=s.substr(h,g-h);h=g}}else{k+=s.charAt(h)}break;case"country":case"province":case"city":case"district":g=h;if(g+1<s.length&&s.substr(g,n.length).toLowerCase()==n){var e=true;while(g>0&&c.SENTENCEPUNCTUATION.indexOf(s.charAt(g))==-1){if(s.charAt(g)=="@"){e=false;break}--g}if(e){k+="<em>"+s.substr(h,n.length)+"</em>"}else{k+=s.substr(h,n.length)}h=h+n.length}else{k+=s.charAt(h)}break;default:return s}}}return k}};function WeiboPostListShow(a,b){var c=this;BaseShow.call(this);this.element=b;this.part1;this.part3;this.part4;this.configrange;this.rangestart;this.rangeend;this.rangegap;this.showid="postlist";this.PUNCTUATION=" ·~！@#￥%……&*（）——+=-【】｛｝、|；：‘“’”，《。》、？`~!@#$%^&*()|;:'\"\\,<.>/?[]{}";this.URLPUNCTUATION=" ·~！@#￥%……（）—+【】｛｝、|；：‘“’”，《。》、？`~!@＠#$＄%％^＾＆＊＿－＋＝／｀￣()|;'\"＂｜\\＼,<>＜＞[]［］{}";this.SENTENCEPUNCTUATION="。，！？；,!?";this.beforeRender=function(){c.part4.beforeRefresh()};this.configColumnInfo={screen_name:{filtername:"screen_name",formatter:function(d){return d.screen_name},link:function(e){var d="";if(e.userid!=undefined&&e.userid!=null){d=weiboUserurl(e.userid,e.sourceid)}return d},title:function(d){return d.description},isshow:true},verify:{filtername:"verify",formatter:function(d){return getVerifiedImg(d.verify,d.verified_type)},title:function(d){return d.verified_reason},isshow:true},verified_reason:{filtername:"verified_reason",formatter:function(){},isshow:true},verified_reason_highlight:{filtername:"verified_reason_highlight",formatter:null,isshow:true},description:{filtername:"description",formatter:function(){},isshow:true},description_highlight:{filtername:"description_highlight",formatter:null,isshow:true},source_hostname:{filtername:"source_hostname",formatter:null,isshow:true},column:{filtername:"column",formatter:null,isshow:true},column1:{filtername:"column1",formatter:null,isshow:true},post_title:{filtername:"post_title",formatter:null,isshow:true},productType:{filtername:"productType",formatter:null,isshow:true},impress:{filtername:"impress",formatter:null,isshow:true},commentTags:{filtername:"commentTags",formatter:null,isshow:true},proClassify:{filtername:"proClassify",formatter:null,isshow:true},promotionInfos:{filtername:"promotionInfos",formatter:null,isshow:true},productFullName:{filtername:"productFullName",formatter:null,isshow:true},productColor:{filtername:"productColor",formatter:null,isshow:true},productSize:{filtername:"productSize",formatter:null,isshow:true},productDesc:{filtername:"productDesc",formatter:null,isshow:true},productComb:{filtername:"productComb",formatter:null,isshow:true},detailParam:{filtername:"detailParam",formatter:null,isshow:true},compName:{filtername:"compName",formatter:null,isshow:true},compAddress:{filtername:"compAddress",formatter:null,isshow:true},phoneNum:{filtername:"phoneNum",formatter:null,isshow:true},compURL:{filtername:"compURL",formatter:null,isshow:true},serviceProm:{filtername:"serviceProm",formatter:null,isshow:true},logisticsInfo:{filtername:"logisticsInfo",formatter:null,isshow:true},payMethod:{filtername:"payMethod",formatter:null,isshow:true},apdComment:{filtername:"apdComment",formatter:null,isshow:true},serviceComment:{filtername:"serviceComment",formatter:null,isshow:true},floor:{filtername:"floor",formatter:null,isshow:true},read_count:{filtername:"read_count",formatter:function(d){if(d.read_count!=undefined){return d.read_count}else{return""}},isshow:true},paragraphid:{filtername:"paragraphid",formatter:function(d){if(d.paragraphid!=undefined){return d.paragraphid}else{return""}},isshow:true},recommended:{filtername:"recommended",formatter:null,isshow:true},text:{filtername:"text",formatter:function(e){var g="";if(e.text==undefined){return g}if(c.postDataJson.facet.field.length>0){var d=c.postDataJson.facet.field[0].name;var f=getFilterValue(d,c.postDataJson.filtervalue);if((d=="account"||d=="url"||d=="topic"||d=="combinWord")&&!c.postDataJson.facet.field[0].isfeature){g=c.highlight(e.text[0],d,f[0].fieldvalue.value)}else{if(d=="country"||d=="country_code"||d=="province"||d=="province_code"||d=="city"||d=="city_code"||d=="district"||d=="district_code"){if(f.length==0){if(d=="city"||d=="district"){f=getFilterValue("province",c.postDataJson.filtervalue)}else{if(d=="city_code"||d=="district_code"){f=getFilterValue("province_code",c.postDataJson.filtervalue)}}}if(f[0]!=undefined){g=c.highlight(e.text[0],d,f[0].fieldvalue.value.text)}else{g=e.text[0]}}else{g=e.text[0]}}}else{g=e.text[0]}return g},link:function(d){if(d.page_url!=undefined){var e=d.page_url;return e}else{if(d.mid!=undefined&&d.mid!=null&&d.mid!="null"&&d.content_type!=2){return weiboMid2url(d.mid,d.userid,d.sourceid)}else{return""}}},isshow:true},article_taginfo:{filtername:"article_taginfo",formatter:null,isshow:true},thumbnail_pic:{filtername:"thumbnail_pic",formatter:null,isshow:true},bmiddle_pic:{filtername:"bmiddle_pic",formatter:null,isshow:true},created_at:{filtername:"created_at",formatter:function(d){if(d.created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.created_at)}else{return false}},isshow:true},source:{filtername:"source",formatter:function(d){if(d.source!=undefined&&d.source!=null&&d.source!=""){return d.source}else{return false}},isshow:true},reposts_count:{filtername:"reposts_count",formatter:function(d){if(d.reposts_count!=undefined&&d.reposts_count!=null){return d.reposts_count}else{return""}},isshow:true},comments_count:{filtername:"comments_count",formatter:function(d){if(d.comments_count!=undefined&&d.comments_count!=null){return d.comments_count}else{return""}},isshow:true},direct_comments_count:{filtername:"direct_comments_count",formatter:function(d){if(d.direct_comments_count!=undefined&&d.direct_comments_count!=null){return d.direct_comments_count}else{return""}},isshow:true},praises_count:{filtername:"praises_count",formatter:function(d){if(d.praises_count!=undefined&&d.praises_count!=null){return d.praises_count}else{return""}},isshow:true},followers_count:{filtername:"followers_count",formatter:function(d){if(d.followers_count!=undefined&&d.followers_count!=null){return d.followers_count}else{return""}},isshow:true},content_type:{filtername:"content_type",formatter:function(d){if(d.content_type!=undefined){return d.content_type}else{return false}},isshow:true},retweeted_screen_name:{filtername:"retweeted_screen_name",formatter:function(d){if(d.retweeted_screen_name!=undefined){return d.retweeted_screen_name}else{return""}},link:function(d){if(d.retweeted_userid!=undefined&&d.retweeted_userid!=null){return weiboUserurl(d.retweeted_userid,d.sourceid)}else{return""}},title:function(d){return d.retweeted_description},isshow:true},retweeted_verify:{filtername:"retweeted_verify",formatter:function(d){return getVerifiedImg(d.retweeted_verify,d.retweeted_verified_type)},title:function(d){if(d.retweeted_verified_reason!=undefined&&d.retweeted_verified_reason!=""&&d.retweeted_verified_reason!=null){return d.retweeted_verified_reason}else{return false}},isshow:true},retweeted_verified_reason:{filtername:"retweeted_verified_reason",formatter:function(d){},isshow:true},retweeted_text:{filtername:"retweeted_text",formatter:function(d){if(d.retweeted_text!=undefined){return d.retweeted_text[0]}},link:function(d){if(d.retweeted_page_url!=undefined){var e=d.retweeted_page_url;return e}else{if(d.retweeted_mid!=undefined&&d.retweeted_mid!=null&&d.retweeted_mid!="null"){return weiboMid2url(d.retweeted_mid,d.retweeted_userid,d.sourceid)}else{return""}}},isshow:true},retweeted_created_at:{filtername:"retweeted_created_at",formatter:function(d){if(d.retweeted_created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.retweeted_created_at)}else{return false}},isshow:true},retweeted_source:{filtername:"retweeted_source",formatter:function(d){if(d.retweeted_source!=undefined){return d.retweeted_source}else{return false}},isshow:true},retweeted_reposts_count:{filtername:"retweeted_reposts_count",formatter:function(d){if(d.retweeted_reposts_count){return d.retweeted_reposts_count}else{return""}},isshow:true},retweeted_comments_count:{filtername:"retweeted_comments_count",formatter:function(d){if(d.retweeted_comments_count!=undefined){return d.retweeted_comments_count}else{return""}},isshow:true},retweeted_direct_comments_count:{filtername:"retweeted_direct_comments_count",formatter:function(d){if(d.retweeted_direct_comments_count!=undefined){return d.retweeted_direct_comments_count}else{return""}},isshow:true},retweeted_praises_count:{filtername:"retweeted_praises_count",formatter:function(d){if(d.retweeted_praises_count!=undefined){return d.retweeted_praises_count}else{return""}},isshow:true},retweeted_followers_count:{filtername:"retweeted_followers_count",formatter:function(d){if(d.retweeted_followers_count!=undefined){return d.retweeted_followers_count}else{return""}},isshow:true},retweeted_read_count:{filtername:"retweeted_read_count",formatter:function(d){if(d.retweeted_read_count!=undefined){return d.retweeted_read_count}else{return""}},isshow:true},retweeted_thumbnail_pic:{filtername:"retweeted_thumbnail_pic",formatter:null,isshow:true},retweeted_bmiddle_pic:{filtername:"retweeted_bmiddle_pic",formatter:null,isshow:true},quote_screen_name:{filtername:"quote_screen_name",formatter:function(d){if(d.quote_screen_name!=undefined){return d.quote_screen_name}else{return""}},link:function(d){if(d.quote_userid!=undefined&&d.quote_userid!=null){return weiboUserurl(d.quote_userid,d.sourceid)}else{return""}},title:function(d){return d.quote_description},isshow:true},quote_verify:{filtername:"quote_verify",formatter:function(d){return getVerifiedImg(d.quote_verify,d.quote_verified_type)},title:function(d){if(d.quote_verified_reason!=undefined&&d.quote_verified_reason!=""&&d.quote_verified_reason!=null){return d.quote_verified_reason}else{return false}},isshow:true},quote_verified_reason:{filtername:"quote_verified_reason",formatter:function(d){},isshow:true},quote_text:{filtername:"quote_text",formatter:function(d){if(d.quote_text!=undefined){return d.quote_text[0]}},link:function(d){if(d.quote_page_url!=undefined){var e=d.quote_page_url;return e}else{if(d.quote_mid!=undefined&&d.quote_mid!=null&&d.quote_mid!="null"){return weiboMid2url(d.quote_mid,d.quote_userid,d.sourceid)}else{return""}}},isshow:true},quote_created_at:{filtername:"quote_created_at",formatter:function(d){if(d.quote_created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.quote_created_at)}else{return false}},isshow:true},quote_source:{filtername:"quote_source",formatter:function(d){if(d.quote_source!=undefined){return d.quote_source}else{return false}},isshow:true},quote_reposts_count:{filtername:"quote_reposts_count",formatter:function(d){if(d.quote_reposts_count){return d.quote_reposts_count}else{return""}},isshow:true},quote_comments_count:{filtername:"quote_comments_count",formatter:function(d){if(d.quote_comments_count!=undefined){return d.quote_comments_count}else{return""}},isshow:true},quote_direct_comments_count:{filtername:"quote_direct_comments_count",formatter:function(d){if(d.quote_direct_comments_count!=undefined){return d.quote_direct_comments_count}else{return""}},isshow:true},quote_praises_count:{filtername:"quote_praises_count",formatter:function(d){if(d.quote_praises_count!=undefined){return d.quote_praises_count}else{return""}},isshow:true},quote_followers_count:{filtername:"quote_followers_count",formatter:function(d){if(d.quote_followers_count!=undefined){return d.quote_followers_count}else{return""}},isshow:true},quote_read_count:{filtername:"quote_read_count",formatter:function(d){if(d.quote_read_count!=undefined){return d.quote_read_count}else{return""}},isshow:true},quote_thumbnail_pic:{filtername:"quote_thumbnail_pic",formatter:null,isshow:true},quote_bmiddle_pic:{filtername:"quote_bmiddle_pic",formatter:null,isshow:true},quote_floor:{filtername:"quote_floor",formatter:null,isshow:true},quote_mid:{filtername:"quote_mid",formatter:null,isshow:true},quote_page_url:{filtername:"quote_page_url",formatter:null,isshow:true}};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.contrast!=null&&c.parentDOMID=="modelcondition"){createShowPartByName(config.controller+"weibo/parts/weibo_part_grouppostlist.js","WeiboPartGroupPostList",c,function(e){c.part4=e;c.part4.render(d)})}else{createShowPart(c.element.modelID,6,c,function(e){c.part4=e;c.part4.setList("list",c.showid);c.part4.render(d)})}};this.requestCallBack=function(d){c.requestData=d;c.part4.refresh(d);refreshOnsitePosition()};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.highlight=function(s,q,n){var k="";var g=0;if(false){var f=s.indexOf(n);if(f!=-1){g=f;while(c.PUNCTUATION.indexOf(s.charAt(g))==-1){if(s.charAt(g)!="@"){break}}}var t=new RegExp(n,"g");k=s.replace(t,"<em>"+n+"</em>");t=new RegExp("@<em>"+n+"</em>","g");k=s.replace(t,n)}else{for(var h=0;h<s.length;++h){switch(q){case"account":if(s.charAt(h)=="@"){g=h+1;while(c.PUNCTUATION.indexOf(s.charAt(g))==-1){++g}if(s.substr(h+1,g-h-1)==n.text){k+="<em>";k+=s.substr(h,g-h);k+="</em>";h=g}else{k+=s.substr(h,g-h);h=g}}else{k+=s.charAt(h)}break;case"url":if(h+4<s.length&&s.substr(h,4)=="http"){g=h+1;while(g<s.length&&!s.substr(g,1)==" "&&c.URLPUNCTUATION.indexOf(s.substr(g,1))==-1&&escape(s.substr(g,1)).length!=6){g++}if(s.substr(h,g-h).toLowerCase()==n){k+="<em>";k+=s.substr(h,g-h);k+="</em>";h=g}else{k+=s.substr(h,g-h);h=g}}else{k+=s.charAt(h)}break;case"combinWord":var r=n.split(",");g=h;while(g<s.length&&c.SENTENCEPUNCTUATION.indexOf(s.charAt(g))==-1){if(s.charAt(g)!="#"&&s.charAt(g)!="@"){++g}else{break}}var m=s.substr(h,g-h+1);var f=[];for(var o=0;o<r.length;++o){if(m.indexOf(r[o])!=-1){f.push(o)}}if(f.length==r.length){for(var o=0;o<r.length;++o){var t=new RegExp(r[o],"g");m=m.replace(t,"<em>"+r[o]+"</em>")}}k+=m;h=g;break;case"facettopic":var t=new RegExp("##","g");n=n.replace(t,",");t=/#/g;n=n.replace(t,"");var r=n.split(",");if(s.charAt(h)=="#"){g=h+1;while(s.charAt(g)!="#"){++g}if(g-h!=1){var l=s.substr(h,g-h).toLowerCase();var d=true;for(var p=0;p<r.length;++p){if(l.indexOf(r[p])==-1){d=false;break}}if(d){k+="<em>";k+=s.substr(h,g-h+1);k+="</em>";h=g}else{k+=s.substr(h,g-h);h=g}}else{k+=s.substr(h,g-h);h=g}}else{k+=s.charAt(h)}break;case"country":case"province":case"city":case"district":g=h;if(g+1<s.length&&s.substr(g,n.length).toLowerCase()==n){var e=true;while(g>0&&c.SENTENCEPUNCTUATION.indexOf(s.charAt(g))==-1){if(s.charAt(g)=="@"){e=false;break}--g}if(e){k+="<em>"+s.substr(h,n.length)+"</em>"}else{k+=s.substr(h,n.length)}h=h+n.length}else{k+=s.charAt(h)}break;default:return s}}}return k}};function WeiboRepostShow(b,d){var g=this;BaseShow.call(this);this.element=d;this.part4;this.configrange;this.rangestart;this.rangeend;this.rangegap;this.requestData;this.postDataJson;this.extendCount=5;this.everyRequestDepth=1;this.maxEveryCount=200;this.scopeTypeLimit=["number"];this.extendStatusArr=[];var a=[];var f;g.allowDownload=false;this.onEdit=function(){if(g.part4.onEdit){g.part4.onEdit()}g.hideSnapshotElementPosition()};this.onCancelEdit=function(){if(g.part4!=undefined&&g.part4.onCancelEdit){g.part4.onCancelEdit()}g.setSnapshotElementPosition();if(g.shade){g.shadow()}};this.getMaxDepth=function(){var h=$(g.targetID).attr("maxdepth");if(h!=undefined&&h!=""){return parseInt(h,10)}else{return 5}};this.setMaxDepth=function(h){$(g.targetID).attr("maxdepth",h);changePage(1);createSnapLayer();g.renewRequest();$.each(window.instances,function(j,k){if(k.instanceID==g.element.instanceID&&k.status==1){k.preUpdate()}})};function c(){var i;while(i=a.shift()){var h=g.part4.appendData(i);if(!h){break}}g.getData()}this.beforeRender=function(){g.part4.beforeRefresh()};this.createOnsiteFilter=function(){g.setDockFields([])};this.createModelshowSwitch=function(){};this.render=function(h){if($(g.targetID).attr("style")==undefined||$(g.targetID).attr("style")==""||$(g.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(g.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(g)}$(g.targetID).children(":not(h1)").remove();if(g.part4&&g.part4.destroy){g.part4.destroy();g.part4=null}createShowPartByName(config.controller+"public/part_sigma.js","SigmaPart",g,function(i){g.part4=i;g.part4.render(h)})};function e(h){if(h.depth<=g.getMaxDepth()||(h.depth-h.parent.depth)>=g.everyRequestDepth||h.depth==1){if(g.extendStatusArr[h.depth]!=undefined){if(typeof(h.requestlimit)=="undefined"&&typeof(h.requestcount)=="undefined"){h.requestlimit=0;h.requestcount=g.maxEveryCount}g.extendStatusArr[h.depth].nodes.push(h);g.extendStatusArr[h.depth].remain++;return true}else{return false}}else{return false}}this.getData=function(){for(var h=0;h<g.extendStatusArr.length;h++){if(g.extendStatusArr[h].remain>0&&g.extendStatusArr[h].nodes.length>0){while(1){var k=g.extendStatusArr[h].nodes.shift();if(k==undefined){break}if(k.requestlimit==0){a.push(k)}else{a.unshift(k)}var j=isNaN(k.requestcount)?g.maxEveryCount:k.requestcount;var l=k.depth==1?1:0;$.ajax({url:config.repostData,data:{fatherid:k.weiboid,parentdepth:k.depth,limit:k.requestlimit,count:j,pathtype:g.showid,is_center:l},type:"get",dataType:"json",success:function(o){g.extendStatusArr[h].remain--;if(g.extendStatusArr[h].remain==0){g.part4.setProcessBar(100*(h+1)/g.extendStatusArr.length)}if(o&&o.error==undefined){for(var m=0;m<a.length;m++){if(a[m].weiboid==o.weiboid){if(typeof(a[m].children)!="object"){$.extend(a[m],o)}else{a[m].children=a[m].children.concat(o.children)}if(f!=undefined&&o.weiboid.toString()==f.toString()){g.element.updateTime=getTimeSec();if(g.showid=="weiborepost"){g.element.firstrequestData[0].datalist[g.scope].showdata=a[m]}else{if(g.showid=="weibocomment"){g.element.firstrequestData[0].datalist[g.scope].showdata2=a[m]}}}break}}}else{if(o.error!=undefined){alert("请求错误");return false}}if(g.extendStatusArr[h].remain==0){c()}if(a.length==0){var i=0;for(var n=h;n<g.extendStatusArr.length;n++){i+=g.extendStatusArr[n].remain}if(i==0){g.part4.setProcessBar(100)}}},error:function(){g.errorCallBack("数据请求异常")}})}break}}};this.requestCallBack=function(l){g.requestData=l;var n=g.getShowData(l);if(n==null){g.errorCallBack("查询的数据不存在.")}else{f=n.guid;g.extendStatusArr=[];var m={};m.keyProperty="weiboid";m.labelProperty="username";m.deciderProperty="totalcount";m.activeProperty="bridgeweibo";m.everyGetCount=g.maxEveryCount;m.addExtendNodesFun=e;m.allowPlay=config.repostShowAllowPlay;m.allowSearch=config.repostShowAllowSearch;m.allowChangeDepth=true;m.searchNodeCountFun=function(o,i,p){$.ajax({url:config.repostData,data:{type:"searchcount",keyword:o,origid:encodeURIComponent(i),pathtype:g.showid},type:"get",dataType:"json",success:function(q){if(q&&q.error==undefined){p(parseInt(q.searchcount,10))}else{alert("查询失败")}},error:function(){g.errorCallBack("数据请求异常")}})};m.tooltipFormatter=function(r){var q="无";if(r.attr.gender=="m"){q="   男"}else{if(r.attr.gender=="f"){q="   女"}}var p="";if(parseInt(r.attr.verified,10)==1){p="认证用户"}var s="";if(parseInt(r.attr.bridgeweibo,10)==1){s='(<span style="color:#4be556;"><b>桥接微博</b></span>)'}var i="未知用户";if(r.attr.username){i=r.attr.username}var o="<b>"+i+"</b>"+s+"<br/>";o+="性别："+q+" "+p+"<br/>";if(r.attr.comments_count!=undefined){o+="评论："+r.attr.comments_count+"<br/>"}if(r.attr.direct_comments_count!=undefined){o+="直接评论："+r.attr.direct_comments_count+"<br/>"}if(r.attr.praises_count!=undefined){o+="赞："+r.attr.praises_count+"<br/>"}if(r.attr.directcount!=undefined){o+="直接转发："+r.attr.directcount+"<br/>"}if(r.attr.totalcount!=undefined){o+="总  转   发："+r.attr.totalcount+"<br/>"}if(r.attr.reachcount!=undefined){o+="直接到达："+r.attr.reachcount+"<br/>"}if(r.attr.totalreach!=undefined){o+="总  到   达："+r.attr.totalreach+"<br/>"}if(r.attr.depth!=undefined){o+="传播深度："+r.attr.depth+""}if(r.attr.maxdepth!=undefined){o+="<br/>最大传播深度："+r.attr.maxdepth}return o};m.extendThreshold=g.extendCount;m.decideExtendFun=function(p,o){var i=parseInt(p.totalcount,10);if(p.totalcount==undefined||i==0){return false}if(parseInt(o.content_type,10)==0){return true}else{return i>=(parseInt(o.totalcount,10)-parseInt(o.directcount,10))/20}};m.onNodeClick=function(q){if(q.content&&q.content.length>0){var t=deepClone(g.postDataJson);var p=getFilterValue("sourceid",t.filtervalue,"int");t.filtervalue=[];t.filterrelation=null;t.output.data_limit=0;t.output.count=q.content.length;if(p.length>0){t.filtervalue.push(p[0])}for(var o=0;o<q.content.length;o++){var r=q.content[o];var s=createFiltervalue("weiboguid","string",r);t.filtervalue.push(s)}t.ispath=true;drillDownShow(t);delete t}};m.getMaxDepth=g.getMaxDepth;m.setMaxDepth=g.setMaxDepth;m.getAllData=function(){if(g.showid=="weiborepost"){return g.requestData[0].datalist[g.scope].showdata}else{if(g.showid=="weibocomment"){return g.requestData[0].datalist[g.scope].showdata2}}};var k=g.getMaxDepth();for(var j=0;j<=k;j++){g.extendStatusArr.push({remain:0,nodes:[]})}a=[];m.maxNearCount=1000;m.minNearCount=10;var h=n.guid;$.ajax({url:config.repostData+"?type=maxdirectcount&origid="+encodeURIComponent(h),data:{pathtype:g.showid},type:"GET",dataType:"json",contentType:"application/json",success:function(p){if(p&&p.error==undefined){var o=parseInt(p.max_directcount,10);if(o>m.maxNearCount){m.nearCountRatio=m.maxNearCount/o;m.maxChildrenCount=m.maxNearCount}else{m.maxChildrenCount=o;m.nearCountRatio=1}m.searchNodeFun=function(r,q,s){$.ajax({url:config.repostData,type:"GET",dataType:"json",data:{type:"search",keyword:r,origid:q,countratio:m.nearCountRatio,maxcount:m.maxNearCount,mincount:m.minNearCount,pathtype:g.showid},success:function(t){if(t&&t.error==undefined){s(t)}else{alert("查询失败");s(null)}},error:function(u,t,v){alert(JSON.stringify(u));alert(JSON.stringify(t));alert(JSON.stringify(v));alert("操作异常");s(null)}})};if(g.showid=="weiborepost"){if(typeof(n.showdata)!="object"){var i=n.guid;e({weiboid:i,depth:1});g.part4.init(m);g.part4.setProcessBar(0);g.getData()}else{g.part4.init(m);g.part4.appendWholeData(n.showdata)}}else{if(g.showid=="weibocomment"){if(typeof(n.showdata2)!="object"){var i=n.guid;e({weiboid:i,depth:1});g.part4.init(m);g.part4.setProcessBar(0);g.getData()}else{g.part4.init(m);g.part4.appendWholeData(n.showdata2)}}}}else{g.errorCallBack("查询的数据不存在.")}},error:function(){g.errorCallBack("数据请求异常")}})}};this.renewRequest=function(){g.element.firstRequest(g.postDataJson,g.requestCallBack,true,function(h){g.errorCallBack(h)})}};function WeiboShow(a,b){var c=this;BaseShow.call(this);this.element=b;this.part1;this.part3;this.part4;this.configrange;this.rangestart;this.rangeend;this.rangegap;this.resizable=false;this.beforeRender=function(){c.part4.beforeRefresh();if(c.postDataJson.contrast!=null){c.part_grouplist.beforeRefresh()}};this.configColumnInfo={screen_name:{filtername:"screen_name",formatter:function(d){return d.screen_name},link:function(e){var d="";if(e.userid!=undefined&&e.userid!=null){d=weiboUserurl(e.userid,e.sourceid)}return d},title:function(d){return d.description},isshow:true},verify:{filtername:"verify",formatter:function(d){return getVerifiedImg(d.verify,d.verified_type)},title:function(d){return d.verified_reason},isshow:true},verified_reason:{filtername:"verified_reason",formatter:function(){},isshow:true},verified_reason_highlight:{filtername:"verified_reason_highlight",formatter:null,isshow:true},description:{filtername:"description",formatter:function(){},isshow:true},description_highlight:{filtername:"description_highlight",formatter:null,isshow:true},source_hostname:{filtername:"source_hostname",formatter:null,isshow:true},column:{filtername:"column",formatter:null,isshow:true},column1:{filtername:"column1",formatter:null,isshow:true},post_title:{filtername:"post_title",formatter:null,isshow:true},productType:{filtername:"productType",formatter:null,isshow:true},impress:{filtername:"impress",formatter:null,isshow:true},commentTags:{filtername:"commentTags",formatter:null,isshow:true},proClassify:{filtername:"proClassify",formatter:null,isshow:true},promotionInfos:{filtername:"promotionInfos",formatter:null,isshow:true},productFullName:{filtername:"productFullName",formatter:null,isshow:true},productColor:{filtername:"productColor",formatter:null,isshow:true},productSize:{filtername:"productSize",formatter:null,isshow:true},productDesc:{filtername:"productDesc",formatter:null,isshow:true},productComb:{filtername:"productComb",formatter:null,isshow:true},detailParam:{filtername:"detailParam",formatter:null,isshow:true},compName:{filtername:"compName",formatter:null,isshow:true},compAddress:{filtername:"compAddress",formatter:null,isshow:true},phoneNum:{filtername:"phoneNum",formatter:null,isshow:true},compURL:{filtername:"compURL",formatter:null,isshow:true},serviceProm:{filtername:"serviceProm",formatter:null,isshow:true},logisticsInfo:{filtername:"logisticsInfo",formatter:null,isshow:true},payMethod:{filtername:"payMethod",formatter:null,isshow:true},apdComment:{filtername:"apdComment",formatter:null,isshow:true},serviceComment:{filtername:"serviceComment",formatter:null,isshow:true},commentTags:{filtername:"commentTags",formatter:null,isshow:true},floor:{filtername:"floor",formatter:null,isshow:true},read_count:{filtername:"read_count",formatter:function(d){if(d.read_count!=undefined){return d.read_count}else{return""}},isshow:true},paragraphid:{filtername:"paragraphid",formatter:function(d){if(d.paragraphid!=undefined){return d.paragraphid}else{return""}},isshow:true},recommended:{filtername:"recommended",formatter:null,isshow:true},text:{filtername:"text",formatter:function(e){var g="";if(e.text==undefined){return g}if(c.postDataJson.facet.field.length>0){var d=c.postDataJson.facet.field[0].name;var f=getFilterValue(d,c.postDataJson.filtervalue);if((d=="account"||d=="url"||d=="topic"||d=="combinWord")&&!c.postDataJson.facet.field[0].isfeature){g=c.highlight(e.text[0],d,f[0].fieldvalue.value)}else{if(d=="country"||d=="country_code"||d=="province"||d=="province_code"||d=="city"||d=="city_code"||d=="district"||d=="district_code"){if(f.length==0){if(d=="city"||d=="district"){f=getFilterValue("province",c.postDataJson.filtervalue)}else{if(d=="city_code"||d=="district_code"){f=getFilterValue("province_code",c.postDataJson.filtervalue)}}}if(f[0]!=undefined){g=c.highlight(e.text[0],d,f[0].fieldvalue.value.text)}else{g=e.text[0]}}else{g=e.text[0]}}}else{g=e.text[0]}return g},link:function(d){if(d.page_url!=undefined){var e=d.page_url;return e}else{if(d.mid!=undefined&&d.mid!=null&&d.mid!="null"&&d.content_type!=2){return weiboMid2url(d.mid,d.userid,d.sourceid)}else{return""}}},isshow:true},article_taginfo:{filtername:"article_taginfo",formatter:null,isshow:true},thumbnail_pic:{filtername:"thumbnail_pic",formatter:null,isshow:true},bmiddle_pic:{filtername:"bmiddle_pic",formatter:null,isshow:true},created_at:{filtername:"created_at",formatter:function(d){if(d.created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.created_at)}else{return false}},isshow:true},source:{filtername:"source",formatter:function(d){if(d.source!=undefined&&d.source!=null&&d.source!=""){return d.source}else{return false}},isshow:true},reposts_count:{filtername:"reposts_count",formatter:function(d){if(d.reposts_count!=undefined&&d.reposts_count!=null){return d.reposts_count}else{return""}},isshow:true},comments_count:{filtername:"comments_count",formatter:function(d){if(d.comments_count!=undefined&&d.comments_count!=null){return d.comments_count}else{return""}},isshow:true},direct_comments_count:{filtername:"direct_comments_count",formatter:function(d){if(d.direct_comments_count!=undefined&&d.direct_comments_count!=null){return d.direct_comments_count}else{return""}},isshow:true},praises_count:{filtername:"praises_count",formatter:function(d){if(d.praises_count!=undefined&&d.praises_count!=null){return d.praises_count}else{return""}},isshow:true},followers_count:{filtername:"followers_count",formatter:function(d){if(d.followers_count!=undefined&&d.followers_count!=null){return d.followers_count}else{return""}},isshow:true},content_type:{filtername:"content_type",formatter:function(d){if(d.content_type!=undefined){return d.content_type}else{return false}},isshow:true},retweeted_screen_name:{filtername:"retweeted_screen_name",formatter:function(d){if(d.retweeted_screen_name!=undefined){return d.retweeted_screen_name}else{return""}},link:function(d){if(d.retweeted_userid!=undefined&&d.retweeted_userid!=null){return weiboUserurl(d.retweeted_userid,d.sourceid)}else{return""}},title:function(d){return d.retweeted_description},isshow:true},retweeted_verify:{filtername:"retweeted_verify",formatter:function(d){return getVerifiedImg(d.retweeted_verify,d.retweeted_verified_type)},title:function(d){if(d.retweeted_verified_reason!=undefined&&d.retweeted_verified_reason!=""&&d.retweeted_verified_reason!=null){return d.retweeted_verified_reason}else{return false}},isshow:true},retweeted_verified_reason:{filtername:"retweeted_verified_reason",formatter:function(d){},isshow:true},retweeted_text:{filtername:"retweeted_text",formatter:function(d){if(d.retweeted_text!=undefined){return d.retweeted_text[0]}},link:function(d){if(d.retweeted_page_url!=undefined){var e=d.retweeted_page_url;return e}else{if(d.retweeted_mid!=undefined&&d.retweeted_mid!=null&&d.retweeted_mid!="null"){return weiboMid2url(d.retweeted_mid,d.retweeted_userid,d.sourceid)}else{return""}}},isshow:true},retweeted_created_at:{filtername:"retweeted_created_at",formatter:function(d){if(d.retweeted_created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.retweeted_created_at)}else{return false}},isshow:true},retweeted_source:{filtername:"retweeted_source",formatter:function(d){if(d.retweeted_source!=undefined){return d.retweeted_source}else{return false}},isshow:true},retweeted_reposts_count:{filtername:"retweeted_reposts_count",formatter:function(d){if(d.retweeted_reposts_count){return d.retweeted_reposts_count}else{return""}},isshow:true},retweeted_comments_count:{filtername:"retweeted_comments_count",formatter:function(d){if(d.retweeted_comments_count!=undefined){return d.retweeted_comments_count}else{return""}},isshow:true},retweeted_direct_comments_count:{filtername:"retweeted_direct_comments_count",formatter:function(d){if(d.retweeted_direct_comments_count!=undefined){return d.retweeted_direct_comments_count}else{return""}},isshow:true},retweeted_praises_count:{filtername:"retweeted_praises_count",formatter:function(d){if(d.retweeted_praises_count!=undefined){return d.retweeted_praises_count}else{return""}},isshow:true},retweeted_followers_count:{filtername:"retweeted_followers_count",formatter:function(d){if(d.retweeted_followers_count!=undefined){return d.retweeted_followers_count}else{return""}},isshow:true},retweeted_read_count:{filtername:"retweeted_read_count",formatter:function(d){if(d.retweeted_read_count!=undefined){return d.retweeted_read_count}else{return""}},isshow:true},retweeted_thumbnail_pic:{filtername:"retweeted_thumbnail_pic",formatter:null,isshow:true},retweeted_bmiddle_pic:{filtername:"retweeted_bmiddle_pic",formatter:null,isshow:true},quote_screen_name:{filtername:"quote_screen_name",formatter:function(d){if(d.quote_screen_name!=undefined){return d.quote_screen_name}else{return""}},link:function(d){if(d.quote_userid!=undefined&&d.quote_userid!=null){return weiboUserurl(d.quote_userid,d.sourceid)}else{return""}},title:function(d){return d.quote_description},isshow:true},quote_verify:{filtername:"quote_verify",formatter:function(d){return getVerifiedImg(d.quote_verify,d.quote_verified_type)},title:function(d){if(d.quote_verified_reason!=undefined&&d.quote_verified_reason!=""&&d.quote_verified_reason!=null){return d.quote_verified_reason}else{return false}},isshow:true},quote_verified_reason:{filtername:"quote_verified_reason",formatter:function(d){},isshow:true},quote_text:{filtername:"quote_text",formatter:function(d){if(d.quote_text!=undefined){return d.quote_text[0]}},link:function(d){if(d.quote_page_url!=undefined){var e=d.quote_page_url;return e}else{if(d.quote_mid!=undefined&&d.quote_mid!=null&&d.quote_mid!="null"){return weiboMid2url(d.quote_mid,d.quote_userid,d.sourceid)}else{return""}}},isshow:true},quote_created_at:{filtername:"quote_created_at",formatter:function(d){if(d.quote_created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.quote_created_at)}else{return false}},isshow:true},quote_source:{filtername:"quote_source",formatter:function(d){if(d.quote_source!=undefined){return d.quote_source}else{return false}},isshow:true},quote_reposts_count:{filtername:"quote_reposts_count",formatter:function(d){if(d.quote_reposts_count){return d.quote_reposts_count}else{return""}},isshow:true},quote_comments_count:{filtername:"quote_comments_count",formatter:function(d){if(d.quote_comments_count!=undefined){return d.quote_comments_count}else{return""}},isshow:true},quote_direct_comments_count:{filtername:"quote_direct_comments_count",formatter:function(d){if(d.quote_direct_comments_count!=undefined){return d.quote_direct_comments_count}else{return""}},isshow:true},quote_praises_count:{filtername:"quote_praises_count",formatter:function(d){if(d.quote_praises_count!=undefined){return d.quote_praises_count}else{return""}},isshow:true},quote_followers_count:{filtername:"quote_followers_count",formatter:function(d){if(d.quote_followers_count!=undefined){return d.quote_followers_count}else{return""}},isshow:true},quote_read_count:{filtername:"quote_read_count",formatter:function(d){if(d.quote_read_count!=undefined){return d.quote_read_count}else{return""}},isshow:true},quote_thumbnail_pic:{filtername:"quote_thumbnail_pic",formatter:null,isshow:true},quote_bmiddle_pic:{filtername:"quote_bmiddle_pic",formatter:null,isshow:true},quote_floor:{filtername:"quote_floor",formatter:null,isshow:true},quote_page_url:{filtername:"quote_page_url",formatter:null,isshow:true}};this.part1show=function(d){c.part1.render(function(){if(!c.part3){createShowPart(c.element.modelID,3,c,function(e){c.part3=e;c.part3show(d)})}else{c.part3show(d)}})};this.setpart=function(e,d){c.aspectratio=-1;c.width=e;c.defaultSize=function(){$(c.targetID).css("width",c.width).attr("aspectratio",c.aspectratio);setShowHeigh(c);changeWidthHeigh()}};this.part3show=function(d){c.part3.render(function(){if(c.postDataJson.output.outputtype==1){if(c.postDataJson.contrast!=null){createShowPartByName(config.controller+"public/part_jspie3d.js","JSPartPie3D",c,function(e){c.part4=e;c.part4show(d)})}else{createShowPart(c.element.modelID,4,c,function(e){c.part4=e;c.part4show(d)})}}})};this.part4show=function(d){c.part4.render(function(){if(!c.part_grouplist){if(c.postDataJson.contrast!=null){createShowPartByName(config.controller+"weibo/parts/weibo_part_grouplist.js","WeiboPartGroupList",c,function(e){c.part_grouplist=e;c.part_grouplist.render(d)})}else{if(d!=undefined){d()}}}else{c.part_grouplist.render(d)}})};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.output.outputtype==1){if(c.postDataJson.contrast!=null){createShowPartByName(config.controller+"public/part_jspie3d.js","JSPartPie3D",c,function(e){c.part4=e;c.part4show(d)})}else{createShowPart(c.element.modelID,4,c,function(e){c.part4=e;c.part4show(d)})}}};this.requestCallBack=function(e){if(e!=null){c.requestData=e;if(c.postDataJson.output.outputtype==1){if(c.postDataJson.contrast!=null){var d=[];var f={};f.totalcount=e.length;f.categoryname="";f.datalist=[];$.each(e,function(h,g){var j={};j.label=g.categoryname;j.value=g.totalcount;f.datalist.push(j)});d.push(f);c.part4.refresh(d,"label","value");c.part_grouplist.refresh(e)}else{c.part4.refresh(e)}}}else{if(c.postDataJson.output.outputtype==1){if(c.postDataJson.contrast!=null){c.part4.refresh(null,"label","value");c.part_grouplist.refresh(null)}else{c.part4.refresh(e)}}}};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.refreshdata=function(e){if(e!=null){if(c.postDataJson.output.outputtype==1){if(c.postDataJson.contrast!=null){var d=[];var f={};f.totalcount=e.length;f.categoryname="";f.datalist=[];$.each(e,function(h,g){var j={};j.label=g.categoryname;j.value=g.totalcount;f.datalist.push(j)});d.push(f);c.part4.refresh(d,"label","value");c.part_grouplist.refresh(e)}else{c.part4.refresh(e)}}}else{if(c.postDataJson.output.outputtype==1){if(c.postDataJson.contrast!=null){c.part4.refresh(null,"label","value");c.part_grouplist.refresh(null)}else{c.part4.refresh(e)}}}}};function WeiboSingleListShow(a,b){var c=this;BaseShow.call(this);this.element=b;this.part1;this.part3;this.part4;this.configrange;this.rangestart;this.rangeend;this.rangegap;this.showid="singlelist";this.PUNCTUATION=" ·~！@#￥%……&*（）——+=-【】｛｝、|；：‘“’”，《。》、？`~!@#$%^&*()|;:'\"\\,<.>/?[]{}";this.URLPUNCTUATION=" ·~！@#￥%……（）—+【】｛｝、|；：‘“’”，《。》、？`~!@＠#$＄%％^＾＆＊＿－＋＝／｀￣()|;'\"＂｜\\＼,<>＜＞[]［］{}";this.SENTENCEPUNCTUATION="。，！？；,!?";this.beforeRender=function(){c.part4.beforeRefresh()};this.configColumnInfo={screen_name:{filtername:"screen_name",formatter:function(d){return d.screen_name},link:function(e){var d="";if(e.userid!=undefined&&e.userid!=null){d=weiboUserurl(e.userid,e.sourceid)}return d},title:function(d){return d.description},isshow:true},verify:{filtername:"verify",formatter:function(d){return getVerifiedImg(d.verify,d.verified_type)},title:function(d){return d.verified_reason},isshow:true},verified_reason:{filtername:"verified_reason",formatter:function(){},isshow:true},verified_reason_highlight:{filtername:"verified_reason_highlight",formatter:null,isshow:true},description:{filtername:"description",formatter:function(){},isshow:true},description_highlight:{filtername:"description_highlight",formatter:null,isshow:true},source_hostname:{filtername:"source_hostname",formatter:null,isshow:true},column:{filtername:"column",formatter:null,isshow:true},column1:{filtername:"column1",formatter:null,isshow:true},post_title:{filtername:"post_title",formatter:null,isshow:true},productType:{filtername:"productType",formatter:null,isshow:true},impress:{filtername:"impress",formatter:null,isshow:true},commentTags:{filtername:"commentTags",formatter:null,isshow:true},proClassify:{filtername:"proClassify",formatter:null,isshow:true},promotionInfos:{filtername:"promotionInfos",formatter:null,isshow:true},productFullName:{filtername:"productFullName",formatter:null,isshow:true},productColor:{filtername:"productColor",formatter:null,isshow:true},productSize:{filtername:"productSize",formatter:null,isshow:true},productDesc:{filtername:"productDesc",formatter:null,isshow:true},productComb:{filtername:"productComb",formatter:null,isshow:true},detailParam:{filtername:"detailParam",formatter:null,isshow:true},compName:{filtername:"compName",formatter:null,isshow:true},compAddress:{filtername:"compAddress",formatter:null,isshow:true},phoneNum:{filtername:"phoneNum",formatter:null,isshow:true},compURL:{filtername:"compURL",formatter:null,isshow:true},serviceProm:{filtername:"serviceProm",formatter:null,isshow:true},logisticsInfo:{filtername:"logisticsInfo",formatter:null,isshow:true},payMethod:{filtername:"payMethod",formatter:null,isshow:true},apdComment:{filtername:"apdComment",formatter:null,isshow:true},serviceComment:{filtername:"serviceComment",formatter:null,isshow:true},floor:{filtername:"floor",formatter:null,isshow:true},read_count:{filtername:"read_count",formatter:function(d){if(d.read_count!=undefined){return d.read_count}else{return""}},isshow:true},paragraphid:{filtername:"paragraphid",formatter:function(d){if(d.paragraphid!=undefined){return d.paragraphid}else{return""}},isshow:true},crawl_reposts_count:{filtername:"crawl_reposts_count",formatter:null,isshow:true},crawl_comments_count:{filtername:"crawl_comments_count",formatter:null,isshow:true},comments:{filtername:"comments",formatter:null,isshow:function(){if(c.element.displayContent.inArray("comment")){return true}else{return false}}},reposts:{filtername:"reposts",formatter:null,isshow:function(){if(c.element.displayContent.inArray("repost")){return true}else{return false}}},recommended:{filtername:"recommended",formatter:null,isshow:true},text:{filtername:"text",formatter:function(e){var g="";if(e.text==undefined){return g}if(c.postDataJson.facet.field.length>0){var d=c.postDataJson.facet.field[0].name;var f=getFilterValue(d,c.postDataJson.filtervalue);if((d=="account"||d=="url"||d=="topic"||d=="combinWord")&&!c.postDataJson.facet.field[0].isfeature){g=c.highlight(e.text[0],d,f[0].fieldvalue.value)}else{if(d=="country"||d=="country_code"||d=="province"||d=="province_code"||d=="city"||d=="city_code"||d=="district"||d=="district_code"){if(f.length==0){if(d=="city"||d=="district"){f=getFilterValue("province",c.postDataJson.filtervalue)}else{if(d=="city_code"||d=="district_code"){f=getFilterValue("province_code",c.postDataJson.filtervalue)}}}if(f[0]!=undefined){g=c.highlight(e.text[0],d,f[0].fieldvalue.value.text)}else{g=e.text[0]}}else{g=e.text[0]}}}else{g=e.text[0]}return g},link:function(d){if(d.page_url!=undefined){var e=d.page_url;return e}else{if(d.mid!=undefined&&d.mid!=null&&d.mid!="null"&&d.content_type!=2){return weiboMid2url(d.mid,d.userid,d.sourceid)}else{return""}}},isshow:true},article_taginfo:{filtername:"article_taginfo",formatter:null,isshow:true},tag_info:{filtername:"tag_info",formatter:null,isshow:true},thumbnail_pic:{filtername:"thumbnail_pic",formatter:null,isshow:true},bmiddle_pic:{filtername:"bmiddle_pic",formatter:null,isshow:true},created_at:{filtername:"created_at",formatter:function(d){if(d.created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.created_at)}else{return false}},isshow:true},source:{filtername:"source",formatter:function(d){if(d.source!=undefined&&d.source!=null&&d.source!=""){return d.source}else{return false}},isshow:true},reposts_count:{filtername:"reposts_count",formatter:function(d){if(d.reposts_count!=undefined&&d.reposts_count!=null){return d.reposts_count}else{return""}},isshow:true},comments_count:{filtername:"comments_count",formatter:function(d){if(d.comments_count!=undefined&&d.comments_count!=null){return d.comments_count}else{return""}},isshow:true},direct_comments_count:{filtername:"direct_comments_count",formatter:function(d){if(d.direct_comments_count!=undefined&&d.direct_comments_count!=null){return d.direct_comments_count}else{return""}},isshow:true},praises_count:{filtername:"praises_count",formatter:function(d){if(d.praises_count!=undefined&&d.praises_count!=null){return d.praises_count}else{return""}},isshow:true},followers_count:{filtername:"followers_count",formatter:function(d){if(d.followers_count!=undefined&&d.followers_count!=null){return d.followers_count}else{return""}},isshow:true},content_type:{filtername:"content_type",formatter:function(d){if(d.content_type!=undefined){return d.content_type}else{return false}},isshow:true},retweeted_screen_name:{filtername:"retweeted_screen_name",formatter:function(d){if(d.retweeted_screen_name!=undefined){return d.retweeted_screen_name}else{return""}},link:function(d){if(d.retweeted_userid!=undefined&&d.retweeted_userid!=null){return weiboUserurl(d.retweeted_userid,d.sourceid)}else{return""}},title:function(d){return d.retweeted_description},isshow:true},retweeted_verify:{filtername:"retweeted_verify",formatter:function(d){return getVerifiedImg(d.retweeted_verify,d.retweeted_verified_type)},title:function(d){if(d.retweeted_verified_reason!=undefined&&d.retweeted_verified_reason!=""&&d.retweeted_verified_reason!=null){return d.retweeted_verified_reason}else{return false}},isshow:true},retweeted_verified_reason:{filtername:"retweeted_verified_reason",formatter:function(d){},isshow:true},retweeted_text:{filtername:"retweeted_text",formatter:function(d){if(d.retweeted_text!=undefined){return d.retweeted_text[0]}},link:function(d){if(d.retweeted_page_url!=undefined){var e=d.retweeted_page_url;return e}else{if(d.retweeted_mid!=undefined&&d.retweeted_mid!=null&&d.retweeted_mid!="null"){return weiboMid2url(d.retweeted_mid,d.retweeted_userid,d.sourceid)}else{return""}}},isshow:true},retweeted_created_at:{filtername:"retweeted_created_at",formatter:function(d){if(d.retweeted_created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.retweeted_created_at)}else{return false}},isshow:true},retweeted_source:{filtername:"retweeted_source",formatter:function(d){if(d.retweeted_source!=undefined){return d.retweeted_source}else{return false}},isshow:true},retweeted_reposts_count:{filtername:"retweeted_reposts_count",formatter:function(d){if(d.retweeted_reposts_count){return d.retweeted_reposts_count}else{return""}},isshow:true},retweeted_comments_count:{filtername:"retweeted_comments_count",formatter:function(d){if(d.retweeted_comments_count!=undefined){return d.retweeted_comments_count}else{return""}},isshow:true},retweeted_direct_comments_count:{filtername:"retweeted_direct_comments_count",formatter:function(d){if(d.retweeted_direct_comments_count!=undefined){return d.retweeted_direct_comments_count}else{return""}},isshow:true},retweeted_praises_count:{filtername:"retweeted_praises_count",formatter:function(d){if(d.retweeted_praises_count!=undefined){return d.retweeted_praises_count}else{return""}},isshow:true},retweeted_followers_count:{filtername:"retweeted_followers_count",formatter:function(d){if(d.retweeted_followers_count!=undefined){return d.retweeted_followers_count}else{return""}},isshow:true},retweeted_read_count:{filtername:"retweeted_read_count",formatter:function(d){if(d.retweeted_read_count!=undefined){return d.retweeted_read_count}else{return""}},isshow:true},retweeted_thumbnail_pic:{filtername:"retweeted_thumbnail_pic",formatter:null,isshow:true},retweeted_bmiddle_pic:{filtername:"retweeted_bmiddle_pic",formatter:null,isshow:true},quote_screen_name:{filtername:"quote_screen_name",formatter:function(d){if(d.quote_screen_name!=undefined){return d.quote_screen_name}else{return""}},link:function(d){if(d.quote_userid!=undefined&&d.quote_userid!=null){return weiboUserurl(d.quote_userid,d.sourceid)}else{return""}},title:function(d){return d.quote_description},isshow:true},quote_verify:{filtername:"quote_verify",formatter:function(d){return getVerifiedImg(d.quote_verify,d.quote_verified_type)},title:function(d){if(d.quote_verified_reason!=undefined&&d.quote_verified_reason!=""&&d.quote_verified_reason!=null){return d.quote_verified_reason}else{return false}},isshow:true},quote_verified_reason:{filtername:"quote_verified_reason",formatter:function(d){},isshow:true},quote_text:{filtername:"quote_text",formatter:function(d){if(d.quote_text!=undefined){return d.quote_text[0]}},link:function(d){if(d.quote_page_url!=undefined){var e=d.quote_page_url;return e}else{if(d.quote_mid!=undefined&&d.quote_mid!=null&&d.quote_mid!="null"){return weiboMid2url(d.quote_mid,d.quote_userid,d.sourceid)}else{return""}}},isshow:true},quote_created_at:{filtername:"quote_created_at",formatter:function(d){if(d.quote_created_at!=undefined){return formatTime("yyyy-MM-dd hh:mm:ss",d.quote_created_at)}else{return false}},isshow:true},quote_source:{filtername:"quote_source",formatter:function(d){if(d.quote_source!=undefined){return d.quote_source}else{return false}},isshow:true},quote_reposts_count:{filtername:"quote_reposts_count",formatter:function(d){if(d.quote_reposts_count){return d.quote_reposts_count}else{return""}},isshow:true},quote_comments_count:{filtername:"quote_comments_count",formatter:function(d){if(d.quote_comments_count!=undefined){return d.quote_comments_count}else{return""}},isshow:true},quote_direct_comments_count:{filtername:"quote_direct_comments_count",formatter:function(d){if(d.quote_direct_comments_count!=undefined){return d.quote_direct_comments_count}else{return""}},isshow:true},quote_praises_count:{filtername:"quote_praises_count",formatter:function(d){if(d.quote_praises_count!=undefined){return d.quote_praises_count}else{return""}},isshow:true},quote_followers_count:{filtername:"quote_followers_count",formatter:function(d){if(d.quote_followers_count!=undefined){return d.quote_followers_count}else{return""}},isshow:true},quote_read_count:{filtername:"quote_read_count",formatter:function(d){if(d.quote_read_count!=undefined){return d.quote_read_count}else{return""}},isshow:true},quote_thumbnail_pic:{filtername:"quote_thumbnail_pic",formatter:null,isshow:true},quote_bmiddle_pic:{filtername:"quote_bmiddle_pic",formatter:null,isshow:true},quote_floor:{filtername:"quote_floor",formatter:null,isshow:true},quote_mid:{filtername:"quote_mid",formatter:null,isshow:true},quote_page_url:{filtername:"quote_page_url",formatter:null,isshow:true}};this.render=function(d){if($(c.targetID).attr("style")==undefined||$(c.targetID).attr("style")==""||$(c.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(c.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(c)}$(c.targetID).children(":not(h1)").remove();if(c.postDataJson.contrast!=null&&c.parentDOMID=="modelcondition"){createShowPartByName(config.controller+"weibo/parts/weibo_part_grouplist.js","WeiboPartGroupList",c,function(e){c.part4=e;c.part4.render(d)})}else{createShowPart(c.element.modelID,4,c,function(e){c.part4=e;c.part4.setList("list",c.showid);c.part4.render(d)})}};this.requestCallBack=function(d){c.requestData=d;c.part4.refresh(d);refreshOnsitePosition()};this.renewRequest=function(){c.element.firstRequest(c.postDataJson,c.requestCallBack,true,function(d){c.part4.errorCallBack(d)})};this.highlight=function(s,q,n){var k="";var g=0;if(false){var f=s.indexOf(n);if(f!=-1){g=f;while(c.PUNCTUATION.indexOf(s.charAt(g))==-1){if(s.charAt(g)!="@"){break}}}var t=new RegExp(n,"g");k=s.replace(t,"<em>"+n+"</em>");t=new RegExp("@<em>"+n+"</em>","g");k=s.replace(t,n)}else{for(var h=0;h<s.length;++h){switch(q){case"account":if(s.charAt(h)=="@"){g=h+1;while(c.PUNCTUATION.indexOf(s.charAt(g))==-1){++g}if(s.substr(h+1,g-h-1)==n.text){k+="<em>";k+=s.substr(h,g-h);k+="</em>";h=g}else{k+=s.substr(h,g-h);h=g}}else{k+=s.charAt(h)}break;case"url":if(h+4<s.length&&s.substr(h,4)=="http"){g=h+1;while(g<s.length&&!s.substr(g,1)==" "&&c.URLPUNCTUATION.indexOf(s.substr(g,1))==-1&&escape(s.substr(g,1)).length!=6){g++}if(s.substr(h,g-h).toLowerCase()==n){k+="<em>";k+=s.substr(h,g-h);k+="</em>";h=g}else{k+=s.substr(h,g-h);h=g}}else{k+=s.charAt(h)}break;case"combinWord":var r=n.split(",");g=h;while(g<s.length&&c.SENTENCEPUNCTUATION.indexOf(s.charAt(g))==-1){if(s.charAt(g)!="#"&&s.charAt(g)!="@"){++g}else{break}}var m=s.substr(h,g-h+1);var f=[];for(var o=0;o<r.length;++o){if(m.indexOf(r[o])!=-1){f.push(o)}}if(f.length==r.length){for(var o=0;o<r.length;++o){var t=new RegExp(r[o],"g");m=m.replace(t,"<em>"+r[o]+"</em>")}}k+=m;h=g;break;case"facettopic":var t=new RegExp("##","g");n=n.replace(t,",");t=/#/g;n=n.replace(t,"");var r=n.split(",");if(s.charAt(h)=="#"){g=h+1;while(s.charAt(g)!="#"){++g}if(g-h!=1){var l=s.substr(h,g-h).toLowerCase();var d=true;for(var p=0;p<r.length;++p){if(l.indexOf(r[p])==-1){d=false;break}}if(d){k+="<em>";k+=s.substr(h,g-h+1);k+="</em>";h=g}else{k+=s.substr(h,g-h);h=g}}else{k+=s.substr(h,g-h);h=g}}else{k+=s.charAt(h)}break;case"country":case"province":case"city":case"district":g=h;if(g+1<s.length&&s.substr(g,n.length).toLowerCase()==n){var e=true;while(g>0&&c.SENTENCEPUNCTUATION.indexOf(s.charAt(g))==-1){if(s.charAt(g)=="@"){e=false;break}--g}if(e){k+="<em>"+s.substr(h,n.length)+"</em>"}else{k+=s.substr(h,n.length)}h=h+n.length}else{k+=s.charAt(h)}break;default:return s}}}return k}};function WeixinRepostShow(b,d){var g=this;BaseShow.call(this);this.element=d;this.part4;this.configrange;this.rangestart;this.rangeend;this.rangegap;this.requestData;this.postDataJson;this.extendCount=5;this.everyRequestDepth=1;this.maxEveryCount=50;this.scopeTypeLimit=["number"];this.extendStatusArr=[];var a=[];var f;g.allowDownload=false;this.onEdit=function(){if(g.part4.onEdit){g.part4.onEdit()}g.hideSnapshotElementPosition()};this.onCancelEdit=function(){if(g.part4!=undefined&&g.part4.onCancelEdit){g.part4.onCancelEdit()}g.setSnapshotElementPosition();if(g.shade){g.shadow()}};this.getMaxDepth=function(){var h=$(g.targetID).attr("maxdepth");if(h!=undefined&&h!=""){return parseInt(h,10)}else{return 5}};this.setMaxDepth=function(h){$(g.targetID).attr("maxdepth",h);changePage(1);createSnapLayer();g.renewRequest();$.each(window.instances,function(j,k){if(k.instanceID==g.element.instanceID&&k.status==1){k.preUpdate()}})};function c(){var i;while(i=a.shift()){var h=g.part4.appendData(i);if(!h){break}}g.getData()}this.beforeRender=function(){g.part4.beforeRefresh()};this.createOnsiteFilter=function(){g.setDockFields([])};this.createModelshowSwitch=function(){};this.render=function(h){if($(g.targetID).attr("style")==undefined||$(g.targetID).attr("style")==""||$(g.targetID).attr("style").toLowerCase().indexOf("width")==-1||$(g.targetID).attr("style").toLowerCase().indexOf("height")==-1){defaultShowSize(g)}$(g.targetID).children(":not(h1)").remove();if(g.part4&&g.part4.destroy){g.part4.destroy();g.part4=null}createShowPartByName(config.controller+"public/part_sigma.js","SigmaPart",g,function(i){g.part4=i;g.part4.render(h)})};function e(h){if(h.depth<=g.getMaxDepth()||(h.depth-h.parent.depth)>=g.everyRequestDepth||h.depth==1){if(g.extendStatusArr[h.depth]!=undefined){if(typeof(h.requestlimit)=="undefined"&&typeof(h.requestcount)=="undefined"){h.requestlimit=0;h.requestcount=g.maxEveryCount}g.extendStatusArr[h.depth].nodes.push(h);g.extendStatusArr[h.depth].remain++;return true}else{return false}}else{return false}}this.getData=function(){for(var h=0;h<g.extendStatusArr.length;h++){if(g.extendStatusArr[h].remain>0&&g.extendStatusArr[h].nodes.length>0){while(1){var k=g.extendStatusArr[h].nodes.shift();console.log(k);if(k==undefined){break}if(k.requestlimit==0){a.push(k)}else{a.unshift(k)}var j=isNaN(k.requestcount)?g.maxEveryCount:k.requestcount;var l=k.depth==1?1:0;console.log(k);$.ajax({url:config.repostDatawx,data:{fatherid:k.weiboid,parentdepth:k.depth,limit:k.requestlimit,count:j,pathtype:g.showid,is_center:l},type:"get",dataType:"json",success:function(o){g.extendStatusArr[h].remain--;if(g.extendStatusArr[h].remain==0){g.part4.setProcessBar(100*(h+1)/g.extendStatusArr.length)}if(o&&o.error==undefined){for(var m=0;m<a.length;m++){console.log(o.weiboid);console.log(a[m]);if(a[m].weiboid==o.weiboid){console.log(a[m].weiboid);if(typeof(a[m].children)!="object"){$.extend(a[m],o)}else{a[m].children=a[m].children.concat(o.children)}if(f!=undefined&&o.weiboid.toString()==f.toString()){g.element.updateTime=getTimeSec();console.log(g.showid);if(g.showid=="weixinrepost"){g.element.firstrequestData[0].datalist[g.scope].showdata=a[m]}else{if(g.showid=="weibocomment"){g.element.firstrequestData[0].datalist[g.scope].showdata2=a[m]}}}break}}}else{if(o.error!=undefined){alert("请求错误");return false}}if(g.extendStatusArr[h].remain==0){c()}if(a.length==0){var i=0;for(var n=h;n<g.extendStatusArr.length;n++){i+=g.extendStatusArr[n].remain}if(i==0){g.part4.setProcessBar(100)}}},error:function(){g.errorCallBack("数据请求异常")}})}break}}};this.requestCallBack=function(l){console.log(l);l=[{categoryname:"",categoryvalue:"",totalcount:1,datalist:[{screen_name:"\u8499\u725b\u4e73\u4e1a",reposts_count:862,verify:3,userid:"1653196740",content_type:0,praises_count:69,sex:"m",verified_type:["2"],id:"4034912958921309",thumbnail_pic:["http://ww4.sinaimg.cn/thumbnail/6289c7c4jw1f95wgic65ej20m80ebq4b.jpg"],created_at:1477481676,followers_count:2312676,comments_count:420,bmiddle_pic:["http://ww4.sinaimg.cn/bmiddle/6289c7c4jw1f95wgic65ej20m80ebq4b.jpg"],guid:"1",articleid:"1",source:"360\u5b89\u5168\u6d4f\u89c8\u5668",sourceid:"1",mid:"4034912958921309",direct_reposts_count:798,text:["#\u4e3a\u7406\u60f3\u751f\u6d3b\u65b0\u5b9a\u4ef7# \u7701\u94b1\u5c31\u662f\u628a\u94b1\u82b1\u5728\u6700\u503c\u5f97\u7684\u5730\u65b9 \uff0c\u7269\u8d28\u4e0a\u53ef\u4ee5\u4e0d\u90a3\u4e48\u5bcc\u8db3\uff0c\u4f46\u7cbe\u795e\u4e16\u754c\u4e00\u5b9a\u8981\u8db3\u591f\u5145\u5b9e\u3002\u8f6c\u53d1\u8bc4\u8bba\u4f60\u7684\u7701\u94b1\u7f8e\u5b66@\u4e09\u4e2a\u597d\u53cb\uff0c\u5373\u6709\u673a\u4f1a\u83b7\u5f97@\u6caa\u6c5f @\u6668\u5149\u7c89\u4e1d\u56e2 @\u826f\u54c1\u94fa\u5b50 @\u8499\u725b\u4e73\u4e1a @\u7231\u56fd\u8005\u7535\u5b50 @ASUS\u534e\u7855 @\u6d77\u5c14\u667a\u6167\u53a8\u623f @\u7231\u56fd\u8005\u7535\u5b50 \u5171\u540c\u63d0\u4f9b\u7684\u5927\u793c\u5305 1\u4efd\uff0c11\u67084\u65e5\u516c\u5e03\u4e2d\u5956\u540d\u5355\u3002"],description:["\u6211\u4eec\u4ed8\u51fa\u6240\u6709\uff0c\u4e0d\u65ad\u5411\u524d\uff0c\u53ea\u4e3a\u8ba9\u4f60\u611f\u53d7\u5230\u8fd9\u6bcf\u4e00\u6ef4\u7684\u5e78\u798f\u3002\u6211\u4eec\u81f4\u529b\u6210\u4e3a\u8d28\u91cf\u6700\u597d\u3001\u6700\u4e13\u4e1a\u3001\u6700\u4e13\u6ce8\u7684\u4e73\u54c1\u4f01\u4e1a\u3002"],verified_reason:["\u8499\u725b\u5b98\u65b9\u5fae\u535a"],page_url:"http://weibo.com/1653196740/EeEfdBqQ5",source_host:"weibo.com",timeline_type:"weibo_limited",has_picture:1,created_day:26,register_time:1255326971,created_month:10,recommended:0,read_count:0,created_hour:19,created_year:2016,geo_coordinates_x:"0",geo_coordinates_y:"0",created_weekday:3,userguid:"1u_1653196740",repost_trend_cursor:1,annotations:"0",level:2,total_reposts_count:862,total_reach_count:6618382,emoAccount:["#1653196740##3#","#1851770484##3#","#1747360663##3#","#3919027776##3#","#1893934220##3#"],combinWord:["#\u5b9a\u4ef7##\u751f\u6d3b#","#\u540d\u5355##\u5956#","#\u7cbe\u795e##\u4e16\u754c#","#\u7701##\u94b1#"],province_code:["110000"],emoTopicCombinWord:["#\u5b9a\u4ef7##\u751f\u6d3b##3#"],city:["12"],district_code:["110112"],wb_topic_combinWord:["#\u5b9a\u4ef7##\u751f\u6d3b#"],emoCombin:["#\u5b9a\u4ef7##\u751f\u6d3b##3#","#\u540d\u5355##\u5956##3#","#\u7cbe\u795e##\u4e16\u754c##3#","#\u7701##\u94b1##3#"],original_pic:["http://ww4.sinaimg.cn/large/6289c7c4jw1f95wgic65ej20m80ebq4b.jpg"],province:["11"],similar:["1d26ea286f745a1d742a6ccfcbd0895c"],wb_topic_keyword:["\u7406\u60f3","\u751f\u6d3b","\u5b9a\u4ef7"],country_code:["CN"],emotion:["#\u7269\u8d28##3#","#\u8bc4\u8bba##3#","#\u540d\u5355##3#","#\u5b9a\u4ef7##3#","#\u7406\u60f3##3#","#\u5730\u65b9##3#","#\u673a\u4f1a##3#","#\u8f6c\u53d1##3#","#\u751f\u6d3b##3#","#\u63d0\u4f9b##3#","#\u82b1##3#","#\u7701##3#","#\u8db3\u591f##3#","#\u94b1##3#","#\u5927\u793c\u5305##3#","#\u5145\u5b9e##3#","#\u83b7\u5f97##3#","#\u7f8e\u5b66##3#","#\u516c\u5e03##3#","#\u4e16\u754c##3#","#\u503c\u5f97##3#","#\u5956##3#","#\u5bcc\u8db3##3#","#\u7cbe\u795e##3#","#\u5171\u540c##3#"],wb_topic:["\u4e3a\u7406\u60f3\u751f\u6d3b\u65b0\u5b9a\u4ef7"],emoTopicKeyword:["#\u7406\u60f3##3#","#\u751f\u6d3b##3#","#\u5b9a\u4ef7##3#"],originalText:["cfeff2127827d6cc376bd8ef2adaa782"],account:["1851770484","1893934220","1747360663","3919027776","1653196740"],city_code:["110100"],source_hostname:"\u65b0\u6d6a\u5fae\u535a"}]}];console.log(l);g.requestData=l;var n=g.getShowData(l);console.log(n);if(n==null){g.errorCallBack("查询的数据不存在.")}else{f=n.guid;g.extendStatusArr=[];var m={};m.keyProperty="weiboid";m.labelProperty="username";m.activeProperty="bridgeweibo";m.everyGetCount=g.maxEveryCount;m.addExtendNodesFun=e;m.allowPlay=config.repostShowAllowPlay;m.allowSearch=config.repostShowAllowSearch;m.allowChangeDepth=true;m.searchNodeCountFun=function(o,i,p){$.ajax({url:config.repostDatawx,data:{type:"searchcount",keyword:o,origid:encodeURIComponent(i),pathtype:g.showid},type:"get",dataType:"json",success:function(q){if(q&&q.error==undefined){p(parseInt(q.searchcount,10))}else{alert("查询失败")}},error:function(){g.errorCallBack("数据请求异常")}})};m.tooltipFormatter=function(r){var q="无";if(r.attr.gender=="1"){q="   男"}else{if(r.attr.gender=="2"){q="   女"}}var p="";if(parseInt(r.attr.verified,10)==1){p="认证用户"}var s="";if(parseInt(r.attr.bridgeweibo,10)==1){s='(<span style="color:#4be556;"><b>桥接微博</b></span>)'}var i="未知用户";if(r.attr.username){i=r.attr.username}var o="<b>"+i+"</b>"+s+"<br/>";o+="性别："+q+" "+p+"<br/>";if(r.attr.comments_count!=undefined){o+="评论："+r.attr.comments_count+"<br/>"}if(r.attr.direct_comments_count!=undefined){o+="直接评论："+r.attr.direct_comments_count+"<br/>"}if(r.attr.directcount!=undefined){o+="直接转发："+r.attr.directcount+"<br/>"}if(r.attr.totalcount!=undefined){o+="总  转   发："+r.attr.totalcount+"<br/>"}if(r.attr.reachcount!=undefined){o+="直接到达："+r.attr.reachcount+"<br/>"}if(r.attr.totalreach!=undefined){o+="总  到   达："+r.attr.totalreach+"<br/>"}if(r.attr.depth!=undefined){o+="传播深度："+r.attr.depth+""}if(r.attr.maxdepth!=undefined){o+="<br/>最大传播深度："+r.attr.maxdepth}if(r.attr.country!=undefined){o+="<br/>国家："+r.attr.country+""}if(r.attr.province!=undefined){o+="<br/>省份："+r.attr.province+""}if(r.attr.city!=undefined){o+="<br/>城市："+r.attr.city+""}if(r.attr.phonesystem!=undefined){o+="<br/>手机系统："+r.attr.phonesystem+""}return o};m.extendThreshold=g.extendCount;m.decideExtendFun=function(p,o){var i=parseInt(p.totalcount,10);if(p.totalcount==undefined||i==0){return false}if(parseInt(o.content_type,10)==0){return true}else{return i>=(parseInt(o.totalcount,10)-parseInt(o.directcount,10))/20}};m.onNodeClick=function(q){if(q.content&&q.content.length>0){var t=deepClone(g.postDataJson);var p=getFilterValue("sourceid",t.filtervalue,"int");t.filtervalue=[];t.filterrelation=null;t.output.data_limit=0;t.output.count=q.content.length;if(p.length>0){t.filtervalue.push(p[0])}for(var o=0;o<q.content.length;o++){var r=q.content[o];var s=createFiltervalue("weiboguid","string",r);t.filtervalue.push(s)}t.ispath=true;drillDownShow(t);delete t}};m.getMaxDepth=g.getMaxDepth;m.setMaxDepth=g.setMaxDepth;m.getAllData=function(){if(g.showid=="weixinrepost"){return g.requestData[0].datalist[g.scope].showdata}else{if(g.showid=="weibocomment"){return g.requestData[0].datalist[g.scope].showdata2}}};var k=g.getMaxDepth();for(var j=0;j<=k;j++){g.extendStatusArr.push({remain:0,nodes:[]})}a=[];m.maxNearCount=1000;m.minNearCount=10;var h=n.guid;$.ajax({url:config.repostDatawx+"?type=maxdirectcount&origid="+encodeURIComponent(h),data:{pathtype:g.showid},type:"GET",dataType:"json",contentType:"application/json",success:function(p){if(p&&p.error==undefined){var o=parseInt(p.max_directcount,10);if(o>m.maxNearCount){m.nearCountRatio=m.maxNearCount/o;m.maxChildrenCount=m.maxNearCount}else{m.maxChildrenCount=o;m.nearCountRatio=1}m.searchNodeFun=function(r,q,s){$.ajax({url:config.repostDatawx,type:"GET",dataType:"json",data:{type:"search",keyword:r,origid:q,countratio:m.nearCountRatio,maxcount:m.maxNearCount,mincount:m.minNearCount,pathtype:g.showid},success:function(t){if(t&&t.error==undefined){s(t)}else{alert("查询失败");s(null)}},error:function(u,t,v){alert(JSON.stringify(u));alert(JSON.stringify(t));alert(JSON.stringify(v));alert("操作异常");s(null)}})};if(g.showid=="weixinrepost"){if(typeof(n.showdata)!="object"){var i=n.guid;e({weiboid:i,depth:1});g.part4.init(m);g.part4.setProcessBar(0);g.getData()}else{g.part4.init(m);g.part4.appendWholeData(n.showdata)}}else{if(g.showid=="weibocomment"){if(typeof(n.showdata2)!="object"){var i=n.guid;e({weiboid:i,depth:1});g.part4.init(m);g.part4.setProcessBar(0);g.getData()}else{g.part4.init(m);g.part4.appendWholeData(n.showdata2)}}}}else{g.errorCallBack("查询的数据不存在.")}},error:function(){g.errorCallBack("数据请求异常")}})}};this.renewRequest=function(){g.element.firstRequest(g.postDataJson,g.requestCallBack,true,function(h){g.errorCallBack(h)})}};