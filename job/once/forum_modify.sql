use weibo_info_2;
/*用户表*/
ALTER TABLE `user_new`  DROP INDEX `id`,  ADD INDEX `id` (`id`);


ALTER TABLE `spiderconfig`  ADD COLUMN `templatetype` INT(11) NULL COMMENT '内容类型1.文章列表2.文章详情3.用户详情4.文章列表＋文章详情＋用户详情' AFTER `sourceid`,  ADD COLUMN `urlregex` TEXT NOT NULL COMMENT '分析抓取url正则表达式' AFTER `templatetype`,  ADD COLUMN `detailurlregex` TEXT NOT NULL COMMENT '详情url正则' AFTER `urlregex`;
ALTER TABLE `spiderconfig`  ADD COLUMN `urlconfigrule` TEXT NOT NULL COMMENT '生成url的配置json' AFTER `detailurlregex`;
ALTER TABLE `spiderconfig`  DROP COLUMN `sourceid`;
ALTER TABLE `spiderconfig`  CHANGE COLUMN `id` `id` INT(10) NOT NULL AUTO_INCREMENT COMMENT '配置ID' FIRST;



INSERT INTO `spiderconfig` (`id`, `name`, `content`, `templatetype`, `urlregex`, `detailurlregex`, `urlconfigrule`) VALUES (1, '新浪微博搜索ID', '// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DL"},{"nam":"class","val":"feed_list","cmp":"=]"},{"nam":"action-type","val":"feed_list_item"}]}],"tgt":{"nam":"mid"},"out":"id"}\n//url\n//#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"date"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"nam":"href"},"out":"page_url"}\n// 成组页面元素的分隔标志\n#SEP:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"class","val":"feed_list","cmp":"=]"},{"nam":"action-type","val":"feed_list_item"}]}\n// 翻页元素标志\n#NEXT:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"innerHTML","val":"下一页"}]}]}\n//页面URL\n#PREDUMP:{"tgtex":[{"type":{"func":"getLParameter(\'pageUrl\')"},"out":"page_url","glob":1}]}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"node-type","val":"feed_list"},{"nam":"parentNode.parentNode.class","val":"search_feed"},{"nam":"parentNode.parentNode.parentNode.parentNode.id","val":"pl_wb_feedlist"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"search_noresult"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"class","val":"W_textc"},{"nam":"innerText","val":"找到 0 条结果"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"no_login"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"gn_person"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"search_noresult"}]}\n#SANE:!{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"class","val":"W_textc"},{"nam":"innerText","val":"找到 0 条结果"}]}\n// 登录检查\n#LICHK:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"no_login"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"gn_person"}]}\n// 登录动作\n#LIACT:{"url":"http://weibo.com/login.php","conf":"Login","delay":30000}\n// 退出动作\n#LOACT:{"url":"http://weibo.com/logout.php","conf":"Logout","delay":3000}\n// 获取内容页面出现验证码的特征元素, 如果内容页面的验证码和登录页面的验证码元素完全相同，需要在内容验证码条件中增加内容页面有登录页面没有的元素，反之，登录页面的验证码元素也需要添加只有登录界面有而内容页面没有的特征元素\n#VERIFY:{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"code_ver"}]},"img":{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"node-type","val":"yzm_img"}]},"input":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"node-type","val":"yzm_input"}]},"btn":{"props":[{"nam":"nodeName","val":"A"},{"nam":"node-type","val":"yzm_submit"}]},"rego":1000}\n// 不同场景出现验证码的重试次数（0表示不重试，-1表示不限次数）,login/logout指的是父窗口如果发现在打开登录页面的时候出现内容级验证码，通过刷新父页面(rego并关闭子窗口)来去掉验证码（sina weibo曾出现过），不是login页面内的刷新\n#VERETRY:{"login":2,"logout":0,"default":0}\n// 翻页延迟毫秒数\n#DELAY:1000\n// 提交URL的类型\n#URLTYPE:importurl\n// 挂起警告毫秒数\n#HANGTIME:5000\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 登录配置文件\n#FILENAME:Login\n// 登录页面等待多长时间后去检查验证码文字是否从服务器获得\n#VERITIME: 3000\n#CONST:{"rego":1}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"gn_person"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 登录的特征元素, LOGIN.verify.cond 用于识别登录时是否有验证码控件，LOGIN.verify.img识别验证码图片，LOGIN.verify.input识别验证码输入框，LOGIN.verify.rego用于设置提交验证码后父窗口多长时间不能得到响应会刷新。\n#LOGIN:{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"node-type","val":"normal_form"},{"nam":"class","val":"W_login_form"}]},"usr":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]},"pwd":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"password"},{"nam":"parentNode.class","val":"inp password"},{"nam":"parentNode.parentNode.node-type","val":"password_box"}]},"btn":{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"btn_submit"},{"nam":"node-type","val":"submitBtn"},{"nam":"parentNode.parentNode.class","val":"info_list login_btn"}]}, "verify":{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"style.display","val":"none", "cmp": "!="},{"nam":"class","val":"info_list pin_code"},{"nam":"parentNode.class","val":"W_login_form"}]},"img":{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"node-type","val":"verifycode_image"}]},"input":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"node-type","val":"verifycode"},{"nam":"parentNode.class","val":"inp verify"},{"nam":"parentNode.parentNode.node-type","val":"verifycode_box"}]},"rego":1000}, "delay":1000}\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 退出配置文件\n#FILENAME:Logout\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100', 1, '', '', '');
INSERT INTO `spiderconfig` (`id`, `name`, `content`, `templatetype`, `urlregex`, `detailurlregex`, `urlconfigrule`) VALUES (2, '新浪微博搜索全部', '// 目标对象的必有属性，名和值分别代表必有属性及其依赖属性\n#REQUIRED:{"id":null,"mid":null,"user.id":null,"source":null,"retweeted_status.mid":"retweeted_status"}\n// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DL"},{"nam":"class","val":"feed_list","cmp":"=]"},{"nam":"action-type","val":"feed_list_item"}]}],"tgt":{"nam":"mid"},"out":"id"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"node-type","val":"feed_list_item_date"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"nam":"href"},"tran":"function(x){var y=x.substring(x.lastIndexOf(\'/\')+1);return WeiboUtility.url2mid(y);}","out":"mid"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"EM"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.node-type","val":"feed_list_content"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"#text"}]}],"tgt":{"nam":"data"},"out":"text+"},{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"type","val":"face"}]}],"tgt":{"nam":"title"},"out":"text+"},{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"type","val":"face","cmp":"!="}]}],"tgt":{"nam":"src"},"tran":"function(x){return \' \';}","out":"text+"}]}}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"feed_list_forward"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){if(x.indexOf(\'(\')<0)return 0;else return parseInt(x.substring(x.indexOf(\'(\')+1,x.indexOf(\')\')));}","out":"reposts_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"feed_list_comment"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){if(x.indexOf(\'(\')<0)return 0;else return parseInt(x.substring(x.indexOf(\'(\')+1,x.indexOf(\')\')));}","out":"comments_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"rel","val":"nofollow"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"nam":"innerText"},"out":"source^"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"rel","val":"nofollow","cmp":"!="},{"nam":"href","val":".weibo.com/","cmp":"[]"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"nam":"title"},"out":"source^"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"P"},{"nam":"class","val":"info W_linkb W_textb"},{"nam":"innerText","val":"来自未通过审核应用","cmp":"[]"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return \'未通过审核应用\';}","out":"source^"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"node-type","val":"feed_list_item_date"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"nam":"date"},"tran":"function(x){return parseInt(x)/1000;}","out":"created_at_ts"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"nick-name","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.node-type","val":"feed_list_content"}]}],"tgt":{"nam":"usercard"},"tran":"function(x){return x.substring(3, x.indexOf(\'&\'));}","out":"user.id"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"feed_list_geo_info"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.class","val":"map_data"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){return x.substring(x.lastIndexOf(\'-\')+1);}","out":"geo.txt"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"feed_list_geo_info"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.class","val":"map_data"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){return parseFloat(x.substring(x.indexOf(\'=\')+1,x.indexOf(\',\')));}","out":"geo.lon"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"feed_list_geo_info"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.class","val":"map_data"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){return parseFloat(x.substring(x.indexOf(\',\')+1,x.indexOf(\'&\')));}","out":"geo.lat"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"node-type","val":"feed_list_item_date"},{"nam":"parentNode.nodeName","val":"DD"},{"nam":"parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"nam":"href"},"tran":"function(x){var y=x.substring(x.lastIndexOf(\'/\')+1);return WeiboUtility.url2mid(y);}","out":"retweeted_status.mid"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"EM"},{"nam":"parentNode.nodeName","val":"DT"},{"nam":"parentNode.node-type","val":"feed_list_forwardContent"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"#text"}]}],"tgt":{"nam":"data"},"out":"retweeted_status.text+"},{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"type","val":"face"}]}],"tgt":{"nam":"title"},"out":"retweeted_status.text+"},{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"type","val":"face","cmp":"!="}]}],"tgt":{"nam":"src"},"tran":"function(x){return \' \';}","out":"retweeted_status.text+"}]}}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"node-type","val":"feed_list_item_date"},{"nam":"parentNode.nodeName","val":"DD"},{"nam":"parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"nam":"date"},"tran":"function(x){return x==\'\'?-1:parseInt(x)/1000;}","out":"retweeted_status.created_at_ts"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"nick-name","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DT"},{"nam":"parentNode.node-type","val":"feed_list_forwardContent"}]}],"tgt":{"nam":"usercard"},"tran":"function(x){return x.substring(3);}","out":"retweeted_status.user.id"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"innerText","val":"转发","cmp":"=]"},{"nam":"parentNode.nodeName","val":"SPAN"},{"nam":"parentNode.parentNode.nodeName","val":"DD"},{"nam":"parentNode.parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){if(x.indexOf(\'(\')<0)return 0;else return parseInt(x.substring(x.indexOf(\'(\')+1,x.indexOf(\')\')));}","out":"retweeted_status.reposts_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"innerText","val":"评论","cmp":"=]"},{"nam":"parentNode.nodeName","val":"SPAN"},{"nam":"parentNode.parentNode.nodeName","val":"DD"},{"nam":"parentNode.parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){if(x.indexOf(\'(\')<0)return 0;else return parseInt(x.substring(x.indexOf(\'(\')+1,x.indexOf(\')\')));}","out":"retweeted_status.comments_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"rel","val":"nofollow"},{"nam":"parentNode.nodeName","val":"DD"},{"nam":"parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"nam":"innerText"},"out":"retweeted_status.source^"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"rel","val":"nofollow","cmp":"!="},{"nam":"href","val":".weibo.com/","cmp":"[]"},{"nam":"parentNode.nodeName","val":"DD"},{"nam":"parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"nam":"title"},"out":"retweeted_status.source^"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DD"},{"nam":"class","val":"info W_linkb W_textb"},{"nam":"innerText","val":"来自未通过审核应用","cmp":"[]"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return \'未通过审核应用\';}","out":"retweeted_status.source^"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"class","val":"bigcursor"},{"nam":"action-type","val":"feed_list_media_img"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"feed_list","cmp":"=]"}]}],"tgt":{"nam":"src"},"out":"thumbnail_pic"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"class","val":"bigcursor"},{"nam":"action-type","val":"feed_list_media_img"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"comment W_textc W_linecolor W_bgcolor"}]}],"tgt":{"nam":"src"},"out":"retweeted_status.thumbnail_pic"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"class","val":"bigcursor"},{"nam":"action-type","val":"fl_pics"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"feed_list","cmp":"=]"}]}],"tgt":{"nam":"src"},"out":"square_pic[]"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"class","val":"bigcursor"},{"nam":"action-type","val":"fl_pics"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"comment W_textc W_linecolor W_bgcolor"}]}],"tgt":{"nam":"src"},"out":"retweeted_status.square_pic[]"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"node-type","val":"feed_list_item_date"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"post":{"typ":"url","nam":"href","conf":"UserInfo","tran":"function(x){var r=x.lastIndexOf(\'/\');return r>0?(x.substring(0,r+1)+\'info\'):x;}","lim":20,"dur":60000,"retry":1}},"tran":"getResultObject"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"node-type","val":"feed_list_item_date"},{"nam":"parentNode.nodeName","val":"DD"},{"nam":"parentNode.class","val":"info W_linkb W_textb"},{"nam":"date","val":"","cmp":"!="}]}],"tgt":{"post":{"typ":"url","nam":"href","conf":"UserInfo","tran":"function(x){var r=x.lastIndexOf(\'/\');return r>0?(x.substring(0,r+1)+\'info\'):x;}","lim":20,"dur":60000,"retry":1}},"tran":"function(x){var y=getResultObject(x);if(!y)return null;else return y.user;}","out":"retweeted_status.user*"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"node-type","val":"feed_list_item_date"},{"nam":"parentNode.nodeName","val":"DD"},{"nam":"parentNode.class","val":"info W_linkb W_textb"},{"nam":"date","val":"","cmp":"!="}]}],"tgt":{"post":{"typ":"url","nam":"href","conf":"OrigID","lim":20,"dur":60000,"retry":1}},"tran":"getResultObject","out":"retweeted_status*"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"date"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"nam":"href"},"out":"page_url"}\n// 成组页面元素的分隔标志\n#SEP:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"class","val":"feed_list","cmp":"=]"},{"nam":"action-type","val":"feed_list_item"}]}\n// 翻页元素标志\n#NEXT:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"innerHTML","val":"下一页"}]}]}\n//页面URL\n#PREDUMP:{"tgtex":[{"type":{"func":"getLParameter(\'pageUrl\')"},"out":"page_url","glob":1}]}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"class","val":"feed_list","cmp":"=]"},{"nam":"action-type","val":"feed_list_item"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"search_noresult"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"class","val":"W_textc"},{"nam":"innerText","val":"找到 0 条结果"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"search_noresult"}]}\n#SANE:!{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"class","val":"W_textc"},{"nam":"innerText","val":"找到 0 条结果"}]}\n// 登录检查\n#LICHK:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"no_login"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"gn_person"}]}\n// 登录动作: LIACT.delay 指spider等待多少秒后重新刷新父页面(rego)如果登录是自动的并且没有返回，它必须>2000, 因为如果登录页面第一次没有验证码，第二次有，spider用2秒的固定timer保证服务器给响应，如果没有响应假定出现验证码，重新登录，它必须比LIACT.delay短，否则父页面会被刷新，重新 打开登录页面，结果没有验证码, 进入死循环。\n#LIACT:{"url":"http://weibo.com/login.php","conf":"Login","delay":30000}\n// 退出动作\n#LOACT:{"url":"http://weibo.com/logout.php","conf":"Logout","delay":3000}\n// 获取内容页面出现验证码的特征元素, 如果内容页面的验证码和登录页面的验证码元素完全相同，需要在内容验证码条件中增加内容页面有登录页面没有的元素，反之，登录页面的验证码元素也需要添加只有登录界面有而内容页面没有的特征元素\n#VERIFY:{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"code_ver"}]},"img":{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"node-type","val":"yzm_img"}]},"input":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"node-type","val":"yzm_input"}]},"btn":{"props":[{"nam":"nodeName","val":"A"},{"nam":"node-type","val":"yzm_submit"}]},"rego":1000}\n// 不同场景出现验证码的重试次数（0表示不重试，-1表示不限次数）,login/logout指的是父窗口如果发现在打开登录页面的时候出现内容级验证码，通过刷新父页面(rego并关闭子窗口)来去掉验证码（sina weibo曾出现过），不是login页面内的刷新\n#VERETRY:{"login":2,"logout":0,"default":0}\n// 翻页延迟毫秒数\n#DELAY:1000\n// 提交URL的类型\n#URLTYPE:importweibo\n// 不同类型后处理动作并发限制\n#POSTLIM:10\n// 挂起警告毫秒数\n#HANGTIME:60000\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 用户信息配置文件\n#FILENAME:UserInfo\n// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"昵称"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"昵称"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"out":"user.screen_name"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"所在地"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"所在地"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"out":"user.location"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"性别"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"性别"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"tran":"function(x){if(x==\'男\')return \'m\';else return \'f\';}","out":"user.gender"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"简介"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"简介"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"out":"user.description"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"博客"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"博客"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.firstChild.innerHTML"},"out":"user.url"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"个性域名"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"个性域名"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.firstChild.innerHTML"},"tran":"function(x){return x.substring(x.lastIndexOf(\'/\')+1);}","out":"user.domain"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"follow"},{"nam":"parentNode.parentNode.parentNode.parentNode.id","val":"pl_profile_photo"}]},{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"follow"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"pf_head S_bg4 S_line1"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.friends_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=follow","cmp":"[="},{"nam":"nextSibling.nodeName","val":"SPAN"},{"nam":"nextSibling.innerHTML","val":"关注"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.friends_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"fans"},{"nam":"parentNode.parentNode.parentNode.parentNode.id","val":"pl_profile_photo"}]},{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"fans"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"pf_head S_bg4 S_line1"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.followers_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=fans","cmp":"[="},{"nam":"nextSibling.nodeName","val":"SPAN"},{"nam":"nextSibling.innerHTML","val":"粉丝"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.followers_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"weibo"},{"nam":"parentNode.parentNode.parentNode.parentNode.id","val":"pl_profile_photo"}]},{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"weibo"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"pf_head S_bg4 S_line1"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.statuses_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=weibo","cmp":"[="},{"nam":"nextSibling.nodeName","val":"SPAN"},{"nam":"nextSibling.innerHTML","val":"微博"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.statuses_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.class","val":"icon_bed"}]},{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"username"}]}],"tgt":{"nam":"title"},"out":"user.verified_reason"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.class","val":"icon_bed"}]},{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"username"}]}],"tgt":{"nam":"class"},"tran":"function(x){if(!x)return null;switch(x.substring(x.indexOf(\' \')+1)){case \'approve\':return 0;case \'approve_co\':return -2;default:return -3;}}","out":"user.verified_type"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_star_info bsp S_txt2"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.id","val":"pl_profile_extraInfo"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_star_info bsp S_txt2"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"pf_info_right"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"&loc=daren","cmp":"[="}]}],"tgt":{"nam":"innerText"},"tran":"function(x) {switch(x){case \'初级达人\': return 1;case \'中级达人\': return 2;case \'高级达人\': return 3;case \'白银达人\': return 4;case \'黄金达人\': return 5;case \'白金达人\': return 6;case \'星钻达人\': return 7;case \'晶钻达人\': return 8;case \'璀钻达人\': return 9;default:return 0;}}","out":"user.level"},{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"&loc=darenscore","cmp":"[="}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseFloat(x);}","out":"user.daren.score"},{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"&loc=darenint","cmp":"[="}]}],"tgt":{"nam":"innerText"},"out":"user.daren.interest[]"}]}}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"EM"},{"nam":"class","val":"S_txt2"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"moreinfo"}]}],"tgt":{"nam":"innerHTML"},"out":"user.description"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.id","val":"place"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"username"}]}],"tgt":{"nam":"title"},"out":"user.screen_name"}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"PRF_title_b"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"PRF_modwrap clearfix"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=follow","cmp":"[="}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"W_btn_b"},{"nam":"action-type","val":"submit"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"right"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]}\n#SANE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}\n#SANE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"PRF_title_b"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"PRF_modwrap clearfix"}]}\n#SANE:{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=follow","cmp":"[="}]}\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 原创ID配置文件\n#FILENAME:OrigID\n// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"node-type","val":"weibo_info"},{"nam":"parentNode.class","val":"WB_detail"}]}],"tgt":{"nam":"mid"},"out":"id"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"node-type","val":"feed_list"},{"nam":"parentNode.class","val":"WB_detail"}]}],"tgt":{"nam":"mid"},"out":"id"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DL"},{"nam":"class","val":"feed_list clearfix feed_list_hover W_no_border"}]}],"tgt":{"nam":"mid"},"out":"id"}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"node-type","val":"weibo_info"},{"nam":"parentNode.class","val":"WB_detail"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"node-type","val":"feed_list"},{"nam":"parentNode.class","val":"WB_detail"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"class","val":"feed_list clearfix feed_list_hover W_no_border"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 登录配置文件\n#FILENAME:Login\n#CONST:{"rego":1}\n// 登录页面等待多长时间后去检查验证码文字是否从服务器获得\n#VERITIME: 3000\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"gn_person"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 登录的特征元素, LOGIN.verify.cond 用于识别登录时是否有验证码控件，LOGIN.verify.img识别验证码图片，LOGIN.verify.input识别验证码输入框，LOGIN.verify.rego用于设置提交验证码后父窗口多长时间不能得到响应会刷新。\n#LOGIN:{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"node-type","val":"normal_form"},{"nam":"class","val":"W_login_form"}]},"usr":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]},"pwd":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"password"},{"nam":"parentNode.class","val":"inp password"},{"nam":"parentNode.parentNode.node-type","val":"password_box"}]},"btn":{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"btn_submit"},{"nam":"node-type","val":"submitBtn"},{"nam":"parentNode.parentNode.class","val":"info_list login_btn"}]}, "verify":{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"style.display","val":"none", "cmp": "!="},{"nam":"class","val":"info_list pin_code"},{"nam":"parentNode.class","val":"W_login_form"}]},"img":{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"node-type","val":"verifycode_image"}]},"input":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"node-type","val":"verifycode"},{"nam":"parentNode.class","val":"inp verify"},{"nam":"parentNode.parentNode.node-type","val":"verifycode_box"}]},"rego":1000}, "delay":1000}\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 退出配置文件\n#FILENAME:Logout\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n', 4, '', '', '');
INSERT INTO `spiderconfig` (`id`, `name`, `content`, `templatetype`, `urlregex`, `detailurlregex`, `urlconfigrule`) VALUES (3, '新浪微博关注ID', '// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"class","val":"name"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"pf_name bsp clearfix"}]}],"tgt":{"nam":"innerText"},"out":"name"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"W_f14 S_func1"},{"nam":"parentNode.class","val":"name"}]}],"tgt":{"nam":"usercard"},"tran":"function(x){if(x.indexOf(\'id=\')==0)return x.substring(3);else return null;}","out":"ids[]"}\n// 翻页元素标志\n#NEXT:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"innerText","val":"下一页"},{"nam":"class","val":"W_btn_c"},{"nam":"bpfilter","val":"page"}]}],"distinct":"href"}\n//页面URL\n#PREDUMP:{"tgtex":[{"type":{"func":"getLParameter(\'pageUrl\')"},"out":"page_url","glob":1}]}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"UL"},{"nam":"class","val":"cnfList"},{"nam":"node-type","val":"userListBox"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"id","val":"pl_login_login"},{"nam":"class","val":"warpC"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"id","val":"pl_login_login"},{"nam":"class","val":"warpC"}]}\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n// 翻页延迟毫秒数\n#DELAY:1000\n// 提交URL的类型\n#URLTYPE:importuser\n// 挂起警告毫秒数\n#HANGTIME:5000', 1, '', '', '');
INSERT INTO `spiderconfig` (`id`, `name`, `content`, `templatetype`, `urlregex`, `detailurlregex`, `urlconfigrule`) VALUES (4, '新浪微博关注全部', '// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"class","val":"name"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"pf_name bsp clearfix"}]}],"tgt":{"nam":"innerText"},"out":"name"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"W_f14 S_func1"},{"nam":"parentNode.class","val":"name"}]}],"tgt":{"nam":"usercard"},"tran":"function(x){if(x.indexOf(\'id=\')==0)return x.substring(3);else return null;}","out":"ids[]"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"W_f14 S_func1"},{"nam":"parentNode.class","val":"name"}]}],"tgt":{"post":{"typ":"url","nam":"usercard","conf":"UserInfo","tran":"function(x){if(x.indexOf(\'id=\')!=0)return null;return \'http://weibo.com/\'+x.substring(3)+\'/info\';}","lim":20,"dur":60000,"retry":1}},"tran":"function(x){var y=getResultObject(x);if(!y)return null;else return y.user;}","out":"users[]"}\n// 翻页元素标志\n#NEXT:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"innerText","val":"下一页"},{"nam":"class","val":"W_btn_c"},{"nam":"bpfilter","val":"page"}]}],"distinct":"href"}\n//页面URL\n#PREDUMP:{"tgtex":[{"type":{"func":"getLParameter(\'pageUrl\')"},"out":"page_url","glob":1}]}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"UL"},{"nam":"class","val":"cnfList"},{"nam":"node-type","val":"userListBox"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"id","val":"pl_login_login"},{"nam":"class","val":"warpC"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"id","val":"pl_login_login"},{"nam":"class","val":"warpC"}]}\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n// 翻页延迟毫秒数\n#DELAY:1000\n// 提交URL的类型\n#URLTYPE:importuser\n// 挂起警告毫秒数\n#HANGTIME:5000\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 用户信息配置文件\n#FILENAME:UserInfo\n// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"昵称"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"昵称"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"out":"user.screen_name"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"所在地"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"所在地"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"out":"user.location"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"性别"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"性别"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"tran":"function(x){if(x==\'男\')return \'m\';else return \'f\';}","out":"user.gender"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"简介"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"简介"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"out":"user.description"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"博客"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"博客"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.firstChild.innerHTML"},"out":"user.url"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"个性域名"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"个性域名"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.firstChild.innerHTML"},"tran":"function(x){return x.substring(x.lastIndexOf(\'/\')+1);}","out":"user.domain"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"follow"},{"nam":"parentNode.parentNode.parentNode.parentNode.id","val":"pl_profile_photo"}]},{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"follow"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"pf_head S_bg4 S_line1"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.friends_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=follow","cmp":"[="},{"nam":"nextSibling.nodeName","val":"SPAN"},{"nam":"nextSibling.innerHTML","val":"关注"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.friends_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"fans"},{"nam":"parentNode.parentNode.parentNode.parentNode.id","val":"pl_profile_photo"}]},{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"fans"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"pf_head S_bg4 S_line1"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.followers_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=fans","cmp":"[="},{"nam":"nextSibling.nodeName","val":"SPAN"},{"nam":"nextSibling.innerHTML","val":"粉丝"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.followers_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"weibo"},{"nam":"parentNode.parentNode.parentNode.parentNode.id","val":"pl_profile_photo"}]},{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"weibo"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"pf_head S_bg4 S_line1"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.statuses_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=weibo","cmp":"[="},{"nam":"nextSibling.nodeName","val":"SPAN"},{"nam":"nextSibling.innerHTML","val":"微博"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.statuses_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.class","val":"icon_bed"}]},{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"username"}]}],"tgt":{"nam":"title"},"out":"user.verified_reason"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.class","val":"icon_bed"}]},{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"username"}]}],"tgt":{"nam":"class"},"tran":"function(x){if(!x)return null;switch(x.substring(x.indexOf(\' \')+1)){case \'approve\':return 0;case \'approve_co\':return -2;default:return -3;}}","out":"user.verified_type"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_star_info bsp S_txt2"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.id","val":"pl_profile_extraInfo"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_star_info bsp S_txt2"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"pf_info_right"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"&loc=daren","cmp":"[="}]}],"tgt":{"nam":"innerText"},"tran":"function(x) {switch(x){case \'初级达人\': return 1;case \'中级达人\': return 2;case \'高级达人\': return 3;case \'白银达人\': return 4;case \'黄金达人\': return 5;case \'白金达人\': return 6;case \'星钻达人\': return 7;case \'晶钻达人\': return 8;case \'璀钻达人\': return 9;default:return 0;}}","out":"user.level"},{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"&loc=darenscore","cmp":"[="}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseFloat(x);}","out":"user.daren.score"},{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"&loc=darenint","cmp":"[="}]}],"tgt":{"nam":"innerText"},"out":"user.daren.interest[]"}]}}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"EM"},{"nam":"class","val":"S_txt2"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"moreinfo"}]}],"tgt":{"nam":"innerHTML"},"out":"user.description"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.id","val":"place"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"username"}]}],"tgt":{"nam":"title"},"out":"user.screen_name"}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"PRF_title_b"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"PRF_modwrap clearfix"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=follow","cmp":"[="}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"W_btn_b"},{"nam":"action-type","val":"submit"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"right"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]}\n#SANE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}\n#SANE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"PRF_title_b"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"PRF_modwrap clearfix"}]}\n#SANE:{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=follow","cmp":"[="}]}', 4, '', '', '');
INSERT INTO `spiderconfig` (`id`, `name`, `content`, `templatetype`, `urlregex`, `detailurlregex`, `urlconfigrule`) VALUES (5, '新浪微博转发ID', '// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.node-type","val":"forward_detail"}]},{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"feed_repeat"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){var p=x.indexOf(\'&page=\');return p>0?parseInt(x.substring(p+6)):0;}","out":"page","glob":1}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DL"},{"nam":"mid","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"}]}],"tgt":{"nam":"mid"},"out":"id"}\n//url\n//#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"S_link2 WB_time"},{"nam":"parentNode.nodeName","val":"EM"}]}],"tgt":{"nam":"href"},"out":"page_url"}\n// 成组页面元素的分隔标志\n#SEP:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"mid","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"}]}\n// 翻页元素标志\n#NEXT:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.node-type","val":"forward_detail"}]},{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"feed_repeat"}]}],"distinct":"outerHTML"}\n//页面URL\n#PREDUMP:{"tgtex":[{"type":{"func":"getLParameter(\'pageUrl\')"},"out":"page_url","glob":1}]}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"mid","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.class","val":"comment_lists"},{"nam":"parentNode.parentNode.node-type","val":"forward_detail"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"W_empty"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.class","val":"comment_lists"},{"nam":"parentNode.parentNode.node-type","val":"forward_detail"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"mid","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.parentNode.class","val":"feed_repeat"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"node-type","val":"tip"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.parentNode.class","val":"feed_repeat"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"tips_note"},{"nam":"node-type","val":"deleted_msg"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.parentNode.class","val":"feed_repeat"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"no_login"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"gn_person"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n// 登录检查\n#LICHK:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"no_login"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"gn_person"}]}\n// 登录动作: LIACT.delay 指spider等待多少秒后重新刷新父页面(rego)如果登录是自动的并且没有返回，它必须>2000, 因为如果登录页面第一次没有验证码，第二次有，spider用2秒的固定timer保证服务器给响应，如果没有响应假定出现验证码，重新登录，它必须比LIACT.delay短，否则父页面会被刷新，重新 打开登录页面，结果没有验证码, 进入死循环。\n#LIACT:{"url":"http://weibo.com/login.php","conf":"Login","delay":5000}\n// 退出动作\n#LOACT:{"url":"http://weibo.com/logout.php","conf":"Logout","delay":3000}\n// 翻页延迟毫秒数\n#DELAY:1000\n// 提交URL的类型\n#URLTYPE:importurl\n// 挂起警告毫秒数\n#HANGTIME:5000\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 登录配置文件\n#FILENAME:Login\n#CONST:{"rego":1}\n// 登录页面等待多长时间后去检查验证码文字是否从服务器获得\n#VERITIME: 3000\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"gn_person"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 登录的特征元素, LOGIN.verify.cond 用于识别登录时是否有验证码控件，LOGIN.verify.img识别验证码图片，LOGIN.verify.input识别验证码输入框，LOGIN.verify.rego用于设置提交验证码后父窗口多长时间不能得到响应会刷新。\n#LOGIN:{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"node-type","val":"normal_form"},{"nam":"class","val":"W_login_form"}]},"usr":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]},"pwd":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"password"},{"nam":"parentNode.class","val":"inp password"},{"nam":"parentNode.parentNode.node-type","val":"password_box"}]},"btn":{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"btn_submit"},{"nam":"node-type","val":"submitBtn"},{"nam":"parentNode.parentNode.class","val":"info_list login_btn"}]}, "verify":{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"style.display","val":"none", "cmp": "!="},{"nam":"class","val":"info_list pin_code"},{"nam":"parentNode.class","val":"W_login_form"}]},"img":{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"node-type","val":"verifycode_image"}]},"input":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"node-type","val":"verifycode"},{"nam":"parentNode.class","val":"inp verify"},{"nam":"parentNode.parentNode.node-type","val":"verifycode_box"}]},"rego":1000}, "delay":1000}\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 退出配置文件\n#FILENAME:Logout\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n', 1, '', '', '');
INSERT INTO `spiderconfig` (`id`, `name`, `content`, `templatetype`, `urlregex`, `detailurlregex`, `urlconfigrule`) VALUES (6, '新浪微博转发全部', '// 目标对象的必有属性，名和值分别代表必有属性及其依赖属性\n#REQUIRED:{"id":null,"mid":null,"user.id":null,"retweeted_status.id":null}\n// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.node-type","val":"forward_detail"}]},{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"feed_repeat"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){var p=x.indexOf(\'&page=\');return p>0?parseInt(x.substring(p+6)):0;}","out":"page","glob":1}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DL"},{"nam":"mid","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"}]}],"tgt":{"nam":"mid"},"out":"id"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"feed_list_forward"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){var y=x.substring(x.indexOf(\'&url=\')+5);var z=y.substring(0,y.indexOf(\'&\'));return WeiboUtility.url2mid(z.substring(z.lastIndexOf(\'/\')+1));}","out":"mid"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"feed_list_forward"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){var y=x.substring(x.indexOf(\'&uid=\')+5);return y.substring(0,y.indexOf(\'&\'));}","out":"user.id"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"feed_list_forward"}]}],"tgt":{"post":{"typ":"url","nam":"action-data","conf":"RepostInfo","tran":"function(x){var y=x.substring(x.indexOf(\'&url=\')+5);var z=y.substring(0,y.indexOf(\'&\'));return z;}","lim":20,"dur":60000,"retry":1}},"tran":"getResultObject"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"feed_list_forward"}]}],"tgt":{"post":{"typ":"url","nam":"action-data","conf":"UserInfo","tran":"function(x){var y=x.substring(x.indexOf(\'&url=\')+5);var z=y.substring(0,y.indexOf(\'&\'));return z.substring(0,z.lastIndexOf(\'/\')+1)+\'info\';}","lim":20,"dur":60000,"retry":1}},"tran":"getResultObject"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"feed_list_forward"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){var y=x.substring(x.indexOf(\'rootmid=\'));return y.substring(8,y.indexOf(\'&\'));}","out":"retweeted_status.id"}\n//url\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"S_link2 WB_time"},{"nam":"parentNode.nodeName","val":"EM"}]}],"tgt":{"nam":"href"},"out":"page_url"}\n// 成组页面元素的分隔标志\n#SEP:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"mid","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"}]}\n// 翻页元素标志\n#NEXT:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.node-type","val":"forward_detail"}]},{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"feed_repeat"}]}],"distinct":"outerHTML"}\n//页面URL\n#PREDUMP:{"tgtex":[{"type":{"func":"getLParameter(\'pageUrl\')"},"out":"page_url","glob":1}]}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"mid","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.class","val":"comment_lists"},{"nam":"parentNode.parentNode.node-type","val":"forward_detail"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"W_empty"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.class","val":"comment_lists"},{"nam":"parentNode.parentNode.node-type","val":"forward_detail"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"mid","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.parentNode.class","val":"feed_repeat"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"node-type","val":"tip"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.parentNode.class","val":"feed_repeat"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"tips_note"},{"nam":"node-type","val":"deleted_msg"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.parentNode.class","val":"feed_repeat"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"no_login"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"gn_person"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n// 登录检查\n#LICHK:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"no_login"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"gn_person"}]}\n// 登录动作: LIACT.delay 指spider等待多少秒后重新刷新父页面(rego)如果登录是自动的并且没有返回，它必须>2000, 因为如果登录页面第一次没有验证码，第二次有，spider用2秒的固定timer保证服务器给响应，如果没有响应假定出现验证码，重新登录，它必须比LIACT.delay短，否则父页面会被刷新，重新 打开登录页面，结果没有验证码, 进入死循环。\n#LIACT:{"url":"http://weibo.com/login.php","conf":"Login","delay":5000}\n// 退出动作\n#LOACT:{"url":"http://weibo.com/logout.php","conf":"Logout","delay":3000}\n// 翻页延迟毫秒数\n#DELAY:1000\n// 提交URL的类型\n#URLTYPE:importweibo\n// 不同类型后处理动作并发限制\n#POSTLIM:10\n// 挂起警告毫秒数\n#HANGTIME:60000\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 用户信息配置文件\n#FILENAME:UserInfo\n// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"昵称"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"昵称"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"out":"user.screen_name"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"所在地"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"所在地"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"out":"user.location"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"性别"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"性别"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"tran":"function(x){if(x==\'男\')return \'m\';else return \'f\';}","out":"user.gender"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"简介"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"简介"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"out":"user.description"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"博客"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"博客"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.firstChild.innerHTML"},"out":"user.url"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"个性域名"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"个性域名"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.firstChild.innerHTML"},"tran":"function(x){return x.substring(x.lastIndexOf(\'/\')+1);}","out":"user.domain"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"follow"},{"nam":"parentNode.parentNode.parentNode.parentNode.id","val":"pl_profile_photo"}]},{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"follow"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"pf_head S_bg4 S_line1"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.friends_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=follow","cmp":"[="},{"nam":"nextSibling.nodeName","val":"SPAN"},{"nam":"nextSibling.innerHTML","val":"关注"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.friends_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"fans"},{"nam":"parentNode.parentNode.parentNode.parentNode.id","val":"pl_profile_photo"}]},{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"fans"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"pf_head S_bg4 S_line1"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.followers_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=fans","cmp":"[="},{"nam":"nextSibling.nodeName","val":"SPAN"},{"nam":"nextSibling.innerHTML","val":"粉丝"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.followers_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"weibo"},{"nam":"parentNode.parentNode.parentNode.parentNode.id","val":"pl_profile_photo"}]},{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"weibo"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"pf_head S_bg4 S_line1"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.statuses_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=weibo","cmp":"[="},{"nam":"nextSibling.nodeName","val":"SPAN"},{"nam":"nextSibling.innerHTML","val":"微博"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.statuses_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.class","val":"icon_bed"}]},{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"username"}]}],"tgt":{"nam":"title"},"out":"user.verified_reason"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.class","val":"icon_bed"}]},{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"username"}]}],"tgt":{"nam":"class"},"tran":"function(x){if(!x)return null;switch(x.substring(x.indexOf(\' \')+1)){case \'approve\':return 0;case \'approve_co\':return -2;default:return -3;}}","out":"user.verified_type"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_star_info bsp S_txt2"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.id","val":"pl_profile_extraInfo"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_star_info bsp S_txt2"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"pf_info_right"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"&loc=daren","cmp":"[="}]}],"tgt":{"nam":"innerText"},"tran":"function(x) {switch(x){case \'初级达人\': return 1;case \'中级达人\': return 2;case \'高级达人\': return 3;case \'白银达人\': return 4;case \'黄金达人\': return 5;case \'白金达人\': return 6;case \'星钻达人\': return 7;case \'晶钻达人\': return 8;case \'璀钻达人\': return 9;default:return 0;}}","out":"user.level"},{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"&loc=darenscore","cmp":"[="}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseFloat(x);}","out":"user.daren.score"},{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"&loc=darenint","cmp":"[="}]}],"tgt":{"nam":"innerText"},"out":"user.daren.interest[]"}]}}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"EM"},{"nam":"class","val":"S_txt2"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"moreinfo"}]}],"tgt":{"nam":"innerHTML"},"out":"user.description"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.id","val":"place"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"username"}]}],"tgt":{"nam":"title"},"out":"user.screen_name"}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"PRF_title_b"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"PRF_modwrap clearfix"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=follow","cmp":"[="}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"W_btn_b"},{"nam":"action-type","val":"submit"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"right"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]}\n#SANE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}\n#SANE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"PRF_title_b"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"PRF_modwrap clearfix"}]}\n#SANE:{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=follow","cmp":"[="}]}\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 转发信息配置文件\n#FILENAME:RepostInfo\n// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"EM"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.parentNode.node-type","val":"feed_list_content"},{"nam":"parentNode.parentNode.class","val":"WB_text"}]},{"props":[{"nam":"nodeName","val":"EM"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.node-type","val":"feed_list_content"},{"nam":"parentNode.parentNode.class","val":"content"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"#text"}]}],"tgt":{"nam":"data"},"out":"text+"},{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"type","val":"face"}]}],"tgt":{"nam":"title"},"out":"text+"},{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"type","val":"face","cmp":"!="}]}],"tgt":{"nam":"src"},"tran":"function(x){return \' \';}","out":"text+"}]}}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"node-type","val":"forward_counter"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){if(x.indexOf(\'(\')<0)return 0;else return parseInt(x.substring(x.indexOf(\'(\')+1,x.indexOf(\')\')));}","out":"reposts_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"node-type","val":"comment_counter"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){if(x.indexOf(\'(\')<0)return 0;else return parseInt(x.substring(x.indexOf(\'(\')+1,x.indexOf(\')\')));}","out":"comments_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"app_source"},{"nam":"parentNode.parentNode.parentNode.action-type","val":"feed_list_item"}]},{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"app_source"},{"nam":"parentNode.parentNode.parentNode.node-type","val":"weibo_info"}]}],"tgt":{"nam":"innerText"},"out":"source"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"node-type","val":"feed_list_item_date"},{"nam":"parentNode.parentNode.parentNode.action-type","val":"feed_list_item"}]},{"props":[{"nam":"nodeName","val":"A"},{"nam":"node-type","val":"feed_list_item_date"},{"nam":"parentNode.parentNode.parentNode.node-type","val":"weibo_info"}]}],"tgt":{"nam":"date"},"tran":"function(x){return parseInt(x)/1000;}","out":"created_at_ts"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"P"},{"nam":"class","val":"info W_linkb W_textb"},{"nam":"parentNode.class","val":"content"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"#text"},{"nam":"parentNode.class","val":"info W_linkb W_textb"},{"nam":"data","val":"来自","cmp":"[]"}]}],"tgt":{"nam":"data"},"tran":"function(x){var y=trim(x.substring(0,x.indexOf(\'来自\')));return str2ts(y);}","out":"created_at_ts"},{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"rel","val":"nofollow"},{"nam":"parentNode.class","val":"info W_linkb W_textb"}]}],"tgt":{"nam":"innerText"},"out":"source"}]}}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"WB_text"},{"nam":"node-type","val":"feed_list_content"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"P"},{"nam":"node-type","val":"feed_list_content"},{"nam":"parentNode.class","val":"content"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 登录配置文件\n#FILENAME:Login\n#CONST:{"rego":1}\n// 登录页面等待多长时间后去检查验证码文字是否从服务器获得\n#VERITIME: 3000\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"gn_person"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 登录的特征元素, LOGIN.verify.cond 用于识别登录时是否有验证码控件，LOGIN.verify.img识别验证码图片，LOGIN.verify.input识别验证码输入框，LOGIN.verify.rego用于设置提交验证码后父窗口多长时间不能得到响应会刷新。\n#LOGIN:{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"node-type","val":"normal_form"},{"nam":"class","val":"W_login_form"}]},"usr":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]},"pwd":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"password"},{"nam":"parentNode.class","val":"inp password"},{"nam":"parentNode.parentNode.node-type","val":"password_box"}]},"btn":{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"btn_submit"},{"nam":"node-type","val":"submitBtn"},{"nam":"parentNode.parentNode.class","val":"info_list login_btn"}]}, "verify":{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"style.display","val":"none", "cmp": "!="},{"nam":"class","val":"info_list pin_code"},{"nam":"parentNode.class","val":"W_login_form"}]},"img":{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"node-type","val":"verifycode_image"}]},"input":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"node-type","val":"verifycode"},{"nam":"parentNode.class","val":"inp verify"},{"nam":"parentNode.parentNode.node-type","val":"verifycode_box"}]},"rego":1000}, "delay":1000}\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 退出配置文件\n#FILENAME:Logout\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n', 4, '', '', '');
INSERT INTO `spiderconfig` (`id`, `name`, `content`, `templatetype`, `urlregex`, `detailurlregex`, `urlconfigrule`) VALUES (7, '新浪微博评论ID', '// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.node-type","val":"comment_detail"}]},{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"feed_repeat"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){var p=x.indexOf(\'&page=\');return p>0?parseInt(x.substring(p+6)):0;}","out":"page","glob":1}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"replycomment"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){var y=x.substring(x.indexOf(\'cid=\')+4);return y.substring(0,y.indexOf(\'&\'));}","out":"id"}\n// 翻页元素标志\n#NEXT:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.node-type","val":"comment_detail"}]},{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"feed_repeat"}]}],"distinct":"outerHTML"}\n//页面URL\n#PREDUMP:{"tgtex":[{"type":{"func":"getLParameter(\'pageUrl\')"},"out":"page_url","glob":1}]}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"mid","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.class","val":"comment_lists"},{"nam":"parentNode.parentNode.node-type","val":"comment_detail"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"W_empty"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.class","val":"comment_lists"},{"nam":"parentNode.parentNode.node-type","val":"comment_detail"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"mid","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.parentNode.class","val":"feed_repeat"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"node-type","val":"tip"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.parentNode.class","val":"feed_repeat"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"tips_note"},{"nam":"node-type","val":"deleted_msg"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.parentNode.class","val":"feed_repeat"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"no_login"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"gn_person"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n// 登录检查\n#LICHK:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"no_login"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"gn_person"}]}\n// 登录动作: LIACT.delay 指spider等待多少秒后重新刷新父页面(rego)如果登录是自动的并且没有返回，它必须>2000, 因为如果登录页面第一次没有验证码，第二次有，spider用2秒的固定timer保证服务器给响应，如果没有响应假定出现验证码，重新登录，它必须比LIACT.delay短，否则父页面会被刷新，重新 打开登录页面，结果没有验证码, 进入死循环。\n#LIACT:{"url":"http://weibo.com/login.php","conf":"Login","delay":5000}\n// 退出动作\n#LOACT:{"url":"http://weibo.com/logout.php","conf":"Logout","delay":3000}\n// 翻页延迟毫秒数\n#DELAY:1000\n// 提交URL的类型\n#URLTYPE:importurl\n// 挂起警告毫秒数\n#HANGTIME:5000\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 登录配置文件\n#FILENAME:Login\n#CONST:{"rego":1}\n// 登录页面等待多长时间后去检查验证码文字是否从服务器获得\n#VERITIME: 3000\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"gn_person"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 登录的特征元素, LOGIN.verify.cond 用于识别登录时是否有验证码控件，LOGIN.verify.img识别验证码图片，LOGIN.verify.input识别验证码输入框，LOGIN.verify.rego用于设置提交验证码后父窗口多长时间不能得到响应会刷新。\n#LOGIN:{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"node-type","val":"normal_form"},{"nam":"class","val":"W_login_form"}]},"usr":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]},"pwd":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"password"},{"nam":"parentNode.class","val":"inp password"},{"nam":"parentNode.parentNode.node-type","val":"password_box"}]},"btn":{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"btn_submit"},{"nam":"node-type","val":"submitBtn"},{"nam":"parentNode.parentNode.class","val":"info_list login_btn"}]}, "verify":{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"style.display","val":"none", "cmp": "!="},{"nam":"class","val":"info_list pin_code"},{"nam":"parentNode.class","val":"W_login_form"}]},"img":{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"node-type","val":"verifycode_image"}]},"input":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"node-type","val":"verifycode"},{"nam":"parentNode.class","val":"inp verify"},{"nam":"parentNode.parentNode.node-type","val":"verifycode_box"}]},"rego":1000}, "delay":1000}\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 退出配置文件\n#FILENAME:Logout\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n', 1, '', '', '');
INSERT INTO `spiderconfig` (`id`, `name`, `content`, `templatetype`, `urlregex`, `detailurlregex`, `urlconfigrule`) VALUES (8, '新浪微博评论全部', '// 目标对象的必有属性，名和值分别代表必有属性及其依赖属性\n#REQUIRED:{"id":null,"user.id":null,"status.id":null}\n// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.node-type","val":"comment_detail"}]},{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"feed_repeat"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){var p=x.indexOf(\'&page=\');return p>0?parseInt(x.substring(p+6)):0;}","out":"page","glob":1}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"replycomment"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){var y=x.substring(x.indexOf(\'cid=\')+4);return y.substring(0,y.indexOf(\'&\'));}","out":"id"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"replycomment"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){var y=x.substring(x.indexOf(\'ouid=\')+5);return y.substring(0,y.indexOf(\'&\'));}","out":"user.id"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"replycomment"}]}],"tgt":{"nam":"action-data"},"tran":"function(x){var y=x.substring(x.indexOf(\'mid=\')+4);return y.substring(0,y.indexOf(\'&\'));}","out":"status.id"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"usercard","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.parentNode.nodeName","val":"DT"}]}],"tgt":{"post":{"typ":"url","nam":"usercard","conf":"UserInfo","tran":"function(x){return \'http://weibo.com/p/100505\'+x.substring(x.indexOf(\'id=\')+3)+\'/info\';}","lim":30,"dur":120000,"retry":1}},"tran":"getResultObject"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DD"},{"nam":"parentNode.nodeName","val":"DL"},{"nam":"parentNode.mid","val":null,"cmp":"!="},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.node-type","val":"feed_list"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"#text"},{"nam":"parentNode.nodeName","val":"DD"}]}],"tgt":{"nam":"data"},"out":"text+"},{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"usercard","val":"name=","cmp":"=]"}]}],"tgt":{"nam":"innerText"},"out":"text+"},{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"type","val":"face"}]}],"tgt":{"nam":"title"},"out":"text+"},{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"type","val":"face","cmp":"!="}]}],"tgt":{"nam":"src"},"tran":"function(x){return \' \';}","out":"text+"},{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"class","val":"S_txt2"},{"nam":"parentNode.nodeName","val":"DD"}]},{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"class","val":"W_textb"},{"nam":"parentNode.nodeName","val":"DD"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return str2ts(x.substring(x.indexOf(\'(\')+1),x.indexOf(\')\'));}","out":"created_at_ts"}]}}\n// 成组页面元素的分隔标志\n#SEP:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"mid","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"}]}\n// 翻页元素标志\n#NEXT:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.node-type","val":"comment_detail"}]},{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"innerHTML","val":"下一页"},{"nam":"action-type","val":"feed_list_page"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"feed_repeat"}]}],"distinct":"outerHTML"}\n//页面URL\n#PREDUMP:{"tgtex":[{"type":{"func":"getLParameter(\'pageUrl\')"},"out":"page_url","glob":1}]}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"mid","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.class","val":"comment_lists"},{"nam":"parentNode.parentNode.node-type","val":"comment_detail"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"W_empty"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.class","val":"comment_lists"},{"nam":"parentNode.parentNode.node-type","val":"comment_detail"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DL"},{"nam":"mid","val":null,"cmp":"!="},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.parentNode.class","val":"feed_repeat"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"node-type","val":"tip"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.parentNode.class","val":"feed_repeat"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"tips_note"},{"nam":"node-type","val":"deleted_msg"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.node-type","val":"feed_list"},{"nam":"parentNode.parentNode.class","val":"feed_repeat"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"no_login"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"gn_person"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n// 登录检查\n#LICHK:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"no_login"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"gn_person"}]}\n// 登录动作: LIACT.delay 指spider等待多少秒后重新刷新父页面(rego)如果登录是自动的并且没有返回，它必须>2000, 因为如果登录页面第一次没有验证码，第二次有，spider用2秒的固定timer保证服务器给响应，如果没有响应假定出现验证码，重新登录，它必须比LIACT.delay短，否则父页面会被刷新，重新 打开登录页面，结果没有验证码, 进入死循环。\n#LIACT:{"url":"http://weibo.com/login.php","conf":"Login","delay":5000}\n// 退出动作\n#LOACT:{"url":"http://weibo.com/logout.php","conf":"Logout","delay":3000}\n// 翻页延迟毫秒数\n#DELAY:1000\n// 提交URL的类型\n#URLTYPE:importweibo\n// 不同类型后处理动作并发限制\n#POSTLIM:10\n// 挂起警告毫秒数\n#HANGTIME:60000\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 用户信息配置文件\n#FILENAME:UserInfo\n// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"昵称"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"昵称"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"out":"user.screen_name"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"所在地"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"所在地"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"out":"user.location"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"性别"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"性别"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"tran":"function(x){if(x==\'男\')return \'m\';else return \'f\';}","out":"user.gender"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"简介"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"简介"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.innerHTML"},"out":"user.description"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"博客"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"博客"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.firstChild.innerHTML"},"out":"user.url"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"个性域名"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_item clearfix"},{"nam":"firstChild.innerHTML","val":"个性域名"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"infoblock"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}],"tgt":{"nam":"lastChild.firstChild.innerHTML"},"tran":"function(x){return x.substring(x.lastIndexOf(\'/\')+1);}","out":"user.domain"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"follow"},{"nam":"parentNode.parentNode.parentNode.parentNode.id","val":"pl_profile_photo"}]},{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"follow"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"pf_head S_bg4 S_line1"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.friends_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=follow","cmp":"[="},{"nam":"nextSibling.nodeName","val":"SPAN"},{"nam":"nextSibling.innerHTML","val":"关注"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.friends_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"fans"},{"nam":"parentNode.parentNode.parentNode.parentNode.id","val":"pl_profile_photo"}]},{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"fans"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"pf_head S_bg4 S_line1"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.followers_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=fans","cmp":"[="},{"nam":"nextSibling.nodeName","val":"SPAN"},{"nam":"nextSibling.innerHTML","val":"粉丝"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.followers_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"weibo"},{"nam":"parentNode.parentNode.parentNode.parentNode.id","val":"pl_profile_photo"}]},{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"node-type","val":"weibo"},{"nam":"parentNode.parentNode.parentNode.parentNode.parentNode.class","val":"pf_head S_bg4 S_line1"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.statuses_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=weibo","cmp":"[="},{"nam":"nextSibling.nodeName","val":"SPAN"},{"nam":"nextSibling.innerHTML","val":"微博"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.statuses_count"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.class","val":"icon_bed"}]},{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"username"}]}],"tgt":{"nam":"title"},"out":"user.verified_reason"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.class","val":"icon_bed"}]},{"props":[{"nam":"nodeName","val":"I"},{"nam":"parentNode.href","val":"http://verified.weibo.com/verify"},{"nam":"parentNode.parentNode.parentNode.parentNode.class","val":"username"}]}],"tgt":{"nam":"class"},"tran":"function(x){if(!x)return null;switch(x.substring(x.indexOf(\' \')+1)){case \'approve\':return 0;case \'approve_co\':return -2;default:return -3;}}","out":"user.verified_type"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_star_info bsp S_txt2"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.id","val":"pl_profile_extraInfo"}]},{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"pf_star_info bsp S_txt2"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"pf_info_right"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"&loc=daren","cmp":"[="}]}],"tgt":{"nam":"innerText"},"tran":"function(x) {switch(x){case \'初级达人\': return 1;case \'中级达人\': return 2;case \'高级达人\': return 3;case \'白银达人\': return 4;case \'黄金达人\': return 5;case \'白金达人\': return 6;case \'星钻达人\': return 7;case \'晶钻达人\': return 8;case \'璀钻达人\': return 9;default:return 0;}}","out":"user.level"},{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"&loc=darenscore","cmp":"[="}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseFloat(x);}","out":"user.daren.score"},{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"&loc=darenint","cmp":"[="}]}],"tgt":{"nam":"innerText"},"out":"user.daren.interest[]"}]}}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"EM"},{"nam":"class","val":"S_txt2"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"moreinfo"}]}],"tgt":{"nam":"innerHTML"},"out":"user.description"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.id","val":"place"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"username"}]}],"tgt":{"nam":"title"},"out":"user.screen_name"}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"PRF_title_b"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"PRF_modwrap clearfix"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=follow","cmp":"[="}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"W_btn_b"},{"nam":"action-type","val":"submit"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"right"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"tab_radious"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"PRF_modwrap clearfix"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.id","val":"pl_profile_infoBase"}]}\n#SANE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"info_title"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"profile_pinfo"}]}\n#SANE:{"props":[{"nam":"nodeName","val":"FORM"},{"nam":"class","val":"PRF_title_b"},{"nam":"parentNode.parentNode.nodeName","val":"DIV"},{"nam":"parentNode.parentNode.class","val":"PRF_modwrap clearfix"}]}\n#SANE:{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"A"},{"nam":"parentNode.href","val":"&mod=follow","cmp":"[="}]}\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"input"},{"nam":"node-type","val":"textElDiv"}]}\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 登录配置文件\n#FILENAME:Login\n#CONST:{"rego":1}\n// 登录页面等待多长时间后去检查验证码文字是否从服务器获得\n#VERITIME: 3000\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"gn_person"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 登录的特征元素, LOGIN.verify.cond 用于识别登录时是否有验证码控件，LOGIN.verify.img识别验证码图片，LOGIN.verify.input识别验证码输入框，LOGIN.verify.rego用于设置提交验证码后父窗口多长时间不能得到响应会刷新。\n#LOGIN:{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"node-type","val":"normal_form"},{"nam":"class","val":"W_login_form"}]},"usr":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]},"pwd":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"password"},{"nam":"parentNode.class","val":"inp password"},{"nam":"parentNode.parentNode.node-type","val":"password_box"}]},"btn":{"props":[{"nam":"nodeName","val":"A"},{"nam":"action-type","val":"btn_submit"},{"nam":"node-type","val":"submitBtn"},{"nam":"parentNode.parentNode.class","val":"info_list login_btn"}]}, "verify":{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"style.display","val":"none", "cmp": "!="},{"nam":"class","val":"info_list pin_code"},{"nam":"parentNode.class","val":"W_login_form"}]},"img":{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"node-type","val":"verifycode_image"}]},"input":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"node-type","val":"verifycode"},{"nam":"parentNode.class","val":"inp verify"},{"nam":"parentNode.parentNode.node-type","val":"verifycode_box"}]},"rego":1000}, "delay":1000}\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// 退出配置文件\n#FILENAME:Logout\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"parentNode.class","val":"inp username"},{"nam":"parentNode.parentNode.node-type","val":"username_box"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n', 4, '', '', '');
INSERT INTO `spiderconfig` (`id`, `name`, `content`, `templatetype`, `urlregex`, `detailurlregex`, `urlconfigrule`) VALUES (9, '百度列表', '// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"parentNode.class","val":"t"}]}],"tgt":{"nam":"href"},"out":"url"}\n// 翻页元素标志\n#NEXT:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"innerText","val":"下一页>"}]}]}\n//页面URL\n#PREDUMP:{"tgtex":[{"type":{"func":"getLParameter(\'pageUrl\')"},"out":"page_url","glob":1}]}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"H3"},{"nam":"class","val":"t"},{"nam":"parentNode.parentNode.id","val":"content_left"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"nors"},{"nam":"parentNode.class","val":"content_none"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 页面符合要求的特征元素（!表示不存在该元素时为真）\n#SANE:!{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"nors"},{"nam":"parentNode.class","val":"content_none"}]}\n// 获取内容页面出现验证码的特征元素, 如果内容页面的验证码和登录页面的验证码元素完全相同，需要在内容验证码条件中增加内容页面有登录页面没有的元素，反之，登录页面的验证码元素也需要添加只有登录界面有而内容页面没有的特征元素\n#VERIFY:{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"id","val":"vf"}]},"img":{"props":[{"nam":"nodeName","val":"IMG"}]},"input":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"verifycode"}]},"btn":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"type","val":"submit"}]},"rego":1000}\n#VERETRY:{"default":0}\n// 翻页延迟毫秒数\n#DELAY:2000\n// 提交URL的类型\n#URLTYPE:importarticlelist\n// 挂起警告毫秒数\n#HANGTIME:5000', 1, '', '', '{ "taskurl":"http://www.baidu.com/s?wd=$<keyword \\"%s\\"> site:$<site \\"%s\\"> inurl:$<inurl \\"%s\\">", "keyword": { "label": "关键词", "datatype": "string", "multivalue": true, "split": true }, "site": { "label": "站点", "datatype": "string", "multivalue": false, "split": false }, "inurl": { "label": "url中包含", "datatype": "string", "multivalue": false, "split": false } }');
INSERT INTO `spiderconfig` (`id`, `name`, `content`, `templatetype`, `urlregex`, `detailurlregex`, `urlconfigrule`) VALUES (10, '汽车之家论坛全部', '// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"w740"}]}],"tgt":{"nam":"innerHTML"},"tran":"function(x){if(x.indexOf(\'yy_reply_cont\')<0) {if(x.indexOf(\'<DIV class=quote\')<0) return x; else return x.substring(x.indexOf(\'</DIV>\')+6);} var subx=x.substring(x.indexOf(\'<DIV class=yy_reply_cont>\')+25); return subx.substring(0,subx.indexOf(\'</DIV>\'));}","out":"text+"}\n#GRAB:{"conds":[{"props":[{"nam":"class","val":"promptcons"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.substring(0,x.indexOf(\' \'));}","out":"text+"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"conttxt hdt"}]}],"tgt":{"nam":"innerHTML"},"out":"text+"}\n////////用户id\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"clearfix contstxt"}]}],"tgt":{"nam":"uid"},"out":"user.id"}\n////////发表source\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"parentNode.class","val":"plr26 rtopconnext"},{"nam":"innerText","val":" | 来自 ","cmp":"=]"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.substring(x.indexOf(\' | 来自 \')+6);}","out":"source"}\n////////用户等级\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"class","val":"lv-txt"},{"nam":"parentNode.class","val":"lv-icon lv-stage1 lv-posi"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.substring(2).trim();}","out":"user.level"}\n////////用户类型（版主，禁闭）\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"LI"},{"nam":"class","val":"txtcenter leftpx fw"},{"nam":"innerText","val":" ","cmp":"!="}]}],"tgt":{"nam":"innerText"},"out":"user.verified_type[]"}\n//用户头像地址\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"id","val":"userprofileimg"}]}],"tgt":{"nam":"src"},"out":"user.profile_image_url"}\n//认证车主\n//#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"calss","val":"crade"},{"nam":"parentNode.class","val":"txtcenter fw"}]}],"tgt":{"nam":"title"},"out":"user.verified_type[]"}\n//楼号\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"clearfix contstxt"}]}],"tgt":{"nam":"rf"},"tran":"function(x){return parseInt(x?x:0);}","out":"floor"}\n//唯一url\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"clearfix contstxt"}]}],"tgt":{"nam":"rf"},"tran":"function(x){var floor=parseInt(x?x:0); if(floor==0) return window.location.href; else return window.location.href+\'#\'+floor;}","out":"page_url"}\n///总评论数，点击数\n#GRAB:{"lcond":{"propexs":[{"left":{"func":"getLParameter(\'pageNo\')"},"right":{"cnst":1}},{"left":{"dom":"nodeName"},"right":{"cnst":"SPAN"}},{"left":{"dom":"class"},"right":{"cnst":"fr fon12"}},{"left":{"dom":"parentNode.parentNode.lastChild.id"},"right":{"cnst":"F0"}}]},"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"FONT"},{"nam":"id","val":"x-replys"}]}],"tgt":{"nam":"innerText"},"out":"comments_count"},	{"conds":[{"props":[{"nam":"nodeName","val":"FONT"},{"nam":"id","val":"x-views"}]}],"tgt":{"nam":"innerText"},"out":"read_count"}]}}\n//帖子类型，1精华，0普通\n#GRAB:{"conds":[{"props":[{"nam":"class","val":"contxtul louzoulog"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.indexOf(\'精华\')>0?1:0;}","out":"recommended"}\n////////所属论坛名称\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"id","val":"a_bbsname"}]}],"tgt":{"nam":"innerText"},"out":"column","glob":1}\n////////帖子标题\n#GRAB:{"conds":[{"props":[{"nam":"parentNode.class","val":"consnav"},{"nam":"class","val":"gt","cmp":"!="},{"nam":"class","val":"fr fon12","cmp":"!="},{"nam":"firstChild.nodeName","val":"A","cmp":"!="},]}],"tgt":{"nam":"innerText"},"out":"post_title","glob":1}\n////////用户名称\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"c01439a"},{"nam":"parentNode.class","val":"txtcenter fw"}]}],"tgt":{"nam":"innerText"},"out":"user.screen_name"}\n////////用户地区\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"parentNode.nodeName","val":"LI"},{"nam":"title","val":"查看该地区论坛"}]}],"tgt":{"nam":"innerHTML"},"out":"user.location"}\n////////用户主贴数\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"innerText","val":"帖","cmp":"[="},{"nam":"parentNode.innerText","val":"帖子：","cmp":"=]"},{"nam":"parentNode.parentNode.class","val":"leftlist"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.substring(0,x.indexOf(\'帖\'));}","out":"user.statuses_count"}\n////////用户回复数\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"innerText","val":"回","cmp":"[="},{"nam":"parentNode.innerText","val":"帖子：","cmp":"=]"},{"nam":"parentNode.parentNode.class","val":"leftlist"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.substring(0,x.indexOf(\'回\'));}","out":"user.replys_count"}\n//用户精华帖数\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"LI"},{"nam":"innerText","val":"精华","cmp":"[]"},{"nam":"parentNode.class","val":"leftlist"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.substring(x.indexOf(\'精华：\')+3,x.indexOf(\'帖\'));}","out":"user.recommended_count"}\n////////用户注册时间\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"LI"},{"nam":"parentNode.class","val":"leftlist"},{"nam":"innerText","val":"注册","cmp":"=]"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){var s=x.substring(x.indexOf(\'：\')+1,x.indexOf(\'日\')); var ss=(s.replace(/年/g,\'/\')).replace(/月/g,\'/\'); return (new Date(ss)).getTime()/1000;}","out":"user.created_at"}\n////////回复父楼层\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"parentNode.nodeName","val":"P"},{"nam":"target","val":"_blank","cmp":"!="},{"nam":"parentNode.parentNode.class","val":"relyhfcon"}]}],"tgt":{"nam":"href"},"tran":"function(x){var floor=x.substring(x.indexOf(\'#\')+1); return floor;}","out":"father_floor"}\n////////每楼创建时间\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"xname","val":"date"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){var str = x.replace(/-/g,\'/\'); return (new Date(str)).getTime()/1000;}","out":"created_at_ts"}\n////////下页页码\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"innerHTML","val":"下一页"}]}],"tgt":{"nam":"href"},"tran":"function(x){var p1=x.lastIndexOf(\'-\')+1;var p2=x.indexOf(\'.html\');return x.substring(p1,p2);}","out":"page","glob":1}\n//签名档\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"parentNode.class","val":"conbottoms","cmp":"=]"},{"nam":"innerText","val":"签名","cmp":"[]"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.substring(x.indexOf(\'签名\')+3);}","out":"user.description"}\n//-------------------------\n// 成组页面元素的分隔标志\n#SEP:{"props":[{"nam":"id","val":"F0","cmp":"!="},{"nam":"class","val":"clearfix contstxt"}]}\n//DUMP前处理全局变量\n#PREDUMP:{"lcond":{"propexs":[{"left":{"func":"getLParameter(\'pageNo\')"},"right":{"cnst":1},"cmp":"=="}]},"tgtex":[{"type":{"func":"setGParameter(\'orignal_url\',getLParameter(\'pageUrl\'))"}}]}\n#PREDUMP:{"lcond":{"propexs":[{"left":{"func":"getLParameter(\'pageNo\')"},"right":{"cnst":1},"cmp":">="}]},"tgtex":[{"type":{"func":"getGParameter(\'orignal_url\')"},"out":"orignal_url","glob":1}]}\n#PREDUMP:{"tgtex":[{"type":{"func":"getLParameter(\'pageUrl\')"},"out":"page_url","glob":1}]}\n//---------------\n//取得当前页码\n#PREGRAB:{"lcond":{"propexs":[{"left":{"dom":"nodeName"},"right":{"cnst":"SPAN"}},{"left":{"dom":"class"},"right":{"cnst":"cur"}}]},"tgtex":[{"type":{"dom":"innerHTML"},"tran":"function(x){setLParameter(\'pageNo\',x);}"}]}\n// 翻页元素标志\n#NEXT:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"innerHTML","val":"下一页"}]}]}\n// 翻到第一页\n#GPREACT:{"lcond":{"propexs":[{"left":{"dom":"nodeName"},"right":{"cnst":"A"}},{"left":{"dom":"parentNode.class"},"right":{"cnst":"pages"}},{"left":{"dom":"innerText"},"right":{"cnst":"1"}}]},"tgtex":[{"type":{"act":"click"}}],"nextact":"return"}\n//--------------\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"clearfix contstxt"},{"nam":"parentNode.id","val":"maxwrap-maintopic"},{"nam":"parentNode.parentNode.class","val":"conmain"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"clearfix contstxt"},{"nam":"parentNode.id","val":"maxwrap-reply"},{"nam":"parentNode.parentNode.class","val":"conmain"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 翻页延迟毫秒数\n#DELAY:1000\n// 提交URL的类型\n#URLTYPE:importarticledetail\n// 挂起警告毫秒数\n#HANGTIME:5000', 2, 'http://club\\.autohome\\.com\\.cn/bbs/thread.+\nhttp://www\\.baidu\\.com/.+', '', '{"taskurl":"$<url \\"%s\\">", "url": { "label": "站点url", "datatype": "string", "multivalue": true, "split": true}}');
INSERT INTO `spiderconfig` (`id`, `name`, `content`, `templatetype`, `urlregex`, `detailurlregex`, `urlconfigrule`) VALUES (11, '汽车之家用户全部', '// 抓取条件\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"parentNode.class","val":"userHead"}]}],"tgt":{"nam":"href"},"tran":"function(x){var p=x.lastIndexOf(\'/\')+1; return x.substring(p);}","out":"user.id"}\n//////性别，所在地，手机认证，用户名\n#GRAB:{"conds":[{"props":[{"nam":"id","val":"divuserinfo"},{"nam":"class","val":"uData"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"P"},{"nam":"innerText","val":"性别","cmp":"=]"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){if(x==\'性别:男\')return \'m\';else if(x==\'性别:女\') return \'f\';else return \'\';}","out":"user.gender"},	{"conds":[{"props":[{"nam":"nodeName","val":"P"},{"nam":"innerText","val":"所在地","cmp":"=]"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.substring(x.indexOf(\'所在地:\')+4);}","out":"user.location"},{"conds":[{"props":[{"nam":"nodeName","val":"P"},{"nam":"innerText","val":"用户名","cmp":"=]"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.substring(x.indexOf(\'用户名:\')+4);}","out":"user.screen_name"},{"conds":[{"props":[{"nam":"nodeName","val":"P"},{"nam":"innerText","val":"手机认证:已认证","cmp":"=]"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return \'手机认证\'}","out":"user.verified_type[]"}]}}\n/////头像地址\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"parentNode.parentNode.class","val":"userHead"}]}],"tgt":{"nam":"src"},"out":"user.avatar_large"}\n//////车主认证\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"sign"},{"nam":"title","val":"认证车主"}]}],"tgt":{"nam":"title"},"out":"user.verified_type[]"}\n//////关注数\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"focus"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.friends_count"}\n//////粉丝数：\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"STRONG"},{"nam":"parentNode.nodeName","val":"DIV"},{"nam":"parentNode.class","val":"fan"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return parseInt(x);}","out":"user.followers_count"}\n//用户页url\n#PREDUMP:{"tgtex":[{"type":{"func":"getLParameter(\'pageUrl\')"},"out":"page_url","glob":1}]}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"uData"},{"nam":"id","val":"divuserinfo"},{"nam":"parentNode.class","val":"classification favoriteBg"},{"nam":"parentNode.parentNode.id","val":"rightContainer"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"id","val":"UserName"},{"nam":"type","val":"text"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 翻页延迟毫秒数\n#DELAY:1000\n// 提交URL的类型\n#URLTYPE:importuserdetail\n// 挂起警告毫秒数\n#HANGTIME:5000\n#LOGIN:{"cond":{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"loginblock"}]},"usr":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"username"},{"nam":"id","val":"UserName"},{"nam":"type","val":"text"}]},"pwd":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"name","val":"password"},{"nam":"id","val":"PassWord"},{"nam":"type","val":"password"}]},"verify":{"cond":{"props":[{"nam":"nodeName","val":"DD"},{"nam":"id","val":"td1code"},{"nam":"style","val":""}]},"img":{"props":[{"nam":"nodeName","val":"IMG"},{"nam":"id","val":"ValidateCodeimg"}]},"input":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"id","val":"validateCode"}]},"rego":1000}, "btn":{"props":[{"nam":"nodeName","val":"INPUT"},{"nam":"id","val":"SubmitLogin"},{"nam":"class","val":"ibut"},{"nam":"type","val":"button"}]},"delay":1000}', 3, 'http://account\\.autohome\\.com\\.cn/login.+\nhttp://i\\.autohome\\.com\\.cn/[[:digit:]]+/info\n', '', '{"taskurl": "http://i.autohome.com.cn/$<iduser \\"%s\\">/info","iduser": { "label": "ID", "datatype": "string", "multivalue": true, "split": false}}');
INSERT INTO `spiderconfig` (`id`, `name`, `content`, `templatetype`, `urlregex`, `detailurlregex`, `urlconfigrule`) VALUES (12, '太平洋论坛全部', '// 翻到第一页\n//#GPREACT:{"lcond":{"propexs":[{"left":{"dom":"nodeName"},"right":{"cnst":"A"}},{"left":{"dom":"innerHTML"},"right":{"cnst":"1"}},{"left":{"dom":"parentNode.class"},"right":{"cnst":"pager"}}]},"tgtex":[{"type":{"act":"click"}}],"nextact":"return"}\n//#GPREACT:{"lcond":{"propexs":[{"left":{"dom":"nodeName"},"right":{"cnst":"A"}},{"left":{"dom":"innerHTML"},"right":{"cnst":"1..."}},{"left":{"dom":"parentNode.class"},"right":{"cnst":"pager"}}]},"tgtex":[{"type":{"act":"click"}}],"nextact":"return"}\n#GPREACT:{"lcond":{"propexs":[{"left":{"dom":"nodeName"},"right":{"cnst":"A"}},{"left":{"dom":"parentNode.class"},"right":{"cnst":"pager"}}],"sublconds":[{"propexs":[{"left":{"dom":"innerHTML"},"right":{"cnst":"1"}},{"left":{"dom":"innerHTML"},"right":{"cnst":"1..."}}],"ope":"O"}]},"tgtex":[{"type":{"act":"click"}}],"nextact":"return"}\n//---------取得当前页码\n#PREGRAB:{"lcond":{"propexs":[{"left":{"dom":"nodeName"},"right":{"cnst":"SPAN"}},{"left":{"dom":"parentNode.class"},"right":{"cnst":"pager"}}]},"tgtex":[{"type":{"dom":"innerHTML"},"tran":"function(x){setLParameter(\'pageNo\',x);}"}]}\n#PREGRAB:{"lcond":{"propexs":[{"left":{"dom":"nodeName"},"right":{"cnst":"DIV"}},{"left":{"dom":"class"},"right":{"cnst":"pager"}},{"left":{"dom":"firstChild"},"right":{"cnst":null}}]},"tgtex":[{"type":{"func":"setLParameter(\'pageNo\',1)"}}]}\n// ---------抓取条件\n//文章正文\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"post_msg replyBody"}]}],"tgt":{"nam":"innerHTML"},"tran":"function(x){if (x.indexOf(\'<SPAN class=cite>\')<0) return x; return x.substring(x.lastIndexOf(\'</SPAN>\')+7);}","out":"text+"}\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"audit"},{"nam":"parentNode.class","val":"post_msg"}]}],"tgt":{"nam":"innerText"},"out":"text+"}\n//用户身份(认证会员，版主)\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"P"},{"nam":"class","val":"uName user","cmp":"=]"},{"nam":"parentNode.class","val":"floor-userInfo"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"class","val":"user_type","cmp":"[]"}]}],"tgt":{"nam":"innerText"},"out":"user.verified_type+"},{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"vipsign"}]}],"tgt":{"nam":"title"},"out":"user.verified_type+"}]}}\n//用户id\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"user_info"}]}],"tgt":{"nam":"authorid"},"out":"user.id"}\n//用户昵称\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"user_info"}]}],"tgt":{"nam":"authornickname"},"out":"user.screen_name"}\n//用户注册名，市\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"user_info"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"LI"},{"nam":"innerText","val":"用户：","cmp":"=]"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.trim().substring(3);}","out":"user.name"},	{"conds":[{"props":[{"nam":"nodeName","val":"LI"},{"nam":"innerText","val":"地区：","cmp":"=]"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.substring(3).trim().replace(/市/g,\'\');}","out":"user.city"}]}}\n//唯一url(未对主楼特殊处理，与original_url不同)\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"post_wrap postids","cmp":"[="}]}],"tgt":{"nam":"id"},"tran":"function(x){return window.location.href+\'#\'+x;}","out":"page_url"}\n//标题\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"H1"},{"nam":"class","val":"yh"},{"nam":"parentNode.class","val":"post_r_tit"}]}],"tgt":{"nam":"innerText"},"out":"post_title","glob":1}\n//论坛\n#GRAB:{"conds":[{"props":[{"nam":"class","val":"com-crumb"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){var fst=x.indexOf(\'>\');var snd = x.indexOf(\'>\',fst+1);var thrd = x.indexOf(\'>\',snd+1);var fourth=x.indexOf(\'[\',thrd+1);return x.substring(thrd+1,fourth).trim();}","out":"column","glob":1}\n#GRAB:{"conds":[{"props":[{"nam":"class","val":"com-crumb"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){var fst=x.indexOf(\'>\');var snd = x.indexOf(\'>\',fst+1);var thrd = x.indexOf(\'>\',snd+1);return x.substring(snd+1,thrd).trim();}","out":"column1","glob":1}\n//发表时间\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"post_time"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){var str = x.substring(4).replace(/-/g,\'/\'); return (new Date(str)).getTime()/1000;}","out":"created_at_ts"}\n//楼号\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"post_floor"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){if(x.indexOf(\'楼主\')>=0) return 0; if(x.indexOf(\'楼\')>=0) return x.substring(0,x.indexOf(\'楼\'))-1; switch (x.trim()) { case \'沙发\': return 1; case \'板凳\': return 2; case \'地板\': return 3; case \'地下室\': return 4;}}","out":"floor"}\n//评论，点击数\n#GRAB:{"lcond":{"propexs":[{"left":{"func":"getLParameter(\'pageNo\')"},"right":{"cnst":1}},{"left":{"dom":"nodeName"},"right":{"cnst":"P"}},{"left":{"dom":"class"},"right":{"cnst":"overView"}}]},"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"id","val":"views"}]}],"tgt":{"nam":"innerText"},"out":"read_count"},{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"id","val":"views","cmp":"!="}]}],"tgt":{"nam":"innerText"},"out":"comments_count"}]}}\n//source\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"FONT"},{"nam":"parentNode.parentNode.class","val":"post_edition"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.substring(2);}","out":"source"}\n//父楼号\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"FONT"},{"nam":"parentNode.class","val":"cite"},{"nam":"nextSibling.nodeName","val":"A"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.substring(0,x.indexOf(\'楼\'))-1;}","out":"father_floor"}\n//精华（可能会没有值）\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"post_edition"},{"nam":"parentNode.class","val":"post_main "}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.indexOf(\'精华\')>0?1:0;}","out":"recommended"}\n//用户粉丝数，精华帖数，总贴数(发帖+回帖)\n//#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"UL"},{"nam":"parentNode.class","val":"user_atten"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"class","val":"num fan","cmp":"=]"}]}],"tgt":{"nam":"innerText"},"out":"user.followers_count"},{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"class","val":"num"}]}],"tgt":{"nam":"innerText"},"out":"user.recommended_count"},{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"class","val":"num topic","cmp":"=]"}]}],"tgt":{"nam":"innerText"},"out":"user.statuses_count"}]}}\n//用户等级\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"B"},{"nam":"parentNode.parentNode.class","val":"user_title"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){switch(x){case \'乞丐\':return 0;case \'太平洋舰队新兵\':return 1;case \'太平洋舰队列兵\':return 2;case \'太平洋舰队上等兵\':return 3;case \'太平洋舰队下士\':return 4;case \'太平洋舰队中士\':return 5;case \'太平洋舰队上士\':return 6;case \'太平洋舰队少尉\':return 7;case \'太平洋舰队中尉\':return 8;case \'太平洋舰队上尉\':return 9;case \'太平洋舰队少校\':return 10;case \'太平洋舰队中校\':return 11;case \'太平洋舰队上校\':return 12;case \'太平洋舰队大校\':return 13;case \'太平洋舰队少将\':return 14;case \'太平洋舰队中将\':return 15;case \'太平洋舰队上将\':return 16;case \'太平洋舰队大将\':return 17;case \'太平洋舰队元帅\':return 18;default:return \'\';}}","out":"user.level"}\n//下页页码\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"next"},{"nam":"innerHTML","val":"下一页"}]}],"tgt":{"nam":"href"},"tran":"function(x){var p1=x.lastIndexOf(\'-\')+1;var p2=x.indexOf(\'.html\');return x.substring(p1,p2);}","out":"page","glob":1}\n\n// 成组页面元素的分隔标志\n#SEP:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"post_wrap postids","cmp":"[="}]}\n// 翻页元素标志\n#NEXT:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"next"},{"nam":"innerHTML","val":"下一页"}]}]}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"id","val":"views"},{"nam":"parentNode.class","val":"overView"},{"nam":"innerText","val":"","cmp":"!="}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"rapitReply post_listA"},{"nam":"parentNode.id","val":"topic_wrap"}]}\n#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"post_listA"},{"nam":"parentNode.id","val":"topic_wrap"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 翻页延迟毫秒数\n#DELAY:1000\n// 提交URL的类型\n#URLTYPE:importarticledetail\n// 挂起警告毫秒数\n#HANGTIME:5000\n\n//DUMP前处理\n#PREDUMP:{"lcond":{"propexs":[{"left":{"func":"getLParameter(\'pageNo\')"},"right":{"cnst":1},"cmp":"=="}]},"tgtex":[{"type":{"func":"setGParameter(\'orignal_url\',getLParameter(\'pageUrl\'))"}}]}\n#PREDUMP:{"lcond":{"propexs":[{"left":{"func":"getLParameter(\'pageNo\')"},"right":{"cnst":null},"cmp":"!="}]},"tgtex":[{"type":{"func":"getGParameter(\'orignal_url\')"},"out":"orignal_url","glob":1}]}\n#PREDUMP:{"tgtex":[{"type":{"func":"getLParameter(\'pageUrl\')"},"out":"page_url","glob":1}]}\n\n', 2, 'http://bbs\\.pcauto\\.com\\.cn/topic-.+\nhttp://www\\.baidu\\.com/.+', '', '{"taskurl":"$<url \\"%s\\">", "url": { "label": "站点url", "datatype": "string", "multivalue": true, "split": true}}');
INSERT INTO `spiderconfig` (`id`, `name`, `content`, `templatetype`, `urlregex`, `detailurlregex`, `urlconfigrule`) VALUES (13, '太平洋家用户全部', '// 抓取条件userid\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"class","val":"touImg"}]}],"tgt":{"nam":"href"},"tran":"function(x){var p1=x.indexOf(\'cn/\')+3; var p2=x.lastIndexOf(\'/\'); return x.substring(p1,p2);}","out":"user.id"}\n//关注数，粉丝数\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"P"},{"nam":"class","val":"clearfix"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"follow","cmp":"[]"}]}],"tgt":{"nam":"innerText"},"out":"user.followers_count"},	{"conds":[{"props":[{"nam":"nodeName","val":"A"},{"nam":"href","val":"fan","cmp":"[]"}]}],"tgt":{"nam":"innerText"},"out":"user.friends_count"}]}}\n//昵称，用户名，地区，生日\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"info"}]}],"tgt":{"subs":[{"conds":[{"props":[{"nam":"nodeName","val":"P"},{"nam":"class","val":"p1"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){return x.trim();}","out":"user.screen_name"},{"conds":[{"props":[{"nam":"nodeName","val":"P"},{"nam":"innerText","val":"用户","cmp":"[]"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){var subx=x.substring(x.indexOf(\'用户：\')+3); return subx.substring(0,subx.indexOf(\' \'));}","out":"user.name"},{"conds":[{"props":[{"nam":"nodeName","val":"P"},{"nam":"innerText","val":"地区","cmp":"[]"},{"nam":"innerText","val":"地区：-","cmp":"!["}]}],"tgt":{"nam":"innerText"},"tran":"function(x){var subx=x.substring(x.indexOf(\'地区：\')+3); return subx.substring(0,subx.indexOf(\' \')).replace(/-/g,\' \').replace(/省/g,\'\').replace(/市/g,\'\');}","out":"user.location"},{"conds":[{"props":[{"nam":"nodeName","val":"P"},{"nam":"innerText","val":"生日","cmp":"[]"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){var str = x.substring(x.indexOf(\'生日：\')+3).replace(/-/g,\'/\');  return (new Date(str)).getTime()/1000;}","out":"user.created_at"}]}}\n//等级\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"B"},{"nam":"id","val":"myRank"}]}],"tgt":{"nam":"innerText"},"tran":"function(x){switch(x){case \'乞丐\':return 0;case \'太平洋舰队新兵\':return 1;case \'太平洋舰队列兵\':return 2;case \'太平洋舰队上等兵\':return 3;case \'太平洋舰队下士\':return 4;case \'太平洋舰队中士\':return 5;case \'太平洋舰队上士\':return 6;case \'太平洋舰队少尉\':return 7;case \'太平洋舰队中尉\':return 8;case \'太平洋舰队上尉\':return 9;case \'太平洋舰队少校\':return 10;case \'太平洋舰队中校\':return 11;case \'太平洋舰队上校\':return 12;case \'太平洋舰队大校\':return 13;case \'太平洋舰队少将\':return 14;case \'太平洋舰队中将\':return 15;case \'太平洋舰队上将\':return 16;case \'太平洋舰队大将\':return 17;case \'太平洋舰队元帅\':return 18;default:return \'\';}}","out":"user.level"}\n//主贴数\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"id","val":"myTopic"}]}],"tgt":{"nam":"innerText"},"out":"user.statuses_count"}\n//回帖数\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"id","val":"myPost"}]}],"tgt":{"nam":"innerText"},"out":"user.replys_count"}\n//精华帖数\n#GRAB:{"conds":[{"props":[{"nam":"nodeName","val":"SPAN"},{"nam":"id","val":"myPick"}]}],"tgt":{"nam":"innerText"},"out":"user.recommended_count"}\n//用户页url\n#PREDUMP:{"tgtex":[{"type":{"func":"getLParameter(\'pageUrl\')"},"out":"page_url","glob":1}]}\n// 加载完成的特征元素\n#LDDONE:{"props":[{"nam":"nodeName","val":"A"},{"nam":"parentNode.parentNode.innerText","val":"帖子","cmp":"[]"},{"nam":"parentNode.parentNode.parentNode.class","val":"clearfix"},{"nam":"innerText","val":"0","cmp":"!="}]}\n//#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"wrap"}]}\n//#LDDONE:{"props":[{"nam":"nodeName","val":"DIV"},{"nam":"class","val":"wrap set"}]}\n// 判断加载完成的重试频率（毫秒）\n#LDTIME:100\n// 翻页延迟毫秒数\n#DELAY:1000\n// 提交URL的类型\n#URLTYPE:importuserdetail\n// 挂起警告毫秒数\n#HANGTIME:5000', 3, 'http://my\\.pcauto\\.com\\.cn/.+', '', '{"taskurl": "http://my.pcauto.com.cn/$<iduser \\"%s\\">/$<path \\"%s\\">","iduser": { "label": "ID", "datatype": "string", "multivalue": true, "split": false},"path": { "label": "PATH", "datatype": "string", "multivalue": true, "split": false}}');

ALTER TABLE `task`  ADD COLUMN `taskpagestyletype` TINYINT(2) NULL COMMENT '任务内容类型1.文章列表2.文章详情3.用户详情.4.文章列表+文章详情+用户详情' AFTER `tasktype`;
ALTER TABLE `taskhistory`  ADD COLUMN `taskpagestyletype` TINYINT(2) NULL COMMENT '任务内容类型1.文章列表2.文章详情3.用户详情.4.文章列表+文章详情+用户详情' AFTER `tasktype`;
ALTER TABLE `taskschedule`  ADD COLUMN `taskpagestyletype` TINYINT(2) NULL COMMENT '任务内容类型1.文章列表2.文章详情3.用户详情.4.文章列表+文章详情+用户详情' AFTER `tasktype`;
ALTER TABLE `taskschedulehistory`  ADD COLUMN `taskpagestyletype` TINYINT(2) NULL COMMENT '任务内容类型1.文章列表2.文章详情3.用户详情.4.文章列表+文章详情+用户详情' AFTER `tasktype`;

/*来源表*/
INSERT INTO `source` (`id`, `sourcetype`, `name`, `modeltype`, `business`) VALUES (3, 2, '汽车之家', NULL, NULL);
INSERT INTO `source` (`id`, `sourcetype`, `name`, `modeltype`, `business`) VALUES (4, NULL, '百度', NULL, NULL);
INSERT INTO `source` (`id`, `sourcetype`, `name`, `modeltype`, `business`) VALUES (5, 2, '太平洋', NULL, NULL);

INSERT INTO `sourceurl` (`sourceid`, `source`) VALUES (3, 'autohome.com.cn');
INSERT INTO `sourceurl` (`sourceid`, `source`) VALUES (3, 'i.autohome.com.cn');
INSERT INTO `sourceurl` (`sourceid`, `source`) VALUES (4, 'www.baidu.com');
INSERT INTO `sourceurl` (`sourceid`, `source`) VALUES (3, 'club.autohome.com.cn');
INSERT INTO `sourceurl` (`sourceid`, `source`) VALUES (1, 's.weibo.com');
INSERT INTO `sourceurl` (`sourceid`, `source`) VALUES (5, 'my.pcauto.com.cn');
INSERT INTO `sourceurl` (`sourceid`, `source`) VALUES (5, 'bbs.pcauto.com.cn');

update dict_area set 3rd_part = -1 where id>567;
ALTER TABLE `dict_area`  CHANGE COLUMN `3rd_part` `3rd_part` INT(11) NOT NULL DEFAULT '-1' COMMENT '第三方标识，-1为通用型,1为微博api数字型' AFTER `3rd_district`;

insert into dict_area (area_code, 3rd_city) values ('110100','北京');
insert into dict_area (area_code, 3rd_city) values ('120100','天津');
insert into dict_area (area_code, 3rd_city) values ('500100','重庆');
insert into dict_area (area_code, 3rd_city) values ('310100','上海');
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110101', NULL, '北京', '东城', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110102', NULL, '北京', '西城', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110103', NULL, '北京', '崇文', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110104', NULL, '北京', '宣武', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110105', NULL, '北京', '朝阳', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110106', NULL, '北京', '丰台', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110107', NULL, '北京', '石景山', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110108', NULL, '北京', '海淀', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110109', NULL, '北京', '门头沟', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110111', NULL, '北京', '房山', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110112', NULL, '北京', '通州', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110113', NULL, '北京', '顺义', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110114', NULL, '北京', '昌平', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110115', NULL, '北京', '大兴', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110116', NULL, '北京', '怀柔', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110117', NULL, '北京', '平谷', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110228', NULL, '北京', '密云', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('110229', NULL, '北京', '延庆', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120101', NULL, '天津', '和平', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120102', NULL, '天津', '河东', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120103', NULL, '天津', '河西', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120104', NULL, '天津', '南开', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120105', NULL, '天津', '河北', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120106', NULL, '天津', '红桥', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120107', NULL, '天津', '塘沽', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120108', NULL, '天津', '汉沽', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120109', NULL, '天津', '大港', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120110', NULL, '天津', '东丽', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120111', NULL, '天津', '西青', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120112', NULL, '天津', '津南', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120113', NULL, '天津', '北辰', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120114', NULL, '天津', '武清', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120115', NULL, '天津', '宝坻', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120116', NULL, '天津', '滨海区', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120127', NULL, '天津', '保税', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120221', NULL, '天津', '宁河', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120223', NULL, '天津', '静海', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('120225', NULL, '天津', '蓟', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310101', NULL, '上海', '黄浦', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310103', NULL, '上海', '卢湾', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310104', NULL, '上海', '徐汇', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310105', NULL, '上海', '长宁', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310106', NULL, '上海', '静安', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310107', NULL, '上海', '普陀', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310108', NULL, '上海', '闸北', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310109', NULL, '上海', '虹口', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310110', NULL, '上海', '杨浦', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310112', NULL, '上海', '闵行', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310113', NULL, '上海', '宝山', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310114', NULL, '上海', '嘉定', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310115', NULL, '上海', '浦东', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310116', NULL, '上海', '金山', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310117', NULL, '上海', '松江', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310118', NULL, '上海', '青浦', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310119', NULL, '上海', '南汇', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310120', NULL, '上海', '奉贤', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('310230', NULL, '上海', '崇明', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500101', NULL, '重庆', '万州', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500102', NULL, '重庆', '涪陵', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500103', NULL, '重庆', '渝中', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500104', NULL, '重庆', '大渡口', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500105', NULL, '重庆', '江北', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500106', NULL, '重庆', '沙坪坝', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500107', NULL, '重庆', '九龙坡', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500108', NULL, '重庆', '南岸', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500109', NULL, '重庆', '北碚', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500110', NULL, '重庆', '万盛', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500111', NULL, '重庆', '双桥', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500112', NULL, '重庆', '渝北', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500113', NULL, '重庆', '巴南', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500114', NULL, '重庆', '黔江', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500115', NULL, '重庆', '长寿', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500116', NULL, '重庆', '江津', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500117', NULL, '重庆', '合川', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500118', NULL, '重庆', '永川', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500119', NULL, '重庆', '南川', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500222', NULL, '重庆', '綦江', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500223', NULL, '重庆', '潼南', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500224', NULL, '重庆', '铜梁', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500225', NULL, '重庆', '大足', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500226', NULL, '重庆', '荣昌', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500227', NULL, '重庆', '璧山', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500228', NULL, '重庆', '梁平', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500229', NULL, '重庆', '城口', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500230', NULL, '重庆', '丰都', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500231', NULL, '重庆', '垫江', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500232', NULL, '重庆', '武隆', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500233', NULL, '重庆', '忠', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500234', NULL, '重庆', '开', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500235', NULL, '重庆', '云阳', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500236', NULL, '重庆', '奉节', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500237', NULL, '重庆', '巫山', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500238', NULL, '重庆', '巫溪', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500240', NULL, '重庆', '石柱', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500241', NULL, '重庆', '秀山', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500242', NULL, '重庆', '酉阳', NULL, -1);
INSERT INTO `dict_area` (`area_code`, `3rd_country`, `3rd_province`, `3rd_city`, `3rd_district`, `3rd_part`) VALUES ('500243', NULL, '重庆', '彭水', NULL, -1);
